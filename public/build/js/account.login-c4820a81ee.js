(function(){this.w=$(window),this.d=$(document),this.content=$("#content"),this.mid=$("#mid"),this.backgound=$("#background")}).call(define("dom")),function(){window.view_nav_left.fold=function(){return dom.content.css("padding-left",60),dom.backgound.css("left",60)},window.view_nav_left.unfold=function(){return dom.content.css("padding-left",140),dom.backgound.css("left",140)},this.resize_event=dom.w.resize(function(){}),this.scroll_event=dom.w.scroll(function(){})}.call(define("view_page_response")),function(){var e,n=this;this.vue=new Vue({el:"#login-container",data:{username:{val:"",error:{active:!1,text:""}},password:{val:""}},methods:{_check:function(){n.check()},_login:function(){n.login()}}}),this.error=function(t){e&&clearTimeout(e),n.vue.username.error.active=!0,n.vue.username.error.text=t,e=setTimeout(function(){n.vue.username.error.active=!1},2e3)},this.check=function(e){var t=n.vue.username.val;return""==t?n.error("用户名为空"):void request.post("/account/exist",function(t){t.hasOwnProperty("code")&&"10001"==t.code?n.error(t.msg||"请检查用户名"):!!e&&e()},{username:t})},this.login=function(){var e={username:n.vue.username.val,password:n.vue.password.val,redirect:input.get("redirect")};n.check(function(){request.post("/account/login",function(e){e.hasOwnProperty("code")&&"0"==e.code?e.data.hasOwnProperty("site")&&e.data.hasOwnProperty("session")&&n.redirect(e.data.session,e.data.site):n.error("用户名或密码错误")},e)})},this.redirect=function(e,n){var t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/,o=input.get("redirect"),r=o?decodeURIComponent(o):"/",i=t.exec(r);return n&&i&&i[0]?location.href="http://"+i[0]+"/sso/"+input.create_param({session:e,redirect:r}):location.href=r}}.call(define("c_login"));