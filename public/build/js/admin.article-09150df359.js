(function(){this.w=$(window),this.d=$(document),this.filter=$("#filter"),this.content=$("#admin-content"),this.mid=$("#mid")}).call(define("dom")),function(){window.view_nav_left.fold=function(){return dom.mid.css("left",60),dom.content.css("padding-left",310),dom.filter.addClass("trans").removeClass("unfold")},window.view_nav_left.unfold=function(){return dom.mid.css("left",140),dom.content.css("padding-left",390),dom.filter.addClass("trans").addClass("unfold")}}.call(define("view_page_response")),!function(){var e,t=[].slice;e=function(){function e(e){var t,i,n,o,a,s,r;if(this.opts=$.extend({},this.opts,e),(a=this.constructor)._connectedClasses||(a._connectedClasses=[]),n=function(){var e,i,n,a;for(n=this.constructor._connectedClasses,a=[],e=0,i=n.length;i>e;e++)t=n[e],o=t.pluginName.charAt(0).toLowerCase()+t.pluginName.slice(1),t.prototype._connected&&(t.prototype._module=this),a.push(this[o]=new t);return a}.call(this),this._connected)this.opts=$.extend({},this.opts,this._module.opts);else for(this._init(),s=0,r=n.length;r>s;s++)i=n[s],"function"==typeof i._init&&i._init();this.trigger("initialized")}return e.extend=function(e){var t,i,n;if(null!=e&&"object"==typeof e){for(t in e)i=e[t],"included"!==t&&"extended"!==t&&(this[t]=i);return null!=(n=e.extended)?n.call(this):void 0}},e.include=function(e){var t,i,n;if(null!=e&&"object"==typeof e){for(t in e)i=e[t],"included"!==t&&"extended"!==t&&(this.prototype[t]=i);return null!=(n=e.included)?n.call(this):void 0}},e.connect=function(e){if("function"==typeof e){if(!e.pluginName)throw new Error("Module.connect: cannot connect plugin without pluginName");return e.prototype._connected=!0,this._connectedClasses||(this._connectedClasses=[]),this._connectedClasses.push(e),e.pluginName?this[e.pluginName]=e:void 0}},e.prototype.opts={},e.prototype._init=function(){},e.prototype.on=function(){var e,i;return e=1<=arguments.length?t.call(arguments,0):[],(i=$(this)).on.apply(i,e),this},e.prototype.one=function(){var e,i;return e=1<=arguments.length?t.call(arguments,0):[],(i=$(this)).one.apply(i,e),this},e.prototype.off=function(){var e,i;return e=1<=arguments.length?t.call(arguments,0):[],(i=$(this)).off.apply(i,e),this},e.prototype.trigger=function(){var e,i;return e=1<=arguments.length?t.call(arguments,0):[],(i=$(this)).trigger.apply(i,e),this},e.prototype.triggerHandler=function(){var e,i;return e=1<=arguments.length?t.call(arguments,0):[],(i=$(this)).triggerHandler.apply(i,e)},e.prototype._t=function(){var e,i;return e=1<=arguments.length?t.call(arguments,0):[],(i=this.constructor)._t.apply(i,e)},e._t=function(){var e,i,n,o;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],n=(null!=(o=this.i18n[this.locale])?o[i]:void 0)||"",e.length>0?(n=n.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(t,i,n){return n?i+e[parseInt(n)-1]:i+e.shift()}),n.replace(/%%s/g,"%s")):n},e.i18n={"zh-CN":{}},e.locale="zh-CN",e}(),window.SimpleModule=e}.call(this),!function(){var e,t,i={}.hasOwnProperty,n=function(e,t){function n(){this.constructor=e}for(var o in t)i.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.count=0,t.prototype.opts={url:"",params:null,fileKey:"upload_file",connectionCount:3},t.prototype._init=function(){return this.files=[],this.queue=[],this.id=++t.count,this.on("uploadcomplete",function(e){return function(t,i){return e.files.splice($.inArray(i,e.files),1),e.queue.length>0&&e.files.length<e.opts.connectionCount?e.upload(e.queue.shift()):e.uploading=!1}}(this)),$(window).on("beforeunload.uploader-"+this.id,function(e){return function(t){return e.uploading?(t.originalEvent.returnValue=e._t("leaveConfirm"),e._t("leaveConfirm")):void 0}}(this))},t.prototype.generateId=function(){var e;return e=0,function(){return e+=1}}(),t.prototype.upload=function(e,t){var i,n,o,a;if(null==t&&(t={}),null!=e){if($.isArray(e)||e instanceof window.FileList)for(o=0,a=e.length;a>o;o++)i=e[o],this.upload(i,t);else $(e).is("input:file")?(n=$(e).attr("name"),n&&(t.fileKey=n),this.upload($.makeArray($(e)[0].files),t)):e.id&&e.obj||(e=this.getFile(e));if(e&&e.obj){if($.extend(e,t),this.files.length>=this.opts.connectionCount)return void this.queue.push(e);if(this.triggerHandler("beforeupload",[e])!==!1)return this.files.push(e),this._xhrUpload(e),this.uploading=!0}}},t.prototype.getFile=function(e){var t,i,n;return e instanceof window.File||e instanceof window.Blob?(t=null!=(i=e.fileName)?i:e.name,{id:this.generateId(),params:this.opts.params,fileKey:this.opts.fileKey,name:t,size:null!=(n=e.fileSize)?n:e.size,ext:t?t.split(".").pop().toLowerCase():"",obj:e}):null},t.prototype._xhrUpload=function(e){var t;return t=this,$.ajax({dataType:"json",url:"/qiniu/upload/token",async:!0,success:function(i){var n,o,a,s;if(n=new FormData,n.append("file",e.obj),n.append("key",function(e){var t=e.split("."),i=t.length,n=t[i-1],o=(new Date).getTime(),a=function(e){e=escape(e);var t,i,n,o,a,s="",r="",l="",c=0,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";do t=e.charCodeAt(c++),i=e.charCodeAt(c++),r=e.charCodeAt(c++),n=t>>2,o=(3&t)<<4|i>>4,a=(15&i)<<2|r>>6,l=63&r,isNaN(i)?a=l=64:isNaN(r)&&(l=64),s=s+d.charAt(n)+d.charAt(o)+d.charAt(a)+d.charAt(l),t=i=r="",n=o=a=l="";while(c<e.length);return s}(e+o);return a.substr(0,16)+"."+n}(e.name)),e.params){s=e.params;for(o in s)a=s[o],n.append(o,a)}return n.append("token",i.token),e.xhr=$.ajax({url:"http://up.qiniu.com",data:n,dataType:"json",processData:!1,contentType:!1,type:"POST",headers:{"X-File-Name":encodeURIComponent(e.name)},xhr:function(){var e;return e=$.ajaxSettings.xhr(),e&&(e.upload.onprogress=function(e){return function(t){return e.progress(t)}}(this)),e},progress:function(){return function(i){return i.lengthComputable?t.trigger("uploadprogress",[e,i.loaded,i.total]):void 0}}(this),error:function(){return function(i,n){return t.trigger("uploaderror",[e,i,n])}}(this),success:function(){return function(i){return t.trigger("uploadprogress",[e,e.size,e.size]),t.trigger("uploadsuccess",[e,i])}}(this),complete:function(){return function(i){return t.trigger("uploadcomplete",[e,i.responseText])}}(this)})}})},t.prototype.cancel=function(e){var t,i,n,o;if(!e.id)for(o=this.files,i=0,n=o.length;n>i;i++)if(t=o[i],t.id===1*e){e=t;break}return this.trigger("uploadcancel",[e]),e.xhr&&e.xhr.abort(),e.xhr=null},t.prototype.readImageFile=function(e,t){var i,n;if($.isFunction(t))return n=new Image,n.onload=function(){return t(n)},n.onerror=function(){return t()},window.FileReader&&FileReader.prototype.readAsDataURL&&/^image/.test(e.type)?(i=new FileReader,i.onload=function(e){return n.src=e.target.result},i.readAsDataURL(e)):t()},t.prototype.destroy=function(){var e,t,i,n;for(this.queue.length=0,n=this.files,t=0,i=n.length;i>t;t++)e=n[t],this.cancel(e);return $(window).off(".uploader-"+this.id),$(document).off(".uploader-"+this.id)},t.i18n={"zh-CN":{leaveConfirm:"文件正在上传,确认退出?"}},t.locale="zh-CN",t}(SimpleModule),t=function(t){return new e(t)},window.simple=window.simple||{},simple.uploader=t,window.get_crop=function(e){var t,i,n,o,a,s,r;return n=e,o=0,s=0,r=0,n&&(a=n.w,i=n.h,a>i?(o=i,s=(a-i)/2,r=0):(o=a,s=0,r=(i-a)/2)),t=""+o+"x"+o+"a"+s+"a"+r}}.call(this),function(){this.imageUploader=function(e,t,i,n){var o=null,a=n?n:alert,s=2097152,r={},l="http://qiniu.cdn-chuang.com/";return o=simple.uploader({}),o.on("beforeupload",function(t,i,n){e(t,i,n)}),o.on("uploadprogress",function(e,i,n,o){t(parseFloat((n/o*100).toFixed(0)))}),o.on("uploadsuccess",function(e,t,n){n.hasOwnProperty("key")?i(l+n.key,n.key):a("上传失败")}),o.on("uploaderror",function(e,t,i,n){a("服务器错误")}),r={upload:function(e){var t=0;return e&&e[0]&&e[0].size&&(t=e[0].size),t>s?a("上传文件过大"):(o.upload(e),r)},cancel:function(){return o.cancel(),r},maxSize:function(e){return s=1024*e*1024,r}}}}.call(this),"classList"in document.createElement("_")||!function(e){"use strict";if("Element"in e){var t="classList",i="prototype",n=e.Element[i],o=Object,a=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[i].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},c=function(e){for(var t=a.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],n=0,o=i.length;o>n;n++)this.push(i[n]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},d=c[i]=[],u=function(){return new c(this)};if(r[i]=Error[i],d.item=function(e){return this[e]||null},d.contains=function(e){return e+="",-1!==l(this,e)},d.add=function(){var e,t=arguments,i=0,n=t.length,o=!1;do e=t[i]+"",-1===l(this,e)&&(this.push(e),o=!0);while(++i<n);o&&this._updateClassName()},d.remove=function(){var e,t,i=arguments,n=0,o=i.length,a=!1;do for(e=i[n]+"",t=l(this,e);-1!==t;)this.splice(t,1),a=!0,t=l(this,e);while(++n<o);a&&this._updateClassName()},d.toggle=function(e,t){e+="";var i=this.contains(e),n=i?t!==!0&&"remove":t!==!1&&"add";return n&&this[n](e),t===!0||t===!1?t:!i},d.toString=function(){return this.join(" ")},o.defineProperty){var h={get:u,enumerable:!0,configurable:!0};try{o.defineProperty(n,t,h)}catch(p){-2146823252===p.number&&(h.enumerable=!1,o.defineProperty(n,t,h))}}else o[i].__defineGetter__&&n.__defineGetter__(t,u)}}(self),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},n=function(e,t,i){this.data=e,this.size=e.length,this.type=t,this.encoding=i},o=i.prototype,a=n.prototype,s=e.FileReaderSync,r=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,h=d.revokeObjectURL,p=d,f=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=a.fake=!0;c--;)r.prototype[l[c]]=c+1;return d.createObjectURL||(p=e.URL=function(e){var t,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=e,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(t=e.match(y),i.origin=t&&t[1])),i}),p.createObjectURL=function(e){var t,i=e.type;return null===i&&(i="application/octet-stream"),e instanceof n?(t="data:"+i,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):f?t+";base64,"+f(e.data):t+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(d,e)},o.append=function(e){var i=this.data;if(v&&(e instanceof g||e instanceof v)){for(var o="",a=new v(e),l=0,c=a.length;c>l;l++)o+=String.fromCharCode(a[l]);i.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!s)throw new r("NOT_READABLE_ERR");var d=new s;i.push(d.readAsBinaryString(e))}else e instanceof n?"base64"===e.encoding&&m?i.push(m(e.data)):"URI"===e.encoding?i.push(decodeURIComponent(e.data)):"raw"===e.encoding&&i.push(e.data):("string"!=typeof e&&(e+=""),i.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new n(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},a.slice=function(e,t,i){var o=arguments.length;return 3>o&&(i=null),new n(this.data.slice(e,o>1?t:this.data.length),i,this.encoding)},a.toString=function(){return"[object Blob]"},a.close=function(){this.size=0,delete this.data},i}(e);e.Blob=function(e,t){var n=t?t.type||"":"",o=new i;if(e)for(var a=0,s=e.length;s>a;a++)Uint8Array&&e[a]instanceof Uint8Array?o.append(e[a].buffer):o.append(e[a]);var r=o.getBlob(n);return!r.slice&&r.webkitSlice&&(r.slice=r.webkitSlice),r};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):e.MediumEditor=t}(this,function(){"use strict";function e(e,t){return this.init(e,t)}return e.extensions={},function(t){function i(e,t){var i,n=Array.prototype.slice.call(arguments,2);t=t||{};for(var o=0;o<n.length;o++){var a=n[o];if(a)for(i in a)a.hasOwnProperty(i)&&"undefined"!=typeof a[i]&&(e||t.hasOwnProperty(i)===!1)&&(t[i]=a[i])}return t}var n=!1;try{var o=document.createElement("div"),a=document.createTextNode(" ");o.appendChild(a),n=o.contains(a)}catch(s){}var r={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77},isMetaCtrlKey:function(e){return!!(r.isMac&&e.metaKey||!r.isMac&&e.ctrlKey)},isKey:function(e,t){var i=r.getKeyCode(e);return!1===Array.isArray(t)?i===t:-1!==t.indexOf(i)},getKeyCode:function(e){var t=e.which;return null===t&&(t=null!==e.charCode?e.charCode:e.keyCode),t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return i.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return i.apply(this,e)},createLink:function(e,t,i,n){var o=e.createElement("a");return r.moveTextRangeIntoElement(t[0],t[t.length-1],o),o.setAttribute("href",i),n&&o.setAttribute("target",n),o},findOrCreateMatchingTextNodes:function(e,t,i){for(var n=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),o=[],a=0,s=!1,l=null,c=null;null!==(l=n.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!s&&i.start<a+l.nodeValue.length&&(s=!0,c=r.splitStartNodeIfNeeded(l,i.start,a)),s&&r.splitEndNodeIfNeeded(l,c,i.end,a),s&&a===i.end)break;if(s&&a>i.end+1)throw new Error("PerformLinking overshot the target!");s&&o.push(c||l),a+=l.nodeValue.length,null!==c&&(a+=c.nodeValue.length,n.nextNode()),c=null}else"img"===l.tagName.toLowerCase()&&(!s&&i.start<=a&&(s=!0),s&&o.push(l));return o},splitStartNodeIfNeeded:function(e,t,i){return t!==i?e.splitText(t-i):null},splitEndNodeIfNeeded:function(e,t,i,n){var o,a;o=n+(t||e).nodeValue.length+(t?e.nodeValue.length:0)-1,a=(t||e).nodeValue.length-(o+1-i),o>=i&&n!==o&&0!==a&&(t||e).splitText(a)},splitByBlockElements:function(t){if(3!==t.nodeType&&1!==t.nodeType)return[];var i=[],n=e.util.blockContainerElementNames.join(",");if(3===t.nodeType||0===t.querySelectorAll(n).length)return[t];for(var o=0;o<t.childNodes.length;o++){var a=t.childNodes[o];if(3===a.nodeType)i.push(a);else if(1===a.nodeType){var s=a.querySelectorAll(n);0===s.length?i.push(a):i=i.concat(e.util.splitByBlockElements(a))}}return i},findAdjacentTextNodeWithContent:function(e,t,i){var n,o=!1,a=i.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(n=a.nextNode();n;){if(n===t)o=!0;else if(o&&3===n.nodeType&&n.nodeValue&&n.nodeValue.trim().length>0)break;n=a.nextNode()}return n},findPreviousSibling:function(e){if(!e||r.isMediumEditorElement(e))return!1;for(var t=e.previousSibling;!t&&!r.isMediumEditorElement(e.parentNode);)e=e.parentNode,t=e.previousSibling;return t},isDescendant:function(e,t,i){if(!e||!t)return!1;if(e===t)return!!i;if(1!==e.nodeType)return!1;if(n||3!==t.nodeType)return e.contains(t);for(var o=t.parentNode;null!==o;){if(o===e)return!0;o=o.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},throttle:function(e,t){var i,n,o,a=50,s=null,r=0,l=function(){r=Date.now(),s=null,o=e.apply(i,n),s||(i=n=null)};return t||0===t||(t=a),function(){var a=Date.now(),c=t-(a-r);return i=this,n=arguments,0>=c||c>t?(s&&(clearTimeout(s),s=null),r=a,o=e.apply(i,n),s||(i=n=null)):s||(s=setTimeout(l,c)),o}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(r.isMediumEditorElement(e))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,i){var n,o,a,s,l,c,d,u=!1,h=["insertHTML",!1,i];if(!e.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,h)}catch(p){}if(n=t.getSelection(),n.rangeCount){if(o=n.getRangeAt(0),d=o.commonAncestorContainer,r.isMediumEditorElement(d)&&!d.firstChild)o.selectNode(d.appendChild(t.createTextNode("")));else if(3===d.nodeType&&0===o.startOffset&&o.endOffset===d.nodeValue.length||3!==d.nodeType&&d.innerHTML===o.toString()){for(;!r.isMediumEditorElement(d)&&d.parentNode&&1===d.parentNode.childNodes.length&&!r.isMediumEditorElement(d.parentNode);)d=d.parentNode;o.selectNode(d)}for(o.deleteContents(),a=t.createElement("div"),a.innerHTML=i,s=t.createDocumentFragment();a.firstChild;)l=a.firstChild,c=s.appendChild(l);o.insertNode(s),c&&(o=o.cloneRange(),o.setStartAfter(c),o.collapse(!0),n.removeAllRanges(),n.addRange(o)),u=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(h,u),u},execFormatBlock:function(t,i){var n,o=r.getTopBlockContainer(e.selection.getSelectionStart(t));if("blockquote"===i){if(o&&(n=Array.prototype.slice.call(o.childNodes),n.some(function(e){return r.isBlockContainer(e)})))return t.execCommand("outdent",!1,null);if(r.isIE)return t.execCommand("indent",!1,i)}if(o&&i===o.nodeName.toLowerCase()&&(i="p"),r.isIE&&(i="<"+i+">"),o&&"blockquote"===o.nodeName.toLowerCase()){if(r.isIE&&"<p>"===i)return t.execCommand("outdent",!1,i);if((r.isFF||r.isEdge)&&"p"===i)return n=Array.prototype.slice.call(o.childNodes),n.some(function(e){return!r.isBlockContainer(e)})&&t.execCommand("formatBlock",!1,i),t.execCommand("outdent",!1,i)}return t.execCommand("formatBlock",!1,i)},setTargetBlank:function(e,t){var i,n=t||!1;if("a"===e.nodeName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),i=0;i<e.length;i+=1)(!1===n||n===e[i].attributes.href.value)&&(e[i].target="_blank")},removeTargetBlank:function(e,t){var i;if("a"===e.nodeName.toLowerCase())e.removeAttribute("target");else for(e=e.getElementsByTagName("a"),i=0;i<e.length;i+=1)t===e[i].attributes.href.value&&e[i].removeAttribute("target")},addClassToAnchors:function(e,t){var i,n,o=t.split(" ");if("a"===e.nodeName.toLowerCase())for(n=0;n<o.length;n+=1)e.classList.add(o[n]);else for(e=e.getElementsByTagName("a"),i=0;i<e.length;i+=1)for(n=0;n<o.length;n+=1)e[i].classList.add(o[n])},isListItem:function(e){if(!e)return!1;if("li"===e.nodeName.toLowerCase())return!0;for(var t=e.parentNode,i=t.nodeName.toLowerCase();"li"===i||!r.isBlockContainer(t)&&"div"!==i;){if("li"===i)return!0;if(t=t.parentNode,!t)return!1;i=t.nodeName.toLowerCase()}return!1},cleanListDOM:function(t,i){if("li"===i.nodeName.toLowerCase()){var n=i.parentElement;"p"===n.parentElement.nodeName.toLowerCase()&&(r.unwrap(n.parentElement,t),e.selection.moveCursor(t,i.firstChild,i.firstChild.textContent.length))}},splitOffDOMTree:function(e,t,i){for(var n=t,o=null,a=!i;n!==e;){var s,r=n.parentNode,l=r.cloneNode(!1),c=a?n:r.firstChild;for(o&&(a?l.appendChild(o):s=o),o=l;c;){var d=c.nextSibling;c===n?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),c=a?d:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),c=d)}s&&o.appendChild(s),n=r}return o},moveTextRangeIntoElement:function(e,t,i){if(!e||!t)return!1;var n=r.findCommonRoot(e,t);if(!n)return!1;if(t===e){var o=e.parentNode,a=e.nextSibling;return o.removeChild(e),i.appendChild(e),a?o.insertBefore(i,a):o.appendChild(i),i.hasChildNodes()}for(var s,l,c,d=[],u=0;u<n.childNodes.length;u++)if(c=n.childNodes[u],s){if(r.isDescendant(c,t,!0)){l=c;break}d.push(c)}else r.isDescendant(c,e,!0)&&(s=c);var h=l.nextSibling,p=n.ownerDocument.createDocumentFragment();return s===e?(s.parentNode.removeChild(s),p.appendChild(s)):p.appendChild(r.splitOffDOMTree(s,e)),d.forEach(function(e){e.parentNode.removeChild(e),p.appendChild(e)}),l===t?(l.parentNode.removeChild(l),p.appendChild(l)):p.appendChild(r.splitOffDOMTree(l,t,!0)),i.appendChild(p),l.parentNode===n?n.insertBefore(i,l):h?n.insertBefore(i,h):n.appendChild(i),i.hasChildNodes()},depthOfNode:function(e){for(var t=0,i=e;null!==i.parentNode;)i=i.parentNode,t++;return t},findCommonRoot:function(e,t){for(var i=r.depthOfNode(e),n=r.depthOfNode(t),o=e,a=t;i!==n;)i>n?(o=o.parentNode,i-=1):(a=a.parentNode,n-=1);for(;o!==a;)o=o.parentNode,a=a.parentNode;return o},isElementAtBeginningOfBlock:function(e){for(var t,i;!r.isBlockContainer(e)&&!r.isMediumEditorElement(e);){for(i=e;i=i.previousSibling;)if(t=3===i.nodeType?i.nodeValue:i.textContent,t.length>0)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&e.getAttribute&&!!e.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(e){return r.traverseUp(e,function(e){return r.isMediumEditorElement(e)})},isBlockContainer:function(e){return e&&3!==e.nodeType&&-1!==r.blockContainerElementNames.indexOf(e.nodeName.toLowerCase())},getClosestBlockContainer:function(e){return r.traverseUp(e,function(e){return r.isBlockContainer(e)||r.isMediumEditorElement(e)})},getTopBlockContainer:function(e){var t=!!r.isBlockContainer(e)&&e;return r.traverseUp(e,function(e){return r.isBlockContainer(e)&&(t=e),!(t||!r.isMediumEditorElement(e))&&(t=e,!0)}),t},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;if(e=r.traverseUp(e,function(e){return-1===r.emptyElementNames.indexOf(e.nodeName.toLowerCase())}),"table"===e.nodeName.toLowerCase()){var t=e.querySelector("th, td");t&&(e=t)}return e},getFirstTextNode:function(e){return r.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),r._getFirstTextNode(e)},_getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var i=r._getFirstTextNode(e.childNodes[t]);if(null!==i)return i}return null},ensureUrlHasProtocol:function(e){return-1===e.indexOf("://")?"http://"+e:e},warn:function(){void 0!==t.console&&"function"==typeof t.console.warn&&t.console.warn.apply(t.console,arguments)},deprecated:function(e,t,i){var n=e+" is deprecated, please use "+t+" instead.";i&&(n+=" Will be removed in "+i),r.warn(n)},deprecatedMethod:function(e,t,i,n){r.deprecated(e,t,n),"function"==typeof this[t]&&this[t].apply(this,i)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.forEach(function(t){e.nodeName.toLowerCase()===t&&e.parentNode.removeChild(e)})},getClosestTag:function(e,t){return r.traverseUp(e,function(e){return e.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var i=t.createDocumentFragment(),n=Array.prototype.slice.call(e.childNodes),o=0;o<n.length;o++)i.appendChild(n[o]);i.childNodes.length?e.parentNode.replaceChild(i,e):e.parentNode.removeChild(e)}};e.util=r}(window),function(){var t=function(t){e.util.extend(this,t)};t.extend=function(t){var i,n=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},e.util.extend(i,n);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,t&&e.util.extend(i.prototype,t),i},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){t.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(t){return e.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var i={findMatchingSelectionParent:function(t,i){var n,o,a=i.getSelection();return 0!==a.rangeCount&&(n=a.getRangeAt(0),o=n.commonAncestorContainer,e.util.traverseUp(o,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return e.util.isMediumEditorElement(t)},t)},exportSelection:function(e,t){if(!e)return null;var i=null,n=t.getSelection();if(n.rangeCount>0){var o,a=n.getRangeAt(0),s=a.cloneRange();s.selectNodeContents(e),s.setEnd(a.startContainer,a.startOffset),o=s.toString().length,i={start:o,end:o+a.toString().length},this.doesRangeStartWithImages(a,t)&&(i.startsWithImage=!0);var r=this.getTrailingImageCount(e,i,a.endContainer,a.endOffset);if(r&&(i.trailingImageCount=r),0!==o){var l=this.getIndexRelativeToAdjacentEmptyBlocks(t,e,a.startContainer,a.startOffset);-1!==l&&(i.emptyBlocksIndex=l)}}return i},importSelection:function(e,t,i,n){if(e&&t){var o=i.createRange();o.setStart(t,0),o.collapse(!0);var a,s=t,r=[],l=0,c=!1,d=!1,u=0,h=!1,p=!1,f=null;for((n||e.startsWithImage||"undefined"!=typeof e.emptyBlocksIndex)&&(p=!0);!h&&s;)if(s.nodeType>3)s=r.pop();else{if(3!==s.nodeType||d){if(e.trailingImageCount&&d&&("img"===s.nodeName.toLowerCase()&&u++,u===e.trailingImageCount)){for(var m=0;s.parentNode.childNodes[m]!==s;)m++;o.setEnd(s.parentNode,m+1),h=!0}if(!h&&1===s.nodeType)for(var g=s.childNodes.length-1;g>=0;)r.push(s.childNodes[g]),g-=1}else a=l+s.length,!c&&e.start>=l&&e.start<=a&&(p||e.start<a?(o.setStart(s,e.start-l),c=!0):f=s),c&&e.end>=l&&e.end<=a&&(e.trailingImageCount?d=!0:(o.setEnd(s,e.end-l),h=!0)),l=a;h||(s=r.pop())}!c&&f&&(o.setStart(f,f.length),o.setEnd(f,f.length)),"undefined"!=typeof e.emptyBlocksIndex&&(o=this.importSelectionMoveCursorPastBlocks(i,t,e.emptyBlocksIndex,o)),n&&(o=this.importSelectionMoveCursorPastAnchor(e,o));var v=i.getSelection();v.removeAllRanges(),v.addRange(o)}},importSelectionMoveCursorPastAnchor:function(t,i){var n=function(e){return"a"===e.nodeName.toLowerCase()};if(t.start===t.end&&3===i.startContainer.nodeType&&i.startOffset===i.startContainer.nodeValue.length&&e.util.traverseUp(i.startContainer,n)){for(var o=i.startContainer,a=i.startContainer.parentNode;null!==a&&"a"!==a.nodeName.toLowerCase();)a.childNodes[a.childNodes.length-1]!==o?a=null:(o=a,a=a.parentNode);if(null!==a&&"a"===a.nodeName.toLowerCase()){for(var s=null,r=0;null===s&&r<a.parentNode.childNodes.length;r++)a.parentNode.childNodes[r]===a&&(s=r);i.setStart(a.parentNode,s+1),i.collapse(!0)}}return i},importSelectionMoveCursorPastBlocks:function(i,n,o,a){var s,r,l=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,t,!1),c=a.startContainer,d=0;for(o=o||1,s=3===c.nodeType&&e.util.isBlockContainer(c.previousSibling)?c.previousSibling:e.util.getClosestBlockContainer(c);l.nextNode();)if(r){if(r=l.currentNode,d++,d===o)break;if(r.textContent.length>0)break}else s===l.currentNode&&(r=l.currentNode);return r||(r=s),a.setStart(e.util.getFirstSelectableLeafNode(r),0),a},getIndexRelativeToAdjacentEmptyBlocks:function(i,n,o,a){if(o.textContent.length>0&&a>0)return-1;var s=o;if(3!==s.nodeType&&(s=o.childNodes[a]),s){if(!e.util.isElementAtBeginningOfBlock(s))return-1;var r=e.util.findPreviousSibling(s);if(!r)return-1;if(r.nodeValue)return-1}for(var l=e.util.getClosestBlockContainer(o),c=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,t,!1),d=0;c.nextNode();){var u=""===c.currentNode.textContent;if((u||d>0)&&(d+=1),c.currentNode===l)return d;u||(d=0)}return d},doesRangeStartWithImages:function(e,t){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"===e.startContainer.nodeName.toLowerCase())return!0;var i=e.startContainer.querySelector("img");if(!i)return!1;for(var n=t.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);n.nextNode();){var o=n.currentNode;if(o===i)break;if(o.nodeValue)return!1}return!0},getTrailingImageCount:function(e,t,i,n){if(0===n||1!==i.nodeType)return 0;if("img"!==i.nodeName.toLowerCase()&&!i.querySelector("img"))return 0;for(var o=i.childNodes[n-1];o.hasChildNodes();)o=o.lastChild;for(var a,s=e,r=[],l=0,c=!1,d=!1,u=!1,h=0;!u&&s;)if(s.nodeType>3)s=r.pop();else{if(3!==s.nodeType||d){if("img"===s.nodeName.toLowerCase()&&h++,s===o)u=!0;else if(1===s.nodeType)for(var p=s.childNodes.length-1;p>=0;)r.push(s.childNodes[p]),p-=1}else h=0,a=l+s.length,!c&&t.start>=l&&t.start<=a&&(c=!0),c&&t.end>=l&&t.end<=a&&(d=!0),l=a;u||(s=r.pop())}return h},selectionContainsContent:function(e){var t=e.getSelection();if(!t||t.isCollapsed||!t.rangeCount)return!1;if(""!==t.toString().trim())return!0;var i=this.getSelectedParentElement(t.getRangeAt(0));return!(!i||!("img"===i.nodeName.toLowerCase()||1===i.nodeType&&i.querySelector("img")))},selectionInContentEditableFalse:function(e){var t,i=this.findMatchingSelectionParent(function(e){var i=e&&e.getAttribute("contenteditable");return"true"===i&&(t=!0),"#text"!==e.nodeName&&"false"===i},e);return!t&&i},getSelectionHtml:function(e){var t,i,n,o="",a=e.getSelection();if(a.rangeCount){for(n=e.createElement("div"),t=0,i=a.rangeCount;i>t;t+=1)n.appendChild(a.getRangeAt(t).cloneContents());o=n.innerHTML}return o},getCaretOffsets:function(e,t){var i,n;return t||(t=window.getSelection().getRangeAt(0)),i=t.cloneRange(),n=t.cloneRange(),i.selectNodeContents(e),i.setEnd(t.endContainer,t.endOffset),n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),{left:i.toString().length,right:n.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,i,n,o=e.getSelection();if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(t=o.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(i=[],n=t.commonAncestorContainer;n.parentNode&&1===n.parentNode.childNodes.length;)i.push(n.parentNode),n=n.parentNode;return i}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"!=typeof o.containsNode||o.containsNode(e,!0)})},selectNode:function(e,t){var i=t.createRange(),n=t.getSelection();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i)},select:function(e,t,i,n,o){e.getSelection().removeAllRanges();var a=e.createRange();return a.setStart(t,i),n?a.setEnd(n,o):a.collapse(!0),e.getSelection().addRange(a),a},clearSelection:function(e,t){t?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,t,i){this.select(e,t,i)},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,i=t&&3===t.nodeType?t.parentNode:t;return i}};e.selection=i}(),function(){var t=function(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};t.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(e,t,i,n){e.addEventListener(t,i,n),this.events.push([e,t,i,n])},detachDOMEvent:function(e,t,i,n){var o,a=this.indexOfListener(e,t,i,n);-1!==a&&(o=this.events.splice(a,1)[0],
o[0].removeEventListener(o[1],o[2],o[3]))},indexOfListener:function(e,t,i,n){var o,a,s;for(o=0,a=this.events.length;a>o;o+=1)if(s=this.events[o],s[0]===e&&s[1]===t&&s[2]===i&&s[3]===n)return o;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){var i=this.indexOfCustomListener(e,t);-1!==i&&this.customEvents[e].splice(i,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,i){this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(e){e(t,i)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var t=e.execCommand.listeners.indexOf(this.execCommandListener);-1!==t&&e.execCommand.listeners.splice(t,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var t=function(t,i){e.execCommand.listeners&&e.execCommand.listeners.forEach(function(e){e({command:t[0],value:t[2],args:t,result:i})})},i=function(){var i=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return i;var n=Array.prototype.slice.call(arguments);return t(n,i),i};i.orig=e.execCommand,i.listeners=[],i.callListeners=t,e.execCommand=i}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache=[],this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML,this.InputEventOnContenteditableSupported&&this.attachDOMEvent(e,"input",this.handleInput.bind(this))}.bind(this)),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(e,t){this.base.elements.forEach(function(i){this.attachDOMEvent(i,e,t.bind(this))},this)},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(t,i){var n,o=this.base.getExtensionByName("toolbar"),a=o?o.getToolbarElement():null,s=this.base.getExtensionByName("anchor-preview"),r=s&&s.getPreviewElement?s.getPreviewElement():null,l=this.base.getFocusedElement();l&&"click"===i.type&&this.lastMousedownTarget&&(e.util.isDescendant(l,this.lastMousedownTarget,!0)||e.util.isDescendant(a,this.lastMousedownTarget,!0)||e.util.isDescendant(r,this.lastMousedownTarget,!0))&&(n=l),n||this.base.elements.some(function(i){return!n&&e.util.isDescendant(i,t,!0)&&(n=i),!!n},this);var c=!e.util.isDescendant(l,t,!0)&&!e.util.isDescendant(a,t,!0)&&!e.util.isDescendant(r,t,!0);n!==l&&(l&&c&&(l.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,l)),n&&(n.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,n))),c&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(e,t){if(this.contentCache){var i=e.getAttribute("medium-editor-index");e.innerHTML!==this.contentCache[i]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[i]=e.innerHTML}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var i,n=t.currentTarget.activeElement;this.base.elements.some(function(t){return!!e.util.isDescendant(t,n,!0)&&(i=t,!0)},this),i&&this.updateInput(i,{target:n,currentTarget:i})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var t={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(t){return this.triggerCustomEvent("editableKeydown",t,t.currentTarget),e.util.isKey(t,e.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.ENTER)||t.ctrlKey&&e.util.isKey(t,e.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget):e.util.isKey(t,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget):void 0}},e.Events=t}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(i){t.isBuiltInButton(i)?e.Extension.call(this,this.defaults[i]):e.Extension.call(this,i)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,i=this.getAria(),n=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(t){e.classList.add(t)}),e.setAttribute("data-action",this.getAction()),i&&(e.setAttribute("title",i),e.setAttribute("aria-label",i)),this.attrs&&Object.keys(this.attrs).forEach(function(t){e.setAttribute(t,this.attrs[t])},this),"fontawesome"===n&&this.contentFA&&(t=this.contentFA),e.innerHTML=t,e},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,i,n=!1,o=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(n=-1!==o.indexOf(e.nodeName.toLowerCase())),!n&&this.style&&(t=this.style.value.split("|"),i=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),t.forEach(function(e){this.knownState||(n=-1!==i.indexOf(e),(n||"text-decoration"!==this.style.prop)&&(this.knownState=n))},this)),n)}});t.isBuiltInButton=function(t){return"string"==typeof t&&e.extensions.button.prototype.defaults.hasOwnProperty(t)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var i=e.selection.getSelectionRange(this.document);return"a"===i.startContainer.nodeName.toLowerCase()||"a"===i.endContainer.nodeName.toLowerCase()||e.util.getClosestTag(e.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){e.util.isKey(t,e.util.keyCode.K)&&e.util.isMetaCtrlKey(t)&&!t.shiftKey&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(t){var i=this.getInput(),n=this.getAnchorTargetCheckbox(),o=this.getAnchorButtonCheckbox();if(t=t||{url:""},"string"==typeof t&&(t={url:t}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=t.url,i.focus(),n&&(n.checked="_blank"===t.target),o){var a=t.buttonClass?t.buttonClass.split(" "):[];o.checked=-1!==a.indexOf(this.customClassOption)}},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),i={url:this.getInput().value.trim()};return this.linkValidation&&(i.url=this.checkLinkFormat(i.url)),i.target="_self",e&&e.checked&&(i.target="_blank"),t&&t.checked&&(i.buttonClass=this.customClassOption),i},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):/i,i=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/;return i.test(e)?"tel:"+e:(t.test(e)?"":"http://")+e},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),i=e.querySelector(".medium-editor-toolbar-save"),n=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(n,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(i,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(t){return t.keyCode===e.util.keyCode.ENTER?(t.preventDefault(),void this.doFormSave()):void(t.keyCode===e.util.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!e.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t,i,n=this.anchorPreview.offsetHeight,o=e.getBoundingClientRect(),a=(o.left+o.right)/2,s=this.diffLeft,r=this.diffTop;t=this.anchorPreview.offsetWidth/2;var l=this.base.getExtensionByName("toolbar");l&&(s=l.diffLeft,r=l.diffTop),i=s-t,this.anchorPreview.style.top=Math.round(n+o.bottom-r+this.window.pageYOffset-this.anchorPreview.offsetHeight)+"px",this.anchorPreview.style.right="initial",t>a?(this.anchorPreview.style.left=i+t+"px",this.anchorPreview.style.right="initial"):this.window.innerWidth-a<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=i+a+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this))},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),i=this.activeAnchor;t&&i&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(i){var e={url:i.attributes.href.value,target:i.getAttribute("target"),buttonClass:i.getAttribute("class")};t.showForm(e),i=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var i=e.util.getClosestTag(t.target,"a");if(!1!==i){if(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML))return!0;var n=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&n&&n.isDisplayed&&n.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){function t(t){return!e.util.getClosestTag(t,"a")}var i,n,o,a;i=[" ","\t","\n","\r"," "," "," "," "," ","\u2028","\u2029"],n="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",o="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+n+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+n+"))",a=new RegExp("^("+n+")$","i");var s=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var e=0,t=0;t<this.window._mediumEditors.length;t++){var i=this.window._mediumEditors[t];null!==i&&void 0!==i.getExtensionByName("autoLink")&&e++}return 1===e},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||e.util.isKey(t,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(i){window.console&&window.console.error("Failed to perform linking",i),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var i=e.util.splitByBlockElements(t),n=!1;0===i.length&&(i=[t]);for(var o=0;o<i.length;o++)n=this.removeObsoleteAutoLinkSpans(i[o])||n,n=this.performLinkingWithinElement(i[o])||n;return this.base.events.updateInput(t,{target:t,currentTarget:t}),n},removeObsoleteAutoLinkSpans:function(i){if(!i||3===i.nodeType)return!1;for(var n=i.querySelectorAll('span[data-auto-link="true"]'),o=!1,a=0;a<n.length;a++){var s=n[a].textContent;if(-1===s.indexOf("://")&&(s=e.util.ensureUrlHasProtocol(s)),n[a].getAttribute("data-href")!==s&&t(n[a])){o=!0;var r=s.replace(/\s+$/,"");if(n[a].getAttribute("data-href")===r){var l=s.length-r.length,c=e.util.splitOffDOMTree(n[a],this.splitTextBeforeEnd(n[a],l));n[a].parentNode.insertBefore(c,n[a].nextSibling)}else e.util.unwrap(n[a],this.document)}}return o},splitTextBeforeEnd:function(e,t){for(var i=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),n=!0;n;)n=null!==i.lastChild();for(var o,a,s;t>0&&null!==s;)o=i.currentNode,a=o.nodeValue,a.length>t?(s=o.splitText(a.length-t),t=0):(s=i.previousNode(),t-=a.length);return s},performLinkingWithinElement:function(t){for(var i=this.findLinkableText(t),n=!1,o=0;o<i.length;o++){var a=e.util.findOrCreateMatchingTextNodes(this.document,t,i[o]);this.shouldNotLink(a)||this.createAutoLink(a,i[o].href)}return n},shouldNotLink:function(t){for(var i=!1,n=0;n<t.length&&i===!1;n++)i=!!e.util.traverseUp(t[n],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return i},findLinkableText:function(e){for(var t=new RegExp(o,"gi"),n=e.textContent,s=null,r=[];null!==(s=t.exec(n));){var l=!0,c=s.index+s[0].length;l=!(0!==s.index&&-1===i.indexOf(n[s.index-1])||c!==n.length&&-1===i.indexOf(n[c])),l=l&&(-1!==s[0].indexOf("/")||a.test(s[0].split(".").pop().split("?").shift())),l&&r.push({href:s[0],start:s.index,end:c})}return r},createAutoLink:function(t,i){i=e.util.ensureUrlHasProtocol(i);var n=e.util.createLink(this.document,t,i,this.getEditorOption("targetBlank")?"_blank":null),o=this.document.createElement("span");for(o.setAttribute("data-auto-link","true"),o.setAttribute("data-href",i),n.insertBefore(o,n.firstChild);n.childNodes.length>1;)o.appendChild(n.childNodes[1])}});e.extensions.autoLink=s}(),function(){function t(t){var n=e.util.getContainerEditorElement(t),o=Array.prototype.slice.call(n.parentElement.querySelectorAll("."+i));o.forEach(function(e){e.classList.remove(i)})}var i="medium-editor-dragover",n=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var n=e.target.classList?e.target:e.target.parentElement;t(n),"dragover"===e.type&&n.classList.add(i)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var i=this.base.exportSelection();i.start=i.end,this.base.importSelection(i),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files).forEach(function(e){this.isAllowedFile(e)&&e.type.match("image")&&this.insertImageFile(e)},this),t(e.target)},isAllowedFile:function(e){return this.allowedTypes.some(function(t){return!!e.type.match(t)})},insertImageFile:function(t){if("function"==typeof FileReader){var i=new FileReader;i.readAsDataURL(t),i.addEventListener("load",function(t){var i=this.document.createElement("img");i.src=t.target.result,e.util.insertHTMLCommand(this.document,i.outerHTML)}.bind(this))}}});e.extensions.fileDragging=n}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(t){var i=e.util.getKeyCode(t);if(this.keys[i]){
var n=e.util.isMetaCtrlKey(t),o=!!t.shiftKey,a=!!t.altKey;this.keys[i].forEach(function(e){e.meta!==n||e.shift!==o||e.alt!==a&&void 0!==e.alt||(t.preventDefault(),t.stopPropagation(),!1!==e.command&&this.execAction(e.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e,t=this.document,i=t.createElement("div"),n=t.createElement("select"),o=t.createElement("a"),a=t.createElement("a");i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var s=0;s<this.fonts.length;s++)e=t.createElement("option"),e.innerHTML=this.fonts[s],e.value=this.fonts[s],n.appendChild(e);return n.className="medium-editor-toolbar-select",i.appendChild(n),this.on(n,"change",this.handleFontChange.bind(this)),a.setAttribute("href","#"),a.className="medium-editor-toobar-save",a.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(a),this.on(a,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",i.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;""===e?this.clearFontName():this.execAction("fontName",{name:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),i=e.createElement("input"),n=e.createElement("a"),o=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),i.setAttribute("type","range"),i.setAttribute("min","1"),i.setAttribute("max","7"),i.className="medium-editor-toolbar-input",t.appendChild(i),this.on(i,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),n.setAttribute("href","#"),n.className="medium-editor-toobar-close",n.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(n),this.on(n,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{size:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){function t(){return[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],["<!--EndFragment-->",""],["<!--StartFragment-->",""]]}var i=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&this.subscribe("editablePaste",this.handlePaste.bind(this))},handlePaste:function(t,i){var n,o,a,s,r="",l="text/html",c="text/plain";if(this.window.clipboardData&&void 0===t.clipboardData&&(t.clipboardData=this.window.clipboardData,l="Text",c="Text"),t.clipboardData&&t.clipboardData.getData&&!t.defaultPrevented){if(t.preventDefault(),a=t.clipboardData.getData(l),s=t.clipboardData.getData(c),this.cleanPastedHTML&&a)return this.cleanPaste(a);if(this.getEditorOption("disableReturn")||i.getAttribute("data-disable-return"))r=e.util.htmlEntities(s);else if(n=s.split(/[\r\n]+/g),n.length>1)for(o=0;o<n.length;o+=1)""!==n[o]&&(r+="<p>"+e.util.htmlEntities(n[o])+"</p>");else r=e.util.htmlEntities(n[0]);e.util.insertHTMLCommand(this.document,r)}},cleanPaste:function(e){var i,n,o,a,s=/<p|<br|<div/.test(e),r=[].concat(this.preCleanReplacements||[],t(),this.cleanReplacements||[]);for(i=0;i<r.length;i+=1)e=e.replace(r[i][0],r[i][1]);if(!s)return this.pasteHTML(e);for(o=this.document.createElement("div"),o.innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>",n=o.querySelectorAll("a,p,div,br"),i=0;i<n.length;i+=1)switch(a=n[i],a.innerHTML=a.innerHTML.replace(/\n/gi," "),a.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(a);break;case"br":this.filterLineBreak(a)}this.pasteHTML(o.innerHTML)},pasteHTML:function(t,i){i=e.util.defaults({},i,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var n,o,a,s,r=this.document.createDocumentFragment();for(r.appendChild(this.document.createElement("body")),s=r.querySelector("body"),s.innerHTML=t,this.cleanupSpans(s),n=s.querySelectorAll("*"),a=0;a<n.length;a+=1)o=n[a],"a"===o.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(o),e.util.cleanupAttrs(o,i.cleanAttrs),e.util.cleanupTags(o,i.cleanTags);e.util.insertHTMLCommand(this.document,s.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(t){var i,n,o,a=t.querySelectorAll(".replace-with"),s=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(i=0;i<a.length;i+=1)n=a[i],o=this.document.createElement(n.classList.contains("bold")?"b":"i"),n.classList.contains("bold")&&n.classList.contains("italic")?o.innerHTML="<i>"+n.innerHTML+"</i>":o.innerHTML=n.innerHTML,n.parentNode.replaceChild(o,n);for(a=t.querySelectorAll("span"),i=0;i<a.length;i+=1){if(n=a[i],e.util.traverseUp(n,s))return!1;e.util.unwrap(n,this.document)}}});e.extensions.paste=i}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},this)},destroy:function(){this.getEditorElements().forEach(function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},this)},showPlaceholder:function(e){e&&e.classList.add("medium-editor-placeholder")},hidePlaceholder:function(e){e&&e.classList.remove("medium-editor-placeholder")},updatePlaceholder:function(e,t){return e.querySelector("img, blockquote, ul, ol")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(e):void(t||this.showPlaceholder(e))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this))},handleInput:function(e,t){var i=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,i)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,"static":!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(e,t){return this.base.extensions.forEach(function(i){return i!==this?e.apply(t||this,arguments):void 0},this)},createToolbar:function(){var e=this.document.createElement("div");return e.id="medium-editor-toolbar-"+this.getEditorId(),e.className="medium-editor-toolbar",this["static"]?e.className+=" static-toolbar":this.relativeContainer?e.className+=" medium-editor-relative-toolbar":e.className+=" medium-editor-stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var t,i,n,o,a,s,r=this.document.createElement("ul");return r.id="medium-editor-toolbar-actions"+this.getEditorId(),r.className="medium-editor-toolbar-actions",r.style.display="block",this.buttons.forEach(function(n){"string"==typeof n?(a=n,s=null):(a=n.name,s=n),o=this.base.addBuiltInExtension(a,s),o&&"function"==typeof o.getButton&&(i=o.getButton(this.base),t=this.document.createElement("li"),e.util.isElement(i)?t.appendChild(i):t.innerHTML=i,r.appendChild(t))},this),n=r.querySelectorAll("button"),n.length>0&&(n[0].classList.add(this.firstButtonClass),n[n.length-1].classList.add(this.lastButtonClass)),r},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this["static"]&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){return!(t&&t.target&&e.util.isDescendant(this.getToolbarElement(),t.target))&&void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var t=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),n=e.selection.getSelectionHtml(this.document).replace(t,""),o=n.match(i);return!!o&&o.length>1},modifySelection:function(){var t=this.window.getSelection(),i=t.getRangeAt(0);if(this.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var n=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),i.startContainer,this.document);if(n){for(var o=0;0===n.nodeValue.substr(o,1).trim().length;)o+=1;i=e.selection.select(this.document,n,o,i.endContainer,i.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var t=e.selection.getSelectionElement(this.window);return!t||-1===this.getEditorElements().indexOf(t)||t.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this["static"]?this.showAndUpdateToolbar():!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var t,i=[],n=null,o=e.selection.getSelectionRange(this.document),a=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(o&&(this.forEachExtension(function(e){return"function"==typeof e.queryCommandState&&(n=e.queryCommandState(),null!==n)?void(n&&"function"==typeof e.setActive&&e.setActive()):void i.push(e)}),t=e.selection.getSelectedParentElement(o),this.getEditorElements().some(function(i){return e.util.isDescendant(i,t,!0)})))for(;t&&(i.forEach(a),!e.util.isMediumEditorElement(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e,t=this.base.getFocusedElement(),i=this.window.getSelection();return t?(this["static"]&&!this.relativeContainer?(this.showToolbar(),this.positionStaticToolbar(t)):i.isCollapsed||(this.showToolbar(),this.relativeContainer||this.positionToolbar(i)),e=this.base.getExtensionByName("anchor-preview"),void(e&&"function"==typeof e.hidePreview&&e.hidePreview())):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,n=this.window.innerWidth,o=this.getToolbarElement(),a=e.getBoundingClientRect(),s=a.top+i,r=a.left+a.width/2,l=o.offsetHeight,c=o.offsetWidth,d=c/2;switch(this.sticky?i>s+e.offsetHeight-l-this.stickyTopOffset?(o.style.top=s+e.offsetHeight-l+"px",o.classList.remove("medium-editor-sticky-toolbar")):i>s-l-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=s-l+"px"):o.style.top=s-l+"px",this.align){case"left":t=a.left;break;case"right":t=a.right-c;break;case"center":t=r-d}0>t?t=0:t+c>n&&(t=n-Math.ceil(c)-1),o.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t=e.getRangeAt(0),i=t.getBoundingClientRect();(!i||0===i.height&&0===i.width&&t.startContainer===t.endContainer)&&(i=1===t.startContainer.nodeType&&t.startContainer.querySelector("img")?t.startContainer.querySelector("img").getBoundingClientRect():t.startContainer.getBoundingClientRect());var n=this.window.innerWidth,o=(i.left+i.right)/2,a=this.getToolbarElement(),s=a.offsetHeight,r=a.offsetWidth,l=r/2,c=50,d=this.diffLeft-l;i.top<c?(a.classList.add("medium-toolbar-arrow-over"),a.classList.remove("medium-toolbar-arrow-under"),a.style.top=c+i.bottom-this.diffTop+this.window.pageYOffset-s+"px"):(a.classList.add("medium-toolbar-arrow-under"),a.classList.remove("medium-toolbar-arrow-over"),a.style.top=i.top+this.diffTop+this.window.pageYOffset-s+"px"),l>o?(a.style.left=d+l+"px",a.style.right="initial"):l>n-o?(a.style.left="auto",a.style.right=0):(a.style.left=d+o+"px",a.style.right="initial")}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)},handleDrop:function(t){var i,n="medium-editor-dragover";t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&(i=Array.prototype.slice.call(t.dataTransfer.files,0),i.some(function(t){if(t.type.match("image")){var i,n;i=new FileReader,i.readAsDataURL(t),n="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+n+'" />'),i.onload=function(){var e=this.document.getElementById(n);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=i.result)}.bind(this)}}.bind(this))),t.target.classList.remove(n)}});e.extensions.imageDragging=t}(),function(){function t(t){var i=e.selection.getSelectionStart(this.options.ownerDocument),n=i.textContent,o=e.selection.getCaretOffsets(i);(void 0===n[o.left-1]||""===n[o.left-1].trim()||void 0!==n[o.left]&&""===n[o.left].trim())&&t.preventDefault()}function i(t,i){if(this.options.disableReturn||i.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||i.getAttribute("data-disable-double-return")){var n=e.selection.getSelectionStart(this.options.ownerDocument);(n&&""===n.textContent.trim()&&"li"!==n.nodeName.toLowerCase()||n.previousElementSibling&&"br"!==n.previousElementSibling.nodeName.toLowerCase()&&""===n.previousElementSibling.textContent.trim())&&t.preventDefault()}}function n(t){var i=e.selection.getSelectionStart(this.options.ownerDocument),n=i&&i.nodeName.toLowerCase();"pre"===n&&(t.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(i)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(t){var i,n=e.selection.getSelectionStart(this.options.ownerDocument),o=n.nodeName.toLowerCase(),a=/^(\s+|<br\/?>)?$/i,s=/h\d/i;e.util.isKey(t,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&n.previousElementSibling&&s.test(o)&&0===e.selection.getCaretOffsets(n).left?e.util.isKey(t,e.util.keyCode.BACKSPACE)&&a.test(n.previousElementSibling.innerHTML)?(n.previousElementSibling.parentNode.removeChild(n.previousElementSibling),t.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(t,e.util.keyCode.ENTER)&&(i=this.options.ownerDocument.createElement("p"),i.innerHTML="<br>",n.previousElementSibling.parentNode.insertBefore(i,n),t.preventDefault()):e.util.isKey(t,e.util.keyCode.DELETE)&&n.nextElementSibling&&n.previousElementSibling&&!s.test(o)&&a.test(n.innerHTML)&&s.test(n.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,n.nextElementSibling),n.previousElementSibling.parentNode.removeChild(n),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&"li"===o&&a.test(n.innerHTML)&&!n.previousElementSibling&&!n.parentElement.previousElementSibling&&n.nextElementSibling&&"li"===n.nextElementSibling.nodeName.toLowerCase()?(i=this.options.ownerDocument.createElement("p"),i.innerHTML="<br>",n.parentElement.parentElement.insertBefore(i,n.parentElement),e.selection.moveCursor(this.options.ownerDocument,i),n.parentElement.removeChild(n),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(n,"blockquote")!==!1&&0===e.selection.getCaretOffsets(n).left&&(t.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p"))}function a(t){var i,n=e.selection.getSelectionStart(this.options.ownerDocument);n&&(e.util.isMediumEditorElement(n)&&0===n.children.length&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!e.util.isKey(t,e.util.keyCode.ENTER)||e.util.isListItem(n)||e.util.isBlockContainer(n)||(i=n.nodeName.toLowerCase(),"a"===i?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||t.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(e){e._mediumEditors||(e._mediumEditors=[null]),this.id||(this.id=e._mediumEditors.length),e._mediumEditors[this.id]=this}function r(e){e._mediumEditors&&e._mediumEditors[this.id]&&(e._mediumEditors[this.id]=null)}function l(t){t||(t=[]),"string"==typeof t&&(t=this.options.ownerDocument.querySelectorAll(t)),e.util.isElement(t)&&(t=[t]);var i=Array.prototype.slice.apply(t);this.elements=[],i.forEach(function(e,t){"textarea"===e.nodeName.toLowerCase()?this.elements.push(y.call(this,e,t)):this.elements.push(e)},this)}function c(e,t){return Object.keys(t).forEach(function(i){void 0===e[i]&&(e[i]=t[i])}),e}function d(e,t,i){var n={window:i.options.contentWindow,document:i.options.ownerDocument,base:i};return e=c(e,n),"function"==typeof e.init&&e.init(),e.name||(e.name=t),e}function u(){return!this.elements.every(function(e){return!!e.getAttribute("data-disable-toolbar")})&&this.options.toolbar!==!1}function h(){return!!u.call(this)&&this.options.anchorPreview!==!1}function p(){return this.options.placeholder!==!1}function f(){return this.options.autoLink!==!1}function m(){return this.options.imageDragging!==!1}function g(){return this.options.keyboardCommands!==!1}function v(){return!this.options.extensions.imageDragging}function y(e,t){for(var i=this.options.ownerDocument.createElement("div"),n=Date.now(),o="medium-editor-"+n+"-"+t,a=e.attributes;this.options.ownerDocument.getElementById(o);)n++,o="medium-editor-"+n+"-"+t;i.className=e.className,i.id=o,i.innerHTML=e.value,e.setAttribute("medium-editor-textarea-id",o);for(var s=0,r=a.length;r>s;s++)i.hasAttribute(a[s].nodeName)||i.setAttribute(a[s].nodeName,a[s].nodeValue);return e.classList.add("medium-editor-hidden"),e.parentNode.insertBefore(i,e),i}function b(){var e=!1;this.elements.forEach(function(t,i){this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),t.setAttribute("data-medium-editor-element",!0),t.setAttribute("role","textbox"),t.setAttribute("aria-multiline",!0),t.setAttribute("medium-editor-index",i),t.hasAttribute("medium-editor-textarea-id")&&(e=!0)},this),e&&this.subscribe("editableInput",function(e,t){var i=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');i&&(i.value=this.serialize()[t.id].value)}.bind(this))}function w(){var e;if(this.subscribe("editableKeydownTab",n.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.options.disableReturn||this.options.disableDoubleReturn)this.subscribe("editableKeydownEnter",i.bind(this));else for(e=0;e<this.elements.length;e+=1)if(this.elements[e].getAttribute("data-disable-return")||this.elements[e].getAttribute("data-disable-double-return")){this.subscribe("editableKeydownEnter",i.bind(this));break}this.options.disableReturn||this.elements.forEach(function(e){e.getAttribute("data-disable-return")||this.on(e,"keyup",a.bind(this))},this)}function C(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(e){"toolbar"!==e&&this.options.extensions[e]&&this.extensions.push(d(this.options.extensions[e],e,this))},this),v.call(this)){var t=this.options.fileDragging;t||(t={},m.call(this)||(t.allowedTypes=[])),this.addBuiltInExtension("fileDragging",t)}var i={paste:!0,"anchor-preview":h.call(this),autoLink:f.call(this),keyboardCommands:g.call(this),placeholder:p.call(this)};Object.keys(i).forEach(function(e){i[e]&&this.addBuiltInExtension(e)},this);var n=this.options.extensions.toolbar;if(!n&&u.call(this)){var o=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});n=new e.extensions.toolbar(o)}n&&this.extensions.push(d(n,"toolbar",this))}function x(t,i){var n=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return i&&n.forEach(function(t){i.hasOwnProperty(t[0])&&void 0!==i[t[0]]&&e.util.deprecated(t[0],t[1],"v6.0.0")}),e.util.defaults({},i,t)}function D(t,i){var n,o=/^append-(.+)$/gi,a=/justify([A-Za-z]*)$/g;if(n=o.exec(t))return e.util.execFormatBlock(this.options.ownerDocument,n[1]);if("fontSize"===t)return this.options.ownerDocument.execCommand("fontSize",!1,i.size);if("fontName"===t)return this.options.ownerDocument.execCommand("fontName",!1,i.name);if("createLink"===t)return this.createLink(i);if("image"===t){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if(a.exec(t)){var r=this.options.ownerDocument.execCommand(t,!1,null),l=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return l&&T.call(this,e.util.getTopBlockContainer(l)),r}return this.options.ownerDocument.execCommand(t,!1,null)}function T(t){if(t){var i,n=Array.prototype.slice.call(t.childNodes).filter(function(e){var t="div"===e.nodeName.toLowerCase();return t&&!i&&(i=e.style.textAlign),t});n.length&&(this.saveSelection(),n.forEach(function(t){if(t.style.textAlign===i){var n=t.lastChild;if(n){e.util.unwrap(t,this.options.ownerDocument);var o=this.options.ownerDocument.createElement("BR");n.parentNode.insertBefore(o,n.nextSibling)}}},this),t.style.textAlign=i,this.restoreSelection())}}e.prototype={init:function(e,t){return this.options=x.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(l.call(this,this.origElements),0!==this.elements.length&&(this.isActive=!0,s.call(this,this.options.contentWindow),this.events=new e.Events(this),b.call(this),C.call(this),w.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(e){"function"==typeof e.destroy&&e.destroy()},this),this.events.destroy(),this.elements.forEach(function(e){if(this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-editor-element"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.removeAttribute("medium-editor-index"),e.hasAttribute("medium-editor-textarea-id")){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&t.classList.remove("medium-editor-hidden"),e.parentNode&&e.parentNode.removeChild(e)}},this),this.elements=[],r.call(this,this.options.contentWindow))},on:function(e,t,i,n){this.events.attachDOMEvent(e,t,i,n)},off:function(e,t,i,n){this.events.detachDOMEvent(e,t,i,n)},subscribe:function(e,t){this.events.attachCustomEvent(e,t)},unsubscribe:function(e,t){
this.events.detachCustomEvent(e,t)},trigger:function(e,t,i){this.events.triggerCustomEvent(e,t,i)},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,i={};for(e=0;e<this.elements.length;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,i[t]={value:this.elements[e].innerHTML.trim()};return i},getExtensionByName:function(e){var t;return this.extensions&&this.extensions.length&&this.extensions.some(function(i){return i.name===e&&(t=i,!0)}),t},addBuiltInExtension:function(t,i){var n,o=this.getExtensionByName(t);if(o)return o;switch(t){case"anchor":n=e.util.extend({},this.options.anchor,i),o=new e.extensions.anchor(n);break;case"anchor-preview":o=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":o=new e.extensions.autoLink;break;case"fileDragging":o=new e.extensions.fileDragging(i);break;case"fontname":o=new e.extensions.fontName(this.options.fontName);break;case"fontsize":o=new e.extensions.fontSize(i);break;case"keyboardCommands":o=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":o=new e.extensions.paste(this.options.paste);break;case"placeholder":o=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(t)&&(i?(n=e.util.defaults({},i,e.extensions.button.prototype.defaults[t]),o=new e.extensions.button(n)):o=new e.extensions.button(t))}return o&&this.extensions.push(d(o,t,this)),o},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var e=this.getExtensionByName("toolbar");return e&&e.checkState(),this},queryCommandState:function(e){var t,i=/^full-(.+)$/gi,n=null;t=i.exec(e),t&&(e=t[1]);try{n=this.options.ownerDocument.queryCommandState(e)}catch(o){n=null}return n},execAction:function(t,i){var n,o,a=/^full-(.+)$/gi;return n=a.exec(t),n?(this.saveSelection(),this.selectAllContents(),o=D.call(this,n[1],i),this.restoreSelection()):o=D.call(this,t,i),("insertunorderedlist"===t||"insertorderedlist"===t)&&e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(t){return void 0===t&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(t)},selectAllContents:function(){var t=e.selection.getSelectionElement(this.options.contentWindow);if(t){for(;1===t.children.length;)t=t.children[0];this.selectElement(t)}},selectElement:function(t){e.selection.selectNode(t,this.options.ownerDocument);var i=e.selection.getSelectionElement(this.options.contentWindow);i&&this.events.focusElement(i)},getFocusedElement:function(){var e;return this.elements.some(function(t){return!e&&t.getAttribute("data-medium-focused")&&(e=t),!!e},this),e},exportSelection:function(){var t=e.selection.getSelectionElement(this.options.contentWindow),i=this.elements.indexOf(t),n=null;return i>=0&&(n=e.selection.exportSelection(t,this.options.ownerDocument)),null!==n&&0!==i&&(n.editableElementIndex=i),n},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,i){if(t){var n=this.elements[t.editableElementIndex||0];e.selection.importSelection(t,n,this.options.ownerDocument,i)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var i=e.selection.getSelectionElement(this.options.contentWindow),n={};if(-1!==this.elements.indexOf(i)){try{if(this.events.disableCustomEvent("editableInput"),t.url&&t.url.trim().length>0){var o=this.options.contentWindow.getSelection();if(o){var a,s,r,l,c=o.getRangeAt(0),d=c.commonAncestorContainer;if(3===c.endContainer.nodeType&&3!==c.startContainer.nodeType&&0===c.startOffset&&c.startContainer.firstChild===c.endContainer&&(d=c.endContainer),s=e.util.getClosestBlockContainer(c.startContainer),r=e.util.getClosestBlockContainer(c.endContainer),3!==d.nodeType&&0!==d.textContent.length&&s===r){var u=s||i,h=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),a=this.exportSelection(),h.appendChild(u.cloneNode(!0)),i===u?e.selection.select(this.options.ownerDocument,u.firstChild,0,u.lastChild,3===u.lastChild.nodeType?u.lastChild.nodeValue.length:u.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,u,0,u,u.childNodes.length);var p=this.exportSelection();l=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,h,{start:a.start-p.start,end:a.end-p.start,editableElementIndex:a.editableElementIndex}),0===l.length&&(h=this.options.ownerDocument.createDocumentFragment(),h.appendChild(d.cloneNode(!0)),l=[h.firstChild.firstChild,h.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,l,t.url.trim());var f=(h.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,h.firstChild.innerHTML.replace(/^\s+/,"")),a.start-=f,a.end-=f,this.importSelection(a)}else this.options.ownerDocument.execCommand("createLink",!1,t.url);this.options.targetBlank||"_blank"===t.target?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),t.url):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),t.url),t.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),t.buttonClass)}}if(this.options.targetBlank||"_blank"===t.target||t.buttonClass){n=this.options.ownerDocument.createEvent("HTMLEvents"),n.initEvent("input",!0,!0,this.options.contentWindow);for(var m=0;m<this.elements.length;m+=1)this.elements[m].dispatchEvent(n)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",n,i)}},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)},setContent:function(e,t){if(t=t||0,this.elements[t]){var i=this.elements[t];i.innerHTML=e,this.events.updateInput(i,{target:i,currentTarget:i})}}}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(e){var t=e.split("-"),i=t[0].split("."),n=t.length>1?t[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:n,toString:function(){return[i[0],i[1],i[2]].join(".")+(n?"-"+n:"")}}},e.version=e.parseVersionString.call(this,{version:"5.15.0"}.version),e}()),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(){var e=new r.HandlebarsEnvironment;return p.extend(e,r),e.SafeString=c["default"],e.Exception=u["default"],e.Utils=p,e.escapeExpression=p.escapeExpression,e.VM=m,e.template=function(t){return m.template(t,e)},e}var o=i(1)["default"],a=i(2)["default"];t.__esModule=!0;var s=i(3),r=o(s),l=i(17),c=a(l),d=i(5),u=a(d),h=i(4),p=o(h),f=i(18),m=o(f),g=i(19),v=a(g),y=n();y.create=n,v["default"](y),y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t},t.__esModule=!0},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,i){"use strict";function n(e,t,i){this.helpers=e||{},this.partials=t||{},this.decorators=i||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var o=i(2)["default"];t.__esModule=!0,t.HandlebarsEnvironment=n;var a=i(4),s=i(5),r=o(s),l=i(6),c=i(14),d=i(16),u=o(d),h="4.0.5";t.VERSION=h;var p=7;t.COMPILER_REVISION=p;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=f;var m="[object Object]";n.prototype={constructor:n,logger:u["default"],log:u["default"].log,registerHelper:function(e,t){if(a.toString.call(e)===m){if(t)throw new r["default"]("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(a.toString.call(e)===m)a.extend(this.partials,e);else{if("undefined"==typeof t)throw new r["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(a.toString.call(e)===m){if(t)throw new r["default"]("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var g=u["default"].log;t.log=g,t.createFrame=a.createFrame,t.logger=u["default"]},function(e,t){"use strict";function i(e){return d[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}function o(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1}function a(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(u,i):e}function s(e){return!e&&0!==e||!(!m(e)||0!==e.length)}function r(e){var t=n({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=o,t.escapeExpression=a,t.isEmpty=s,t.createFrame=r,t.blockParams=l,t.appendContextPath=c;var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},u=/[&<>"'`=]/g,h=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var f=function(e){return"function"==typeof e};f(/x/)&&(t.isFunction=f=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=f;var m=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===p.call(e)};t.isArray=m},function(e,t){"use strict";function i(e,t){var o=t&&t.loc,a=void 0,s=void 0;o&&(a=o.start.line,s=o.start.column,e+=" - "+a+":"+s);for(var r=Error.prototype.constructor.call(this,e),l=0;l<n.length;l++)this[n[l]]=r[n[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i),o&&(this.lineNumber=a,this.column=s)}t.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,t["default"]=i,e.exports=t["default"]},function(e,t,i){"use strict";function n(e){s["default"](e),l["default"](e),d["default"](e),h["default"](e),f["default"](e),g["default"](e),y["default"](e)}var o=i(2)["default"];t.__esModule=!0,t.registerDefaultHelpers=n;var a=i(7),s=o(a),r=i(8),l=o(r),c=i(9),d=o(c),u=i(10),h=o(u),p=i(11),f=o(p),m=i(12),g=o(m),v=i(13),y=o(v)},function(e,t,i){"use strict";t.__esModule=!0;var n=i(4);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,i){var o=i.inverse,a=i.fn;if(t===!0)return a(this);if(t===!1||null==t)return o(this);if(n.isArray(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):o(this);if(i.data&&i.ids){var s=n.createFrame(i.data);s.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:s}}return a(t,i)})},e.exports=t["default"]},function(e,t,i){"use strict";var n=i(2)["default"];t.__esModule=!0;var o=i(4),a=i(5),s=n(a);t["default"]=function(e){e.registerHelper("each",function(e,t){function i(t,i,a){c&&(c.key=t,c.index=i,c.first=0===i,c.last=!!a,d&&(c.contextPath=d+t)),l+=n(e[t],{data:c,blockParams:o.blockParams([e[t],t],[d+t,null])})}if(!t)throw new s["default"]("Must pass iterator to #each");var n=t.fn,a=t.inverse,r=0,l="",c=void 0,d=void 0;if(t.data&&t.ids&&(d=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),o.isFunction(e)&&(e=e.call(this)),t.data&&(c=o.createFrame(t.data)),e&&"object"==typeof e)if(o.isArray(e))for(var u=e.length;u>r;r++)r in e&&i(r,r,r===e.length-1);else{var h=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==h&&i(h,r-1),h=p,r++);void 0!==h&&i(h,r-1,!0)}return 0===r&&(l=a(this)),l})},e.exports=t["default"]},function(e,t,i){"use strict";var n=i(2)["default"];t.__esModule=!0;var o=i(5),a=n(o);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,i){"use strict";t.__esModule=!0;var n=i(4);t["default"]=function(e){e.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var o=1;null!=i.hash.level?o=i.hash.level:i.data&&null!=i.data.level&&(o=i.data.level),t[0]=o,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,i){"use strict";t.__esModule=!0;var n=i(4);t["default"]=function(e){e.registerHelper("with",function(e,t){n.isFunction(e)&&(e=e.call(this));var i=t.fn;if(n.isEmpty(e))return t.inverse(this);var o=t.data;return t.data&&t.ids&&(o=n.createFrame(t.data),o.contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:o,blockParams:n.blockParams([e],[o&&o.contextPath])})})},e.exports=t["default"]},function(e,t,i){"use strict";function n(e){s["default"](e)}var o=i(2)["default"];t.__esModule=!0,t.registerDefaultDecorators=n;var a=i(15),s=o(a)},function(e,t,i){"use strict";t.__esModule=!0;var n=i(4);t["default"]=function(e){e.registerDecorator("inline",function(e,t,i,o){var a=e;return t.partials||(t.partials={},a=function(o,a){var s=i.partials;i.partials=n.extend({},s,t.partials);var r=e(o,a);return i.partials=s,r}),t.partials[o.args[0]]=o.fn,a})},e.exports=t["default"]},function(e,t,i){"use strict";t.__esModule=!0;var n=i(4),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;i>a;a++)n[a-1]=arguments[a];console[t].apply(console,n)}}};t["default"]=o,e.exports=t["default"]},function(e,t){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t["default"]=i,e.exports=t["default"]},function(e,t,i){"use strict";function n(e){var t=e&&e[0]||1,i=v.COMPILER_REVISION;if(t!==i){if(i>t){var n=v.REVISION_CHANGES[i],o=v.REVISION_CHANGES[t];throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){function i(i,n,o){o.hash&&(n=f.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),i=t.VM.resolvePartial.call(this,i,n,o);var a=t.VM.invokePartial.call(this,i,n,o);if(null==a&&t.compile&&(o.partials[o.name]=t.compile(i,e.compilerOptions,t),a=o.partials[o.name](n,o)),null!=a){if(o.indent){for(var s=a.split("\n"),r=0,l=s.length;l>r&&(s[r]||r+1!==l);r++)s[r]=o.indent+s[r];a=s.join("\n")}return a}throw new g["default"]("The partial "+o.name+" could not be compiled when running in runtime-only mode")}function n(t){function i(t){return""+e.main(o,t,o.helpers,o.partials,s,l,r)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a.data;n._setup(a),!a.partial&&e.useData&&(s=c(t,s));var r=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(r=a.depths?t!==a.depths[0]?[t].concat(a.depths):a.depths:[t]),(i=d(e.main,i,o,a.depths||[],s,l))(t,a)}if(!t)throw new g["default"]("No environment passed to template");if(!e||!e.main)throw new g["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var o={strict:function(e,t){if(!(t in e))throw new g["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,n=0;i>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:f.escapeExpression,invokePartial:i,fn:function(t){var i=e[t];return i.decorator=e[t+"_d"],i},programs:[],program:function(e,t,i,n,o){var s=this.programs[e],r=this.fn(e);return t||o||n||i?s=a(this,e,r,t,i,n,o):s||(s=this.programs[e]=a(this,e,r)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=f.extend({},t,e)),i},noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(o.helpers=i.helpers,o.partials=i.partials,o.decorators=i.decorators):(o.helpers=o.merge(i.helpers,t.helpers),e.usePartial&&(o.partials=o.merge(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(o.decorators=o.merge(i.decorators,t.decorators)))},n._child=function(t,i,n,s){if(e.useBlockParams&&!n)throw new g["default"]("must pass block params");if(e.useDepths&&!s)throw new g["default"]("must pass parent depths");return a(o,t,e[t],i,0,n,s)},n}function a(e,t,i,n,o,a,s){function r(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=s;return s&&t!==s[0]&&(r=[t].concat(s)),i(e,t,e.helpers,e.partials,o.data||n,a&&[o.blockParams].concat(a),r)}return r=d(i,r,e,s,n,a),r.program=t,r.depth=s?s.length:0,r.blockParams=o||0,r}function s(e,t,i){return e?e.call||i.name||(i.name=e,e=i.partials[e]):e="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],e}function r(e,t,i){i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var n=void 0;if(i.fn&&i.fn!==l&&(i.data=v.createFrame(i.data),n=i.data["partial-block"]=i.fn,n.partials&&(i.partials=f.extend({},i.partials,n.partials))),void 0===e&&n&&(e=n),void 0===e)throw new g["default"]("The partial "+i.name+" could not be found");return e instanceof Function?e(t,i):void 0}function l(){return""}function c(e,t){return t&&"root"in t||(t=t?v.createFrame(t):{},t.root=e),t}function d(e,t,i,n,o,a){if(e.decorator){var s={};t=e.decorator(t,s,i,n&&n[0],o,a,n),f.extend(t,s)}return t}var u=i(1)["default"],h=i(2)["default"];t.__esModule=!0,t.checkRevision=n,t.template=o,t.wrapProgram=a,t.resolvePartial=s,t.invokePartial=r,t.noop=l;var p=i(4),f=u(p),m=i(5),g=h(m),v=i(3)},function(e,t){(function(i){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof i?i:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t["default"]}).call(t,function(){return this}())}])}),!function(e,t,i,n){function o(e,t){var i=Math.max(0,e[0]-t[0],t[0]-e[1]),n=Math.max(0,e[2]-t[1],t[1]-e[3]);return i+n}function a(t,i,n,o){var a=t.length;for(o=o?"offset":"position",n=n||0;a--;){var s=t[a].el?t[a].el:e(t[a]),r=s[o]();r.left+=parseInt(s.css("margin-left"),10),r.top+=parseInt(s.css("margin-top"),10),i[a]=[r.left-n,r.left+s.outerWidth()+n,r.top-n,r.top+s.outerHeight()+n]}}function s(e,t){var i=t.offset();return{left:e.left-i.left,top:e.top-i.top}}function r(e,t,i){t=[t.left,t.top],i=i&&[i.left,i.top];for(var n,a=e.length,s=[];a--;)n=e[a],s[a]=[a,o(n,t),i&&o(n,i)];return s=s.sort(function(e,t){return t[1]-e[1]||t[2]-e[2]||t[0]-e[0]})}function l(t){this.options=e.extend({},h,t),this.containers=[],this.options.rootGroup||(this.scrollProxy=e.proxy(this.scroll,this),this.dragProxy=e.proxy(this.drag,this),this.dropProxy=e.proxy(this.drop,this),this.placeholder=e(this.options.placeholder),t.isValidTarget||(this.options.isValidTarget=n))}function c(t,i){this.el=t,this.options=e.extend({},u,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(d.start,this.handle,e.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var d,u={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},h={afterMove:function(e,t,i){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(e,t){return!0},onCancel:function(e,t,i,n){},onDrag:function(e,t,i,n){e.css(t)},onDragStart:function(t,i,n,o){t.css({height:t.outerHeight(),width:t.outerWidth()}),t.addClass(i.group.options.draggedClass),e("body").addClass(i.group.options.bodyClass)},onDrop:function(t,i,n,o){t.removeClass(i.group.options.draggedClass).removeAttr("style"),e("body").removeClass(i.group.options.bodyClass)},onMousedown:function(e,t,i){if(!i.target.nodeName.match(/^(input|select|textarea)$/i))return i.preventDefault(),!0},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:!0,serialize:function(t,i,n){return t=e.extend({},t.data()),n?[i]:(i[0]&&(t.children=i),delete t.subContainers,delete t.sortable,t)},tolerance:0},p={},f=0,m={left:0,top:0,bottom:0,right:0};d={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},l.get=function(e){return p[e.group]||(e.group===n&&(e.group=f++),p[e.group]=new l(e)),p[e.group]},l.prototype={dragInit:function(t,i){this.$document=e(i.el[0].ownerDocument);var n=e(t.target).closest(this.options.itemSelector);n.length&&(this.item=n,this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,h.onMousedown,t)&&(this.setPointer(t),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0))},drag:function(e){if(!this.dragging){if(!this.distanceMet(e)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,h.onDragStart,e),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(e),this.options.onDrag(this.item,s(this.pointer,this.item.offsetParent()),h.onDrag,e),e=this.getPointer(e);var t=this.sameResultBox,i=this.options.tolerance;(!t||t.top-i>e.top||t.bottom+i<e.top||t.left-i>e.left||t.right+i<e.left)&&!this.searchValidTarget()&&(this.placeholder.detach(),this.lastAppendedItem=n)},drop:function(e){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,h.onCancel,e),this.options.onDrop(this.item,this.getContainer(this.item),h.onDrop,e),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(e,t){e||(e=this.relativePointer||this.pointer,t=this.lastRelativePointer||this.lastPointer);for(var i=r(this.getContainerDimensions(),e,t),o=i.length;o--;){var a=i[o][0];if((!i[o][1]||this.options.pullPlaceholder)&&(a=this.containers[a],!a.disabled)){if(!this.$getOffsetParent()){var l=a.getItemOffsetParent();e=s(e,l),t=s(t,l)}if(a.searchValidTarget(e,t))return!0}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(e,t,i,n){var o=this.lastAppendedItem;!n&&o&&o[0]===t[0]||(t[i](this.placeholder),this.lastAppendedItem=t,this.sameResultBox=n,this.options.afterMove(this.placeholder,e,t))},getContainerDimensions:function(){return this.containerDimensions||a(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(e){return e.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var e=this.containers.length-1,t=this.containers[e].getItemOffsetParent();if(!this.options.rootGroup)for(;e--;)if(t[0]!=this.containers[e].getItemOffsetParent()[0]){t=!1;break}this.offsetParent=t}return this.offsetParent},setPointer:function(e){if(e=this.getPointer(e),this.$getOffsetParent()){var t=s(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=t}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(e){return e=this.getPointer(e),Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(e){var t=e.originalEvent||e.originalEvent.touches&&e.originalEvent.touches[0];return{left:e.pageX||t.pageX,top:e.pageY||t.pageY}},setupDelayTimer:function(){var e=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){e.delayMet=!0},this.options.delay))},scroll:function(e){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(t){var i=this;e.each(["drag","drop","scroll"],function(e,n){i.$document[t](d[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(e){e._clearDimensions()})},traverse:function(e){e(this);for(var t=this.containers.length;t--;)this.containers[t].traverse(e)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){p[this.options.group]=n}},c.prototype={dragInit:function(e){var t=this.rootGroup;!this.disabled&&!t.dragInitDone&&this.options.drag&&this.isValidDrag(e)&&t.dragInit(e,this)},isValidDrag:function(e){return 1==e.which||"touchstart"==e.type&&1==e.originalEvent.touches.length},searchValidTarget:function(e,t){var i=r(this.getItemDimensions(),e,t),n=i.length,o=this.rootGroup,a=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!n&&a)return o.movePlaceholder(this,this.target,"append"),!0;for(;n--;)if(o=i[n][0],!i[n][1]&&this.hasChildGroup(o)){if(this.getContainerGroup(o).searchValidTarget(e,t))return!0}else if(a)return this.movePlaceholder(o,e),!0},movePlaceholder:function(t,i){var n=e(this.items[t]),o=this.itemDimensions[t],a="after",s=n.outerWidth(),r=n.outerHeight(),l=n.offset(),l={left:l.left,right:l.left+s,top:l.top,bottom:l.top+r};this.options.vertical?i.top<=(o[2]+o[3])/2?(a="before",l.bottom-=r/2):l.top+=r/2:i.left<=(o[0]+o[1])/2?(a="before",l.right-=s/2):l.left+=s/2,this.hasChildGroup(t)&&(l=m),this.rootGroup.movePlaceholder(this,n,a,l)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),a(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var e=this.el;return"relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(e){return this.options.nested&&this.getContainerGroup(e)},getContainerGroup:function(t){var o=e.data(this.items[t],"subContainers");if(o===n){var a=this.$getChildren(this.items[t],"container"),o=!1;a[0]&&(o=e.extend({},this.options,{rootGroup:this.rootGroup,group:f++}),o=a[i](o).data(i).group),e.data(this.items[t],"subContainers",o)}return o},$getChildren:function(t,i){var n=this.rootGroup.options,o=n[i+"Path"],n=n[i+"Selector"];return t=e(t),o&&(t=t.find(o)),t.children(n)},_serialize:function(t,i){var n=this,o=this.$getChildren(t,i?"item":"container").not(this.options.exclude).map(function(){return n._serialize(e(this),!i)}).get();return this.rootGroup.options.serialize(t,o,i)},traverse:function(t){e.each(this.items||[],function(i){(i=e.data(this,"subContainers"))&&i.traverse(t)}),t(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var t=this;this.target.off(d.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=e.grep(this.group.containers,function(e){return e!=t})),e.each(this.items||[],function(){e.removeData(this,"subContainers")})}};var g={enable:function(){this.traverse(function(e){e.disabled=!1})},disable:function(){this.traverse(function(e){e.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(e){e._clearDimensions()})},destroy:function(){this.traverse(function(e){e._destroy()})}};e.extend(c.prototype,g),e.fn[i]=function(t){var o=Array.prototype.slice.call(arguments,1);return this.map(function(){var a=e(this),s=a.data(i);return s&&g[t]?g[t].apply(s,o)||this:(s||t!==n&&"object"!=typeof t||a.data(i,new c(a,t)),this)})}}(jQuery,window,"sortable"),!function(e){"use strict";function t(e){return(e||"").toLowerCase()}var i="2.1.6";e.fn.cycle=function(i){var n;return 0!==this.length||e.isReady?this.each(function(){var n,o,a,s,r=e(this),l=e.fn.cycle.log;if(!r.data("cycle.opts")){(r.data("cycle-log")===!1||i&&i.log===!1||o&&o.log===!1)&&(l=e.noop),l("--c2 init--"),n=r.data();for(var c in n)n.hasOwnProperty(c)&&/^cycle[A-Z]+/.test(c)&&(s=n[c],a=c.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),l(a+":",s,"("+typeof s+")"),n[a]=s);o=e.extend({},e.fn.cycle.defaults,n,i||{}),o.timeoutId=0,o.paused=o.paused||!1,o.container=r,o._maxZ=o.maxZ,o.API=e.extend({_container:r},e.fn.cycle.API),o.API.log=l,o.API.trigger=function(e,t){return o.container.trigger(e,t),o.API},r.data("cycle.opts",o),r.data("cycle.API",o.API),o.API.trigger("cycle-bootstrap",[o,o.API]),o.API.addInitialSlides(),o.API.preInitSlideshow(),o.slides.length&&o.API.initSlideshow()}}):(n={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(n.s,n.c).cycle(i)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),i=t.slides;t.slideCount=0,t.slides=e(),i=i.jquery?i:t.container.find(i),t.random&&i.sort(function(){return Math.random()-.5}),t.API.add(i)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.preInit)&&i.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.postInit)&&i.postInit(t)},initSlideshow:function(){var t,i=this.opts(),n=i.container;i.API.calcFirstSlide(),"static"==i.container.css("position")&&i.container.css("position","relative"),e(i.slides[i.currSlide]).css({opacity:1,display:"block",visibility:"visible"}),i.API.stackSlides(i.slides[i.currSlide],i.slides[i.nextSlide],!i.reverse),i.pauseOnHover&&(i.pauseOnHover!==!0&&(n=e(i.pauseOnHover)),n.hover(function(){i.API.pause(!0)},function(){i.API.resume(!0)})),i.timeout&&(t=i.API.getSlideOpts(i.currSlide),i.API.queueTransition(t,t.timeout+i.delay)),i._initialized=!0,i.API.updateView(!0),i.API.trigger("cycle-initialized",[i]),i.API.postInitSlideshow()},pause:function(t){var i=this.opts(),n=i.API.getSlideOpts(),o=i.hoverPaused||i.paused;t?i.hoverPaused=!0:i.paused=!0,o||(i.container.addClass("cycle-paused"),i.API.trigger("cycle-paused",[i]).log("cycle-paused"),n.timeout&&(clearTimeout(i.timeoutId),i.timeoutId=0,i._remainingTimeout-=e.now()-i._lastQueue,(i._remainingTimeout<0||isNaN(i._remainingTimeout))&&(i._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),i=!t.hoverPaused&&!t.paused;
e?t.hoverPaused=!1:t.paused=!1,i||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,i){var n,o=this.opts(),a=o.slideCount,s=!1;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(){var t,n=e(this);i?o.container.prepend(n):o.container.append(n),o.slideCount++,t=o.API.buildSlideOpts(n),o.slides=i?e(n).add(o.slides):o.slides.add(n),o.API.initSlide(t,n,--o._maxZ),n.data("cycle.opts",t),o.API.trigger("cycle-slide-added",[o,t,n])}),o.API.updateView(!0),s=o._preInitialized&&2>a&&o.slideCount>=1,s&&(o._initialized?o.timeout&&(n=o.slides.length,o.nextSlide=o.reverse?n-1:1,o.timeoutId||o.API.queueTransition(o)):o.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();e=parseInt(t.startingSlide||0,10),(e>=t.slides.length||0>e)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,i){var n,o=t;return o._tempFx?n=e.fn.cycle.transitions[o._tempFx]:i&&o.manualFx&&(n=e.fn.cycle.transitions[o.manualFx]),n||(n=e.fn.cycle.transitions[o.fx]),o._tempFx=null,this.opts()._tempFx=null,n||(n=e.fn.cycle.transitions.fade,o.API.log('Transition "'+o.fx+'" not found.  Using fade.')),n},prepareTx:function(e,t){var i,n,o,a,s,r=this.opts();return r.slideCount<2?void(r.timeoutId=0):(!e||r.busy&&!r.manualTrump||(r.API.stopTransition(),r.busy=!1,clearTimeout(r.timeoutId),r.timeoutId=0),void(r.busy||(0!==r.timeoutId||e)&&(n=r.slides[r.currSlide],o=r.slides[r.nextSlide],a=r.API.getSlideOpts(r.nextSlide),s=r.API.calcTx(a,e),r._tx=s,e&&void 0!==a.manualSpeed&&(a.speed=a.manualSpeed),r.nextSlide!=r.currSlide&&(e||!r.paused&&!r.hoverPaused&&r.timeout)?(r.API.trigger("cycle-before",[a,n,o,t]),s.before&&s.before(a,n,o,t),i=function(){r.busy=!1,r.container.data("cycle.opts")&&(s.after&&s.after(a,n,o,t),r.API.trigger("cycle-after",[a,n,o,t]),r.API.queueTransition(a),r.API.updateView(!0))},r.busy=!0,s.transition?s.transition(a,n,o,t,i):r.API.doTransition(a,n,o,t,i),r.API.calcNextSlide(),r.API.updateView()):r.API.queueTransition(a))))},doTransition:function(t,i,n,o,a){var s=t,r=e(i),l=e(n),c=function(){l.animate(s.animIn||{opacity:1},s.speed,s.easeIn||s.easing,a)};l.css(s.cssBefore||{}),r.animate(s.animOut||{},s.speed,s.easeOut||s.easing,function(){r.css(s.cssAfter||{}),s.sync||c()}),s.sync&&c()},queueTransition:function(t,i){var n=this.opts(),o=void 0!==i?i:t.timeout;return 0===n.nextSlide&&0===--n.loop?(n.API.log("terminating; loop=0"),n.timeout=0,o?setTimeout(function(){n.API.trigger("cycle-finished",[n])},o):n.API.trigger("cycle-finished",[n]),void(n.nextSlide=n.currSlide)):void 0!==n.continueAuto&&(n.continueAuto===!1||e.isFunction(n.continueAuto)&&n.continueAuto()===!1)?(n.API.log("terminating automatic transitions"),n.timeout=0,void(n.timeoutId&&clearTimeout(n.timeoutId))):void(o&&(n._lastQueue=e.now(),void 0===i&&(n._remainingTimeout=t.timeout),n.paused||n.hoverPaused||(n.timeoutId=setTimeout(function(){n.API.prepareTx(!1,!n.reverse)},o))))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(i){var n,o,a=this.opts(),s=i.data()||{};for(var r in s)s.hasOwnProperty(r)&&/^cycle[A-Z]+/.test(r)&&(n=s[r],o=r.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),a.API.log("["+(a.slideCount-1)+"]",o+":",n,"("+typeof n+")"),s[o]=n);s=e.extend({},e.fn.cycle.defaults,a,s),s.slideNum=a.slideCount;try{delete s.API,delete s.slideCount,delete s.currSlide,delete s.nextSlide,delete s.slides}catch(l){}return s},getSlideOpts:function(t){var i=this.opts();void 0===t&&(t=i.currSlide);var n=i.slides[t],o=e(n).data("cycle.opts");return e.extend({},i,o)},initSlide:function(t,i,n){var o=this.opts();i.css(t.slideCss||{}),n>0&&i.css("zIndex",n),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),i.addClass(o.slideClass)},updateView:function(e,t){var i=this.opts();if(i._initialized){var n=i.API.getSlideOpts(),o=i.slides[i.currSlide];!e&&t!==!0&&(i.API.trigger("cycle-update-view-before",[i,n,o]),i.updateView<0)||(i.slideActiveClass&&i.slides.removeClass(i.slideActiveClass).eq(i.currSlide).addClass(i.slideActiveClass),e&&i.hideNonActive&&i.slides.filter(":not(."+i.slideActiveClass+")").css("visibility","hidden"),0===i.updateView&&setTimeout(function(){i.API.trigger("cycle-update-view",[i,n,o,e])},n.speed/(i.sync?2:1)),0!==i.updateView&&i.API.trigger("cycle-update-view",[i,n,o,e]),e&&i.API.trigger("cycle-update-view-after",[i,n,o]))}},getComponent:function(t){var i=this.opts(),n=i[t];return"string"==typeof n?/^\s*[\>|\+|~]/.test(n)?i.container.find(n):e(n):n.jquery?n:e(n)},stackSlides:function(t,i,n){var o=this.opts();t||(t=o.slides[o.currSlide],i=o.slides[o.nextSlide],n=!o.reverse),e(t).css("zIndex",o.maxZ);var a,s=o.maxZ-2,r=o.slideCount;if(n){for(a=o.currSlide+1;r>a;a++)e(o.slides[a]).css("zIndex",s--);for(a=0;a<o.currSlide;a++)e(o.slides[a]).css("zIndex",s--)}else{for(a=o.currSlide-1;a>=0;a--)e(o.slides[a]).css("zIndex",s--);for(a=r-1;a>o.currSlide;a--)e(o.slides[a]).css("zIndex",s--)}e(i).css("zIndex",o.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: "+i},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,i,n){e.API.stackSlides(i,t,n),e.cssBefore={opacity:1,visibility:"visible",display:"block"}}},fade:{before:function(t,i,n,o){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,o),t.cssBefore=e.extend(a,{opacity:0,visibility:"visible",display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,i,n,o){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,o),t.cssBefore=e.extend(a,{opacity:1,visibility:"visible",display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,i,n){e.API.stackSlides(t,i,n);var o=e.container.css("overflow","hidden").width();e.cssBefore={left:n?o:-o,top:0,opacity:1,visibility:"visible",display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:n?-o:o}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),function(e){"use strict";function t(t,n){var o,a,s,r=n.autoHeight;if("container"==r)a=e(n.slides[n.currSlide]).outerHeight(),n.container.height(a);else if(n._autoHeightRatio)n.container.height(n.container.width()/n._autoHeightRatio);else if("calc"===r||"number"==e.type(r)&&r>=0){if(s="calc"===r?i(t,n):r>=n.slides.length?0:r,s==n._sentinelIndex)return;n._sentinelIndex=s,n._sentinel&&n._sentinel.remove(),o=e(n.slides[s].cloneNode(!0)),o.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),o.css({position:"static",visibility:"hidden",display:"block"}).prependTo(n.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),o.find("*").css("visibility","hidden"),n._sentinel=o}}function i(t,i){var n=0,o=-1;return i.slides.each(function(t){var i=e(this).height();i>o&&(o=i,n=t)}),n}function n(t,i,n,o){var a=e(o).outerHeight();i.container.animate({height:a},i.autoHeightSpeed,i.autoHeightEasing)}function o(i,a){a._autoHeightOnResize&&(e(window).off("resize orientationchange",a._autoHeightOnResize),a._autoHeightOnResize=null),a.container.off("cycle-slide-added cycle-slide-removed",t),a.container.off("cycle-destroyed",o),a.container.off("cycle-before",n),a._sentinel&&(a._sentinel.remove(),a._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(i,a){function s(){t(i,a)}var r,l=a.autoHeight,c=e.type(l),d=null;("string"===c||"number"===c)&&(a.container.on("cycle-slide-added cycle-slide-removed",t),a.container.on("cycle-destroyed",o),"container"==l?a.container.on("cycle-before",n):"string"===c&&/\d+\:\d+/.test(l)&&(r=l.match(/(\d+)\:(\d+)/),r=r[1]/r[2],a._autoHeightRatio=r),"number"!==c&&(a._autoHeightOnResize=function(){clearTimeout(d),d=setTimeout(s,50)},e(window).on("resize orientationchange",a._autoHeightOnResize)),setTimeout(s,30))})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,i,n,o){"caption"===i.captionModule&&e.each(["caption","overlay"],function(){var e=this,t=n[e+"Template"],a=i.API.getComponent(e);a.length&&t?(a.html(i.API.tmpl(t,n,i,o)),a.show()):a.hide()})}),e(document).on("cycle-destroyed",function(t,i){var n;e.each(["caption","overlay"],function(){var e=this,t=i[e+"Template"];i[e]&&t&&(n=i.API.getComponent("caption"),n.empty())})})}(jQuery),function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(i){var n,o,a,s=e.makeArray(arguments);return"number"==e.type(i)?this.cycle("goto",i):"string"==e.type(i)?this.each(function(){var r;return n=i,a=e(this).data("cycle.opts"),void 0===a?void t.log('slideshow must be initialized before sending commands; "'+n+'" ignored'):(n="goto"==n?"jump":n,o=a.API[n],e.isFunction(o)?(r=e.makeArray(s),r.shift(),o.apply(a.API,r)):void t.log("unknown command: ",n))}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;e.allowWrap===!1&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;e.allowWrap===!1&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),i=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),i(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){var n=e(this);n.removeData(),n.removeClass(t.slideClass),i(this,"parsedAttrs",!1)})},jump:function(e,t){var i,n=this.opts();if(!n.busy||n.manualTrump){var o=parseInt(e,10);if(isNaN(o)||0>o||o>=n.slides.length)return void n.API.log("goto: invalid slide index: "+o);if(o==n.currSlide)return void n.API.log("goto: skipping, already on slide",o);n.nextSlide=o,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",o," (zero-index)"),i=n.currSlide<n.nextSlide,n._tempFx=t,n.API.prepareTx(!0,i)}},stop:function(){var t=this.opts(),i=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(t.pauseOnHover!==!0&&(i=e(t.pauseOnHover)),i.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var i,n,o=this.opts(),a=[],s=1,r=0;r<o.slides.length;r++)i=o.slides[r],r==t?n=i:(a.push(i),e(i).data("cycle.opts").slideNum=s,s++);n&&(o.slides=e(a),o.slideCount--,e(n).remove(),t==o.currSlide?o.API.advanceSlide(1):t<o.currSlide?o.currSlide--:o.currSlide++,o.API.trigger("cycle-slide-removed",[o,t,n]).log("cycle-slide-removed"),o.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var i=e(this),n=i.data("cycle-cmd"),o=i.data("cycle-context")||".cycle-slideshow";e(o).cycle(n,i.data("cycle-arg"))})}(jQuery),function(e){"use strict";function t(t,i){var n;return t._hashFence?void(t._hashFence=!1):(n=window.location.hash.substring(1),void t.slides.each(function(o){if(e(this).data("cycle-hash")==n){if(i===!0)t.startingSlide=o;else{var a=t.currSlide<o;t.nextSlide=o,t.API.prepareTx(!0,a)}return!1}}))}e(document).on("cycle-pre-initialize",function(i,n){t(n,!0),n._onHashChange=function(){t(n,!1)},e(window).on("hashchange",n._onHashChange)}),e(document).on("cycle-update-view",function(e,t,i){i.hash&&"#"+i.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=i.hash)}),e(document).on("cycle-destroyed",function(t,i){i._onHashChange&&e(window).off("hashchange",i._onHashChange)})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{loader:!1}),e(document).on("cycle-bootstrap",function(t,i){function n(t,n){function a(t){var a;"wait"==i.loader?(r.push(t),0===c&&(r.sort(s),o.apply(i.API,[r,n]),i.container.removeClass("cycle-loading"))):(a=e(i.slides[i.currSlide]),o.apply(i.API,[t,n]),a.show(),i.container.removeClass("cycle-loading"))}function s(e,t){return e.data("index")-t.data("index")}var r=[];if("string"==e.type(t))t=e.trim(t);else if("array"===e.type(t))for(var l=0;l<t.length;l++)t[l]=e(t[l])[0];t=e(t);var c=t.length;c&&(t.css("visibility","hidden").appendTo("body").each(function(t){function s(){0===--l&&(--c,a(d))}var l=0,d=e(this),u=d.is("img")?d:d.find("img");return d.data("index",t),u=u.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])'),u.length?(l=u.length,void u.each(function(){this.complete?s():e(this).load(function(){s()}).on("error",function(){0===--l&&(i.API.log("slide skipped; img not loaded:",this.src),0===--c&&"wait"==i.loader&&o.apply(i.API,[r,n]))})})):(--c,void r.push(d))}),c&&i.container.addClass("cycle-loading"))}var o;i.loader&&(o=i.API.add,i.API.add=n)})}(jQuery),function(e){"use strict";function t(t,i,n){var o,a=t.API.getComponent("pager");a.each(function(){var a=e(this);if(i.pagerTemplate){var s=t.API.tmpl(i.pagerTemplate,i,t,n[0]);o=e(s).appendTo(a)}else o=a.children().eq(t.slideCount-1);o.on(t.pagerEvent,function(e){t.pagerEventBubble||e.preventDefault(),t.API.page(a,e.currentTarget)})})}function i(e,t){var i=this.opts();if(!i.busy||i.manualTrump){var n=e.children().index(t),o=n,a=i.currSlide<o;i.currSlide!=o&&(i.nextSlide=o,i._tempFx=i.pagerFx,i.API.prepareTx(!0,a),i.API.trigger("cycle-pager-activated",[i,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerEventBubble:void 0,pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,i,n){n.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,n,o){t.pager&&(t.API.buildPagerLink(t,n,o),t.API.page=i)}),e(document).on("cycle-slide-removed",function(t,i,n){if(i.pager){var o=i.API.getComponent("pager");o.each(function(){var t=e(this);e(t.children()[n]).remove()})}}),e(document).on("cycle-update-view",function(t,i){var n;i.pager&&(n=i.API.getComponent("pager"),n.each(function(){e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)}))}),e(document).on("cycle-destroyed",function(e,t){var i=t.API.getComponent("pager");i&&(i.children().off(t.pagerEvent),t.pagerTemplate&&i.empty())})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var i=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",n=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(i,function(){t._tempFx=t.swipeFx,t.API.next()}),t.container.on(n,function(){t._tempFx=t.swipeFx,t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t){if(!t.allowWrap){var i=t.disabledClass,n=t.API.getComponent("next"),o=t.API.getComponent("prev"),a=t._prevBoundry||0,s=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==s?n.addClass(i).prop("disabled",!0):n.removeClass(i).prop("disabled",!1),t.currSlide===a?o.addClass(i).prop("disabled",!0):o.removeClass(i).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{progressive:!1}),e(document).on("cycle-pre-initialize",function(t,i){if(i.progressive){var n,o,a=i.API,s=a.next,r=a.prev,l=a.prepareTx,c=e.type(i.progressive);if("array"==c)n=i.progressive;else if(e.isFunction(i.progressive))n=i.progressive(i);else if("string"==c){if(o=e(i.progressive),n=e.trim(o.html()),!n)return;if(/^(\[)/.test(n))try{n=e.parseJSON(n)}catch(d){return void a.log("error parsing progressive slides",d)}else n=n.split(new RegExp(o.data("cycle-split")||"\n")),n[n.length-1]||n.pop()}l&&(a.prepareTx=function(e,t){var o,a;return e||0===n.length?void l.apply(i.API,[e,t]):void(t&&i.currSlide==i.slideCount-1?(a=n[0],n=n.slice(1),i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){t.API.advanceSlide(1)},50)}),i.API.add(a)):t||0!==i.currSlide?l.apply(i.API,[e,t]):(o=n.length-1,a=n[o],n=n.slice(0,o),i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){t.currSlide=1,t.API.advanceSlide(-1)},50)}),i.API.add(a,!0)))}),s&&(a.next=function(){var e=this.opts();if(n.length&&e.currSlide==e.slideCount-1){var t=n[0];n=n.slice(1),e.container.one("cycle-slide-added",function(e,t){s.apply(t.API),t.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(t)}else s.apply(e.API)}),r&&(a.prev=function(){var e=this.opts();if(n.length&&0===e.currSlide){var t=n.length-1,i=n[t];n=n.slice(0,t),e.container.one("cycle-slide-added",function(e,t){t.currSlide=1,t.API.advanceSlide(-1),t.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(i,!0)}else r.apply(e.API)})}})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,i){var n=new RegExp(i.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),o=e.makeArray(arguments);return o.shift(),t.replace(n,function(t,i){var n,a,s,r,l=i.split(".");for(n=0;n<o.length;n++)if(s=o[n]){if(l.length>1)for(r=s,a=0;a<l.length;a++)s=r,r=r[l[a]]||i;else r=s[i];if(e.isFunction(r))return r.apply(s,o);if(void 0!==r&&null!==r&&r!=i)return r}return i})}})}(jQuery),!function(e){"use strict";e.extend(e.fn.cycle.defaults,{centerHorz:!1,centerVert:!1}),e(document).on("cycle-pre-initialize",function(t,i){function n(){clearTimeout(l),l=setTimeout(s,50)}function o(){clearTimeout(l),clearTimeout(c),e(window).off("resize orientationchange",n)}function a(){i.slides.each(r)}function s(){r.apply(i.container.find("."+i.slideActiveClass)),clearTimeout(c),c=setTimeout(a,50)}function r(){var t=e(this),n=i.container.width(),o=i.container.height(),a=t.outerWidth(),s=t.outerHeight();a&&(i.centerHorz&&n>=a&&t.css("marginLeft",(n-a)/2),i.centerVert&&o>=s&&t.css("marginTop",(o-s)/2))}if(i.centerHorz||i.centerVert){var l,c;e(window).on("resize orientationchange load",n),i.container.on("cycle-destroyed",o),i.container.on("cycle-initialized cycle-slide-added cycle-slide-removed",function(){n()}),s()}})}(jQuery),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Mi.apply(null,arguments)}function t(e){Mi=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t){for(var i in t)a(t,i)&&(e[i]=t[i]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function r(e,t,i,n){return ke(e,t,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(e){return null==e._pf&&(e._pf=l()),e._pf}function d(e){if(null==e._isValid){var t=c(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function u(e){var t=r(NaN);return null!=e?s(c(t),e):c(t).userInvalidated=!0,t}function h(e,t){var i,n,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=c(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Pi.length>0)for(i in Pi)n=Pi[i],o=t[n],"undefined"!=typeof o&&(e[n]=o);return e}function p(t){h(this,t),this._d=new Date((+t._d)),Ii===!1&&(Ii=!0,e.updateOffset(this),Ii=!1)}function f(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function m(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function g(e,t,i){var n,o=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(n=0;o>n;n++)(i&&e[n]!==t[n]||!i&&m(e[n])!==m(t[n]))&&s++;return s+a}function v(){}function y(e){return e?e.toLowerCase().replace("_","-"):e}function b(e){for(var t,i,n,o,a=0;a<e.length;){for(o=y(e[a]).split("-"),t=o.length,i=y(e[a+1]),i=i?i.split("-"):null;t>0;){if(n=w(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&g(o,i,!0)>=t-1)break;t--}a++}return null}function w(e){var t=null;if(!Ni[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Ai._abbr,require("./locale/"+e),C(t)}catch(i){}return Ni[e]}function C(e,t){var i;return e&&(i="undefined"==typeof t?D(e):x(e,t),i&&(Ai=i)),Ai._abbr}function x(e,t){return null!==t?(t.abbr=e,Ni[e]||(Ni[e]=new v),Ni[e].set(t),C(e),Ni[e]):(delete Ni[e],null)}function D(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ai;if(!i(e)){if(t=w(e))return t;e=[e]}return b(e)}function T(e,t){var i=e.toLowerCase();Li[i]=Li[i+"s"]=Li[t]=e}function k(e){return"string"==typeof e?Li[e]||Li[e.toLowerCase()]:void 0}function _(e){var t,i,n={};for(i in e)a(e,i)&&(t=k(i),t&&(n[t]=e[i]));return n}function E(t,i){return function(n){return null!=n?(M(this,t,n),e.updateOffset(this,i),this):S(this,t)}}function S(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function M(e,t,i){return e._d["set"+(e._isUTC?"UTC":"")+t](i)}function A(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=k(e),"function"==typeof this[e])return this[e](t);return this}function P(e,t,i){for(var n=""+Math.abs(e),o=e>=0;n.length<t;)n="0"+n;return(o?i?"+":"":"-")+n}function I(e,t,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),e&&(Hi[e]=o),t&&(Hi[t[0]]=function(){return P(o.apply(this,arguments),t[1],t[2])}),i&&(Hi[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function L(e){var t,i,n=e.match(Oi);for(t=0,i=n.length;i>t;t++)Hi[n[t]]?n[t]=Hi[n[t]]:n[t]=N(n[t]);return function(o){var a="";for(t=0;i>t;t++)a+=n[t]instanceof Function?n[t].call(o,e):n[t];return a}}function O(e,t){return e.isValid()?(t=F(t,e.localeData()),Ui[t]||(Ui[t]=L(t)),Ui[t](e)):e.localeData().invalidDate()}function F(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Fi.lastIndex=0;n>=0&&Fi.test(e);)e=e.replace(Fi,i),Fi.lastIndex=0,n-=1;return e}function U(e,t,i){Ji[e]="function"==typeof t?t:function(e){return e&&i?i:t}}function H(e,t){return a(Ji,e)?Ji[e](t._strict,t._locale):new RegExp(B(e))}function B(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(n=function(e,i){i[t]=m(e)}),i=0;i<e.length;i++)en[e[i]]=n}function R(e,t){Y(e,function(e,i,n,o){n._w=n._w||{},t(e,n._w,n,o)})}function z(e,t,i){null!=t&&a(en,e)&&en[e](t,i._a,i,e)}function W(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function j(e){return this._months[e.month()]}function V(e){return this._monthsShort[e.month()]}function $(e,t,i){var n,o,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=r([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function q(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),W(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function K(t){return null!=t?(q(this,t),e.updateOffset(this,!0),this):S(this,"Month")}function G(){return W(this.year(),this.month())}function X(e){var t,i=e._a;return i&&-2===c(e).overflow&&(t=i[nn]<0||i[nn]>11?nn:i[on]<1||i[on]>W(i[tn],i[nn])?on:i[an]<0||i[an]>24||24===i[an]&&(0!==i[sn]||0!==i[rn]||0!==i[ln])?an:i[sn]<0||i[sn]>59?sn:i[rn]<0||i[rn]>59?rn:i[ln]<0||i[ln]>999?ln:-1,c(e)._overflowDayOfYear&&(tn>t||t>on)&&(t=on),c(e).overflow=t),e}function Z(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function Q(e,t){var i=!0,n=e+"\n"+(new Error).stack;return s(function(){return i&&(Z(n),i=!1),t.apply(this,arguments)},t)}function J(e,t){un[e]||(Z(t),un[e]=!0)}function ee(e){var t,i,n=e._i,o=hn.exec(n);if(o){for(c(e).iso=!0,t=0,i=pn.length;i>t;t++)if(pn[t][1].exec(n)){e._f=pn[t][0]+(o[6]||" ");break}for(t=0,i=fn.length;i>t;t++)if(fn[t][1].exec(n)){e._f+=fn[t][0];break}n.match(Xi)&&(e._f+="Z"),be(e)}else e._isValid=!1}function te(t){var i=mn.exec(t._i);return null!==i?void(t._d=new Date((+i[1]))):(ee(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function ie(e,t,i,n,o,a,s){var r=new Date(e,t,i,n,o,a,s);return 1970>e&&r.setFullYear(e),r}function ne(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function oe(e){return ae(e)?366:365}function ae(e){return e%4===0&&e%100!==0||e%400===0}function se(){return ae(this.year())}function re(e,t,i){var n,o=i-t,a=i-e.day();return a>o&&(a-=7),o-7>a&&(a+=7),n=_e(e).add(a,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function le(e){return re(e,this._week.dow,this._week.doy).week}function ce(){return this._week.dow}function de(){return this._week.doy}function ue(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function he(e){var t=re(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function pe(e,t,i,n,o){var a,s,r=ne(e,0,1).getUTCDay();return r=0===r?7:r,i=null!=i?i:o,a=o-r+(r>n?7:0)-(o>r?7:0),s=7*(t-1)+(i-o)+a+1,{year:s>0?e:e-1,dayOfYear:s>0?s:oe(e-1)+s}}function fe(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function me(e,t,i){return null!=e?e:null!=t?t:i}function ge(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ve(e){var t,i,n,o,a=[];if(!e._d){for(n=ge(e),e._w&&null==e._a[on]&&null==e._a[nn]&&ye(e),e._dayOfYear&&(o=me(e._a[tn],n[tn]),e._dayOfYear>oe(o)&&(c(e)._overflowDayOfYear=!0),i=ne(o,0,e._dayOfYear),e._a[nn]=i.getUTCMonth(),e._a[on]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=a[t]=n[t];for(;7>t;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[an]&&0===e._a[sn]&&0===e._a[rn]&&0===e._a[ln]&&(e._nextDay=!0,e._a[an]=0),e._d=(e._useUTC?ne:ie).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[an]=24)}}function ye(e){var t,i,n,o,a,s,r;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,s=4,i=me(t.GG,e._a[tn],re(_e(),1,4).year),n=me(t.W,1),o=me(t.E,1)):(a=e._locale._week.dow,s=e._locale._week.doy,i=me(t.gg,e._a[tn],re(_e(),a,s).year),n=me(t.w,1),null!=t.d?(o=t.d,a>o&&++n):o=null!=t.e?t.e+a:a),r=pe(i,n,o,s,a),e._a[tn]=r.year,e._dayOfYear=r.dayOfYear}function be(t){if(t._f===e.ISO_8601)return void ee(t);t._a=[],c(t).empty=!0;var i,n,o,a,s,r=""+t._i,l=r.length,d=0;for(o=F(t._f,t._locale).match(Oi)||[],i=0;i<o.length;i++)a=o[i],n=(r.match(H(a,t))||[])[0],n&&(s=r.substr(0,r.indexOf(n)),s.length>0&&c(t).unusedInput.push(s),r=r.slice(r.indexOf(n)+n.length),d+=n.length),Hi[a]?(n?c(t).empty=!1:c(t).unusedTokens.push(a),z(a,n,t)):t._strict&&!n&&c(t).unusedTokens.push(a);c(t).charsLeftOver=l-d,r.length>0&&c(t).unusedInput.push(r),c(t).bigHour===!0&&t._a[an]<=12&&t._a[an]>0&&(c(t).bigHour=void 0),t._a[an]=we(t._locale,t._a[an],t._meridiem),ve(t),X(t)}function we(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function Ce(e){var t,i,n,o,a;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)a=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],be(t),d(t)&&(a+=c(t).charsLeftOver,a+=10*c(t).unusedTokens.length,c(t).score=a,(null==n||n>a)&&(n=a,i=t));s(e,i||t)}function xe(e){if(!e._d){var t=_(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],ve(e)}}function De(e){var t,o=e._i,a=e._f;return e._locale=e._locale||D(e._l),null===o||void 0===a&&""===o?u({nullInput:!0}):("string"==typeof o&&(e._i=o=e._locale.preparse(o)),f(o)?new p(X(o)):(i(a)?Ce(e):a?be(e):n(o)?e._d=o:Te(e),t=new p(X(e)),t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t))}function Te(t){var a=t._i;void 0===a?t._d=new Date:n(a)?t._d=new Date((+a)):"string"==typeof a?te(t):i(a)?(t._a=o(a.slice(0),function(e){return parseInt(e,10)}),ve(t)):"object"==typeof a?xe(t):"number"==typeof a?t._d=new Date(a):e.createFromInputFallback(t)}function ke(e,t,i,n,o){var a={};return"boolean"==typeof i&&(n=i,i=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=i,a._i=e,a._f=t,a._strict=n,De(a)}function _e(e,t,i,n){return ke(e,t,i,n,!1)}function Ee(e,t){var n,o;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return _e();for(n=t[0],o=1;o<t.length;++o)t[o][e](n)&&(n=t[o]);return n}function Se(){var e=[].slice.call(arguments,0);
return Ee("isBefore",e)}function Me(){var e=[].slice.call(arguments,0);return Ee("isAfter",e)}function Ae(e){var t=_(e),i=t.year||0,n=t.quarter||0,o=t.month||0,a=t.week||0,s=t.day||0,r=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*r,this._days=+s+7*a,this._months=+o+3*n+12*i,this._data={},this._locale=D(),this._bubble()}function Pe(e){return e instanceof Ae}function Ie(e,t){I(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+P(~~(e/60),2)+t+P(~~e%60,2)})}function Ne(e){var t=(e||"").match(Xi)||[],i=t[t.length-1]||[],n=(i+"").match(wn)||["-",0,0],o=+(60*n[1])+m(n[2]);return"+"===n[0]?o:-o}function Le(t,i){var o,a;return i._isUTC?(o=i.clone(),a=(f(t)||n(t)?+t:+_e(t))-+o,o._d.setTime(+o._d+a),e.updateOffset(o,!1),o):_e(t).local()}function Oe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Fe(t,i){var n,o=this._offset||0;return null!=t?("string"==typeof t&&(t=Ne(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&i&&(n=Oe(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==t&&(!i||this._changeInProgress?Qe(this,qe(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:Oe(this)}function Ue(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function He(e){return this.utcOffset(0,e)}function Be(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Oe(this),"m")),this}function Ye(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ne(this._i)),this}function Re(e){return e=e?_e(e).utcOffset():0,(this.utcOffset()-e)%60===0}function ze(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function We(){if(this._a){var e=this._isUTC?r(this._a):_e(this._a);return this.isValid()&&g(this._a,e.toArray())>0}return!1}function je(){return!this._isUTC}function Ve(){return this._isUTC}function $e(){return this._isUTC&&0===this._offset}function qe(e,t){var i,n,o,s=e,r=null;return Pe(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(r=Cn.exec(e))?(i="-"===r[1]?-1:1,s={y:0,d:m(r[on])*i,h:m(r[an])*i,m:m(r[sn])*i,s:m(r[rn])*i,ms:m(r[ln])*i}):(r=xn.exec(e))?(i="-"===r[1]?-1:1,s={y:Ke(r[2],i),M:Ke(r[3],i),d:Ke(r[4],i),h:Ke(r[5],i),m:Ke(r[6],i),s:Ke(r[7],i),w:Ke(r[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(o=Xe(_e(s.from),_e(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),n=new Ae(s),Pe(e)&&a(e,"_locale")&&(n._locale=e._locale),n}function Ke(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Ge(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Xe(e,t){var i;return t=Le(t,e),e.isBefore(t)?i=Ge(e,t):(i=Ge(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function Ze(e,t){return function(i,n){var o,a;return null===n||isNaN(+n)||(J(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=i,i=n,n=a),i="string"==typeof i?+i:i,o=qe(i,n),Qe(this,o,e),this}}function Qe(t,i,n,o){var a=i._milliseconds,s=i._days,r=i._months;o=null==o||o,a&&t._d.setTime(+t._d+a*n),s&&M(t,"Date",S(t,"Date")+s*n),r&&q(t,S(t,"Month")+r*n),o&&e.updateOffset(t,s||r)}function Je(e){var t=e||_e(),i=Le(t,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,_e(t)))}function et(){return new p(this)}function tt(e,t){var i;return t=k("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:_e(e),+this>+e):(i=f(e)?+e:+_e(e),i<+this.clone().startOf(t))}function it(e,t){var i;return t=k("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:_e(e),+e>+this):(i=f(e)?+e:+_e(e),+this.clone().endOf(t)<i)}function nt(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)}function ot(e,t){var i;return t=k(t||"millisecond"),"millisecond"===t?(e=f(e)?e:_e(e),+this===+e):(i=+_e(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))}function at(e){return 0>e?Math.ceil(e):Math.floor(e)}function st(e,t,i){var n,o,a=Le(e,this),s=6e4*(a.utcOffset()-this.utcOffset());return t=k(t),"year"===t||"month"===t||"quarter"===t?(o=rt(this,a),"quarter"===t?o/=3:"year"===t&&(o/=12)):(n=this-a,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-s)/864e5:"week"===t?(n-s)/6048e5:n),i?o:at(o)}function rt(e,t){var i,n,o=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(o,"months");return 0>t-a?(i=e.clone().add(o-1,"months"),n=(t-a)/(a-i)):(i=e.clone().add(o+1,"months"),n=(t-a)/(i-a)),-(o+n)}function lt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ct(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function dt(t){var i=O(this,t||e.defaultFormat);return this.localeData().postformat(i)}function ut(e,t){return this.isValid()?qe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ht(e){return this.from(_e(),e)}function pt(e,t){return this.isValid()?qe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ft(e){return this.to(_e(),e)}function mt(e){var t;return void 0===e?this._locale._abbr:(t=D(e),null!=t&&(this._locale=t),this)}function gt(){return this._locale}function vt(e){switch(e=k(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function yt(e){return e=k(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function bt(){return+this._d-6e4*(this._offset||0)}function wt(){return Math.floor(+this/1e3)}function Ct(){return this._offset?new Date((+this)):this._d}function xt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Dt(){return d(this)}function Tt(){return s({},c(this))}function kt(){return c(this).overflow}function _t(e,t){I(0,[e,e.length],0,t)}function Et(e,t,i){return re(_e([e,11,31+t-i]),t,i).week}function St(e){var t=re(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Mt(e){var t=re(this,1,4).year;return null==e?t:this.add(e-t,"y")}function At(){return Et(this.year(),1,4)}function Pt(){var e=this.localeData()._week;return Et(this.year(),e.dow,e.doy)}function It(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Nt(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function Lt(e){return this._weekdays[e.day()]}function Ot(e){return this._weekdaysShort[e.day()]}function Ft(e){return this._weekdaysMin[e.day()]}function Ut(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=_e([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Ht(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Nt(e,this.localeData()),this.add(e-t,"d")):t}function Bt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Yt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Rt(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function zt(e,t){return t._meridiemParse}function Wt(e){return"p"===(e+"").toLowerCase().charAt(0)}function jt(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function Vt(e){I(0,[e,3],0,"millisecond")}function $t(){return this._isUTC?"UTC":""}function qt(){return this._isUTC?"Coordinated Universal Time":""}function Kt(e){return _e(1e3*e)}function Gt(){return _e.apply(null,arguments).parseZone()}function Xt(e,t,i){var n=this._calendar[e];return"function"==typeof n?n.call(t,i):n}function Zt(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function Qt(){return this._invalidDate}function Jt(e){return this._ordinal.replace("%d",e)}function ei(e){return e}function ti(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)}function ii(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)}function ni(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function oi(e,t,i,n){var o=D(),a=r().set(n,t);return o[i](a,e)}function ai(e,t,i,n,o){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return oi(e,t,i,o);var a,s=[];for(a=0;n>a;a++)s[a]=oi(e,a,i,o);return s}function si(e,t){return ai(e,t,"months",12,"month")}function ri(e,t){return ai(e,t,"monthsShort",12,"month")}function li(e,t){return ai(e,t,"weekdays",7,"day")}function ci(e,t){return ai(e,t,"weekdaysShort",7,"day")}function di(e,t){return ai(e,t,"weekdaysMin",7,"day")}function ui(){var e=this._data;return this._milliseconds=jn(this._milliseconds),this._days=jn(this._days),this._months=jn(this._months),e.milliseconds=jn(e.milliseconds),e.seconds=jn(e.seconds),e.minutes=jn(e.minutes),e.hours=jn(e.hours),e.months=jn(e.months),e.years=jn(e.years),this}function hi(e,t,i,n){var o=qe(t,i);return e._milliseconds+=n*o._milliseconds,e._days+=n*o._days,e._months+=n*o._months,e._bubble()}function pi(e,t){return hi(this,e,t,1)}function fi(e,t){return hi(this,e,t,-1)}function mi(){var e,t,i,n=this._milliseconds,o=this._days,a=this._months,s=this._data,r=0;return s.milliseconds=n%1e3,e=at(n/1e3),s.seconds=e%60,t=at(e/60),s.minutes=t%60,i=at(t/60),s.hours=i%24,o+=at(i/24),r=at(gi(o)),o-=at(vi(r)),a+=at(o/30),o%=30,r+=at(a/12),a%=12,s.days=o,s.months=a,s.years=r,this}function gi(e){return 400*e/146097}function vi(e){return 146097*e/400}function yi(e){var t,i,n=this._milliseconds;if(e=k(e),"month"===e||"year"===e)return t=this._days+n/864e5,i=this._months+12*gi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(vi(this._months/12)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function bi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12)}function wi(e){return function(){return this.as(e)}}function Ci(e){return e=k(e),this[e+"s"]()}function xi(e){return function(){return this._data[e]}}function Di(){return at(this.days()/7)}function Ti(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function ki(e,t,i){var n=qe(e).abs(),o=so(n.as("s")),a=so(n.as("m")),s=so(n.as("h")),r=so(n.as("d")),l=so(n.as("M")),c=so(n.as("y")),d=o<ro.s&&["s",o]||1===a&&["m"]||a<ro.m&&["mm",a]||1===s&&["h"]||s<ro.h&&["hh",s]||1===r&&["d"]||r<ro.d&&["dd",r]||1===l&&["M"]||l<ro.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=i,Ti.apply(null,d)}function _i(e,t){return void 0!==ro[e]&&(void 0===t?ro[e]:(ro[e]=t,!0))}function Ei(e){var t=this.localeData(),i=ki(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function Si(){var e=lo(this.years()),t=lo(this.months()),i=lo(this.days()),n=lo(this.hours()),o=lo(this.minutes()),a=lo(this.seconds()+this.milliseconds()/1e3),s=this.asSeconds();return s?(0>s?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||o||a?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(a?a+"S":""):"P0D"}var Mi,Ai,Pi=e.momentProperties=[],Ii=!1,Ni={},Li={},Oi=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Fi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ui={},Hi={},Bi=/\d/,Yi=/\d\d/,Ri=/\d{3}/,zi=/\d{4}/,Wi=/[+-]?\d{6}/,ji=/\d\d?/,Vi=/\d{1,3}/,$i=/\d{1,4}/,qi=/[+-]?\d{1,6}/,Ki=/\d+/,Gi=/[+-]?\d+/,Xi=/Z|[+-]\d\d:?\d\d/gi,Zi=/[+-]?\d+(\.\d{1,3})?/,Qi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ji={},en={},tn=0,nn=1,on=2,an=3,sn=4,rn=5,ln=6;I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),T("month","M"),U("M",ji),U("MM",ji,Yi),U("MMM",Qi),U("MMMM",Qi),Y(["M","MM"],function(e,t){t[nn]=m(e)-1}),Y(["MMM","MMMM"],function(e,t,i,n){var o=i._locale.monthsParse(e,n,i._strict);null!=o?t[nn]=o:c(i).invalidMonth=e});var cn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),un={};e.suppressDeprecationWarnings=!1;var hn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],fn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],mn=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=Q("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),T("year","y"),U("Y",Gi),U("YY",ji,Yi),U("YYYY",$i,zi),U("YYYYY",qi,Wi),U("YYYYYY",qi,Wi),Y(["YYYY","YYYYY","YYYYYY"],tn),Y("YY",function(t,i){i[tn]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return m(e)+(m(e)>68?1900:2e3)};var gn=E("FullYear",!1);I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),T("week","w"),T("isoWeek","W"),U("w",ji),U("ww",ji,Yi),U("W",ji),U("WW",ji,Yi),R(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=m(e)});var vn={dow:0,doy:6};I("DDD",["DDDD",3],"DDDo","dayOfYear"),T("dayOfYear","DDD"),U("DDD",Vi),U("DDDD",Ri),Y(["DDD","DDDD"],function(e,t,i){i._dayOfYear=m(e)}),e.ISO_8601=function(){};var yn=Q("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=_e.apply(null,arguments);return this>e?this:e}),bn=Q("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=_e.apply(null,arguments);return e>this?this:e});Ie("Z",":"),Ie("ZZ",""),U("Z",Xi),U("ZZ",Xi),Y(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Ne(e)});var wn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Cn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,xn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;qe.fn=Ae.prototype;var Dn=Ze(1,"add"),Tn=Ze(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var kn=Q("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),_t("gggg","weekYear"),_t("ggggg","weekYear"),_t("GGGG","isoWeekYear"),_t("GGGGG","isoWeekYear"),T("weekYear","gg"),T("isoWeekYear","GG"),U("G",Gi),U("g",Gi),U("GG",ji,Yi),U("gg",ji,Yi),U("GGGG",$i,zi),U("gggg",$i,zi),U("GGGGG",qi,Wi),U("ggggg",qi,Wi),R(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=m(e)}),R(["gg","GG"],function(t,i,n,o){i[o]=e.parseTwoDigitYear(t)}),I("Q",0,0,"quarter"),T("quarter","Q"),U("Q",Bi),Y("Q",function(e,t){t[nn]=3*(m(e)-1)}),I("D",["DD",2],"Do","date"),T("date","D"),U("D",ji),U("DD",ji,Yi),U("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),Y(["D","DD"],on),Y("Do",function(e,t){t[on]=m(e.match(ji)[0],10)});var _n=E("Date",!0);I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),T("day","d"),T("weekday","e"),T("isoWeekday","E"),U("d",ji),U("e",ji),U("E",ji),U("dd",Qi),U("ddd",Qi),U("dddd",Qi),R(["dd","ddd","dddd"],function(e,t,i){var n=i._locale.weekdaysParse(e);null!=n?t.d=n:c(i).invalidWeekday=e}),R(["d","e","E"],function(e,t,i,n){t[n]=m(e)});var En="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Sn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");I("H",["HH",2],0,"hour"),I("h",["hh",2],0,function(){return this.hours()%12||12}),Rt("a",!0),Rt("A",!1),T("hour","h"),U("a",zt),U("A",zt),U("H",ji),U("h",ji),U("HH",ji,Yi),U("hh",ji,Yi),Y(["H","HH"],an),Y(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),Y(["h","hh"],function(e,t,i){t[an]=m(e),c(i).bigHour=!0});var An=/[ap]\.?m?\.?/i,Pn=E("Hours",!0);I("m",["mm",2],0,"minute"),T("minute","m"),U("m",ji),U("mm",ji,Yi),Y(["m","mm"],sn);var In=E("Minutes",!1);I("s",["ss",2],0,"second"),T("second","s"),U("s",ji),U("ss",ji,Yi),Y(["s","ss"],rn);var Nn=E("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Vt("SSS"),Vt("SSSS"),T("millisecond","ms"),U("S",Vi,Bi),U("SS",Vi,Yi),U("SSS",Vi,Ri),U("SSSS",Ki),Y(["S","SS","SSS","SSSS"],function(e,t){t[ln]=m(1e3*("0."+e))});var Ln=E("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var On=p.prototype;On.add=Dn,On.calendar=Je,On.clone=et,On.diff=st,On.endOf=yt,On.format=dt,On.from=ut,On.fromNow=ht,On.to=pt,On.toNow=ft,On.get=A,On.invalidAt=kt,On.isAfter=tt,On.isBefore=it,On.isBetween=nt,On.isSame=ot,On.isValid=Dt,On.lang=kn,On.locale=mt,On.localeData=gt,On.max=bn,On.min=yn,On.parsingFlags=Tt,On.set=A,On.startOf=vt,On.subtract=Tn,On.toArray=xt,On.toDate=Ct,On.toISOString=ct,On.toJSON=ct,On.toString=lt,On.unix=wt,On.valueOf=bt,On.year=gn,On.isLeapYear=se,On.weekYear=St,On.isoWeekYear=Mt,On.quarter=On.quarters=It,On.month=K,On.daysInMonth=G,On.week=On.weeks=ue,On.isoWeek=On.isoWeeks=he,On.weeksInYear=Pt,On.isoWeeksInYear=At,On.date=_n,On.day=On.days=Ht,On.weekday=Bt,On.isoWeekday=Yt,On.dayOfYear=fe,On.hour=On.hours=Pn,On.minute=On.minutes=In,On.second=On.seconds=Nn,On.millisecond=On.milliseconds=Ln,On.utcOffset=Fe,On.utc=He,On.local=Be,On.parseZone=Ye,On.hasAlignedHourOffset=Re,On.isDST=ze,On.isDSTShifted=We,On.isLocal=je,On.isUtcOffset=Ve,On.isUtc=$e,On.isUTC=$e,On.zoneAbbr=$t,On.zoneName=qt,On.dates=Q("dates accessor is deprecated. Use date instead.",_n),On.months=Q("months accessor is deprecated. Use month instead",K),On.years=Q("years accessor is deprecated. Use year instead",gn),On.zone=Q("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ue);var Fn=On,Un={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Hn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Bn="Invalid date",Yn="%d",Rn=/\d{1,2}/,zn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Wn=v.prototype;Wn._calendar=Un,Wn.calendar=Xt,Wn._longDateFormat=Hn,Wn.longDateFormat=Zt,Wn._invalidDate=Bn,Wn.invalidDate=Qt,Wn._ordinal=Yn,Wn.ordinal=Jt,Wn._ordinalParse=Rn,Wn.preparse=ei,Wn.postformat=ei,Wn._relativeTime=zn,Wn.relativeTime=ti,Wn.pastFuture=ii,Wn.set=ni,Wn.months=j,Wn._months=cn,Wn.monthsShort=V,Wn._monthsShort=dn,Wn.monthsParse=$,Wn.week=le,Wn._week=vn,Wn.firstDayOfYear=de,Wn.firstDayOfWeek=ce,Wn.weekdays=Lt,Wn._weekdays=En,Wn.weekdaysMin=Ft,Wn._weekdaysMin=Mn,Wn.weekdaysShort=Ot,Wn._weekdaysShort=Sn,Wn.weekdaysParse=Ut,Wn.isPM=Wt,Wn._meridiemParse=An,Wn.meridiem=jt,C("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),e.lang=Q("moment.lang is deprecated. Use moment.locale instead.",C),e.langData=Q("moment.langData is deprecated. Use moment.localeData instead.",D);var jn=Math.abs,Vn=wi("ms"),$n=wi("s"),qn=wi("m"),Kn=wi("h"),Gn=wi("d"),Xn=wi("w"),Zn=wi("M"),Qn=wi("y"),Jn=xi("milliseconds"),eo=xi("seconds"),to=xi("minutes"),io=xi("hours"),no=xi("days"),oo=xi("months"),ao=xi("years"),so=Math.round,ro={s:45,m:45,h:22,d:26,M:11},lo=Math.abs,co=Ae.prototype;co.abs=ui,co.add=pi,co.subtract=fi,co.as=yi,co.asMilliseconds=Vn,co.asSeconds=$n,co.asMinutes=qn,co.asHours=Kn,co.asDays=Gn,co.asWeeks=Xn,co.asMonths=Zn,co.asYears=Qn,co.valueOf=bi,co._bubble=mi,co.get=Ci,co.milliseconds=Jn,co.seconds=eo,co.minutes=to,co.hours=io,co.days=no,co.weeks=Di,co.months=oo,co.years=ao,co.humanize=Ei,co.toISOString=Si,co.toString=Si,co.toJSON=Si,co.locale=mt,co.localeData=gt,co.toIsoString=Q("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Si),co.lang=kn,I("X",0,0,"unix"),I("x",0,0,"valueOf"),U("x",Gi),U("X",Zi),Y("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),Y("x",function(e,t,i){i._d=new Date(m(e))}),e.version="2.10.3",t(_e),e.fn=Fn,e.min=Se,e.max=Me,e.utc=r,e.unix=Kt,e.months=si,e.isDate=n,e.locale=C,e.invalid=u,e.duration=qe,e.isMoment=f,e.weekdays=li,e.parseZone=Gt,e.localeData=D,e.isDuration=Pe,e.monthsShort=ri,e.weekdaysMin=di,e.defineLocale=x,e.weekdaysShort=ci,e.normalizeUnits=k,e.relativeTimeThreshold=_i;var uo=e;return uo}),!function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(t,i){var a=this;this.element=e(t),this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in n?this.language:"en",this.isRTL=n[this.language].rtl||"rtl"==e("body").css("direction"),this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=o.parseFormat(i.format||this.element.data("date-format")||n[this.language].format||o.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".date-set").parent(),this.componentReset=!!this.element.is(".date")&&this.element.find(".date-reset").parent(),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=o.parseFormat(i.linkFormat||this.element.data("link-format")||o.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=o.convertViewMode(this.minView),this.maxView=o.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=o.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=o.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=o.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=e(o.template).appendTo(this.isInline?this.element:"body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(e.fn.mousewheel?this.picker.on({mousewheel:e.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("fa-arrow-left fa-arrow-right")),e(document).on("mousedown",function(t){0===e(t.target).closest(".datetimepicker").length&&a.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||n[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t,i,n=0;n<this._events.length;n++)t=this._events[n][0],i=this._events[n][1],t.on(i)},_detachEvents:function(){for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.off(t);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){e>=this.startDate&&e<=this.endDate?(this.date=e,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})},setFormat:function(e){this.format=o.parseFormat(e,this.formatType);var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val()&&this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t)),this.linkField&&e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(e){return void 0==e&&(e=this.format),o.formatDate(this.date,e,this.language,this.formatType)},setStartDate:function(e){this.startDate=e||-1/0,this.startDate!==-1/0&&(this.startDate=o.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||1/0,1/0!==this.endDate&&(this.endDate=o.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t,i,n,o=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10;this.component?(t=this.component.offset(),n=t.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(n+=this.component.outerWidth()-this.picker.outerWidth())):(t=this.element.offset(),n=t.left),i="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?t.top-this.picker.outerHeight():t.top+this.height,this.picker.css({top:i,left:n,zIndex:o})}},update:function(){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):e=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate,
e||(e=new Date,t=!1),this.date=o.parseDate(e,this.format,this.language,this.formatType),t&&this.setValue(),this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow">'+n[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+n[this.language].monthsShort[t++]+"</span>";this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(null!=this.date&&null!=this.viewDate){var i=new Date(this.viewDate),a=i.getUTCFullYear(),s=i.getUTCMonth(),r=i.getUTCDate(),l=i.getUTCHours(),c=i.getUTCMinutes(),d=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,u=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,h=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,p=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,f=new t(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(n[this.language].months[s]+" "+a),"time"==this.formatViewType){var g=l%12?l%12:12,v=(10>g?"0":"")+g,y=(10>c?"0":"")+c,b=n[this.language].meridiem[12>l?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v+":"+y+" "+b.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v+":"+y+" "+b.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+" "+n[this.language].months[s]+" "+a),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+" "+n[this.language].months[s]+" "+a);this.picker.find("tfoot th.today").text(n[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var w=t(a,s-1,28,0,0,0,0),C=o.getDaysInMonth(w.getUTCFullYear(),w.getUTCMonth());w.setUTCDate(C),w.setUTCDate(C-(w.getUTCDay()-this.weekStart+7)%7);var x=new Date(w);x.setUTCDate(x.getUTCDate()+42),x=x.valueOf();for(var D,T=[];w.valueOf()<x;)w.getUTCDay()==this.weekStart&&T.push("<tr>"),D="",w.getUTCFullYear()<a||w.getUTCFullYear()==a&&w.getUTCMonth()<s?D+=" old":(w.getUTCFullYear()>a||w.getUTCFullYear()==a&&w.getUTCMonth()>s)&&(D+=" new"),this.todayHighlight&&w.getUTCFullYear()==m.getFullYear()&&w.getUTCMonth()==m.getMonth()&&w.getUTCDate()==m.getDate()&&(D+=" today"),w.valueOf()==f&&(D+=" active"),(w.valueOf()+864e5<=this.startDate||w.valueOf()>this.endDate||-1!==e.inArray(w.getUTCDay(),this.daysOfWeekDisabled))&&(D+=" disabled"),T.push('<td class="day'+D+'">'+w.getUTCDate()+"</td>"),w.getUTCDay()==this.weekEnd&&T.push("</tr>"),w.setUTCDate(w.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(T.join("")),T=[];for(var k="",_="",E="",S=0;24>S;S++){var M=t(a,s,r,S);D="",M.valueOf()+36e5<=this.startDate||M.valueOf()>this.endDate?D+=" disabled":l==S&&(D+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(_=12>S?n[this.language].meridiem[0]:n[this.language].meridiem[1],_!=E&&(""!=E&&T.push("</fieldset>"),T.push('<fieldset class="hour"><legend>'+_.toUpperCase()+"</legend>")),E=_,k=S%12?S%12:12,T.push('<span class="hour'+D+" hour_"+(12>S?"am":"pm")+'">'+k+"</span>"),23==S&&T.push("</fieldset>")):(k=S+":00",T.push('<span class="hour'+D+'">'+k+"</span>"))}this.picker.find(".datetimepicker-hours td").html(T.join("")),T=[],k="",_="",E="";for(var S=0;60>S;S+=this.minuteStep){var M=t(a,s,r,l,S,0);D="",M.valueOf()<this.startDate||M.valueOf()>this.endDate?D+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(S/this.minuteStep)&&(D+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(_=12>l?n[this.language].meridiem[0]:n[this.language].meridiem[1],_!=E&&(""!=E&&T.push("</fieldset>"),T.push('<fieldset class="minute"><legend>'+_.toUpperCase()+"</legend>")),E=_,k=l%12?l%12:12,T.push('<span class="minute'+D+'">'+k+":"+(10>S?"0"+S:S)+"</span>"),59==S&&T.push("</fieldset>")):(k=S+":00",T.push('<span class="minute'+D+'">'+l+":"+(10>S?"0"+S:S)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(T.join(""));var A=this.date.getUTCFullYear(),P=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(a).end().find("span").removeClass("active");A==a&&P.eq(this.date.getUTCMonth()).addClass("active"),(d>a||a>h)&&P.addClass("disabled"),a==d&&P.slice(0,u).addClass("disabled"),a==h&&P.slice(p+1).addClass("disabled"),T="",a=10*parseInt(a/10,10);var I=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(a+"-"+(a+9)).end().find("td");a-=1;for(var S=-1;11>S;S++)T+='<span class="year'+(-1==S||10==S?" old":"")+(A==a?" active":"")+(d>a||a>h?" disabled":"")+'">'+a+"</span>",a+=1;I.html(T),this.place()}},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),o=e.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&o<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&o>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(t){if(t.preventDefault(),t.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=t.originalEvent,n=i.wheelDelta,o=n>0?1:0===n?0:-1;this.wheelViewModeNavigationInverseDirection&&(o=-o),this.showMode(o),setTimeout(e.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(i){i.stopPropagation(),i.preventDefault();var n=e(i.target).closest("span, td, th, legend");if(1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var a=o.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,a);break;case 1:this.viewDate=this.moveDate(this.viewDate,a);break;case 2:this.viewDate=this.moveMonth(this.viewDate,a);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,a)}this.fill();break;case"today":var s=new Date;s=t(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(s),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),l=n.parent().find("span").index(n),c=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(t(r,l,c,d,u,h,0))):n.is(".year")?(this.viewDate.setUTCDate(1),r=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(r),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(t(r,l,c,d,u,h,0))):n.is(".hour")?(d=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==d&&n.hasClass("hour_am")?d=0:12!=d&&n.hasClass("hour_pm")&&(d+=12)),this.viewDate.setUTCHours(d),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(t(r,l,c,d,u,h,0))):n.is(".minute")&&(u=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(u),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(t(r,l,c,d,u,h,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var c=parseInt(n.text(),10)||1,r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();n.is(".old")?0===l?(l=11,r-=1):l-=1:n.is(".new")&&(11==l?(l=0,r+=1):l+=1),this.viewDate.setUTCFullYear(r),this.viewDate.setUTCMonth(l),this.viewDate.setUTCDate(c),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(t(r,l,c,d,u,h,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(e,t){t&&"date"!=t||(this.date=e),t&&"view"!=t||(this.viewDate=e),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&(!t||"date"==t)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep),i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCHours(i.getUTCHours()+t),i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCDate(i.getUTCDate()+t),i},moveMonth:function(e,t){if(!t)return e;var i,n,o=new Date(e.valueOf()),a=o.getUTCDate(),s=o.getUTCMonth(),r=Math.abs(t);if(t=t>0?1:-1,1==r)n=-1==t?function(){return o.getUTCMonth()==s}:function(){return o.getUTCMonth()!=i},i=s+t,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;r>l;l++)o=this.moveMonth(o,t);i=o.getUTCMonth(),o.setUTCDate(a),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--a),o.setUTCMonth(i);return o},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,n,o=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=37==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,t),n=this.moveDate(this.viewDate,t)):1==viewMode?(i=this.moveHour(this.date,t),n=this.moveHour(this.viewDate,t)):0==viewMode&&(i=this.moveMinute(this.date,t),n=this.moveMinute(this.viewDate,t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=38==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,7*t),n=this.moveDate(this.viewDate,7*t)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*t),n=this.moveHour(this.viewDate,6*t)):(i=this.moveHour(this.date,4*t),n=this.moveHour(this.viewDate,4*t)):0==viewMode&&(i=this.moveMinute(this.date,4*t),n=this.moveMinute(this.viewDate,4*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 13:if(0!=this.viewMode){var a=this.viewMode;this.showMode(-1),this.fill(),a==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();e.preventDefault();break;case 9:this.hide()}if(o){var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(o.modes.length-1,this.viewMode+e));t>=this.minView&&t<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t}),this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+o.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")}},e.fn.datetimepicker=function(t){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var o=e(this),a=o.data("datetimepicker"),s="object"==typeof t&&t;a||o.data("datetimepicker",a=new i(this,e.extend({},e.fn.datetimepicker.defaults,s))),"string"==typeof t&&"function"==typeof a[t]&&a[t].apply(a,n)})},e.fn.datetimepicker.defaults={},e.fn.datetimepicker.Constructor=i;var n=e.fn.datetimepicker.dates={en:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],meridiem:["上午","下午"],suffix:[],today:"今天"}},o={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return 0===e%4&&0!==e%100||0===e%400},getDaysInMonth:function(e,t){return[31,o.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if("standard"==e)return"input"==t?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==e)return"input"==t?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(e){if("standard"==e)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==e)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\0").split("\0"),n=e.match(this.validParts(t));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(o,a,s,r){if(o instanceof Date){var l=new Date(o.valueOf()-6e4*o.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(o)&&(a=this.parseFormat("yyyy-mm-dd",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(o)&&(a=this.parseFormat("yyyy-mm-dd hh:ii",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(o)&&(a=this.parseFormat("yyyy-mm-dd hh:ii:ss",r)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(o)){var c,d,u=/([-+]\d+)([dmwy])/,h=o.match(/([-+]\d+)([dmwy])/g);o=new Date;for(var p=0;p<h.length;p++)switch(c=u.exec(h[p]),d=parseInt(c[1]),c[2]){case"d":o.setUTCDate(o.getUTCDate()+d);break;case"m":o=i.prototype.moveMonth.call(i.prototype,o,d);break;case"w":o.setUTCDate(o.getUTCDate()+7*d);break;case"y":o=i.prototype.moveYear.call(i.prototype,o,d)}return t(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),0)}var f,m,c,h=o&&o.match(this.nonpunctuation)||[],o=new Date(0,0,0,0,0,0,0),g={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],y={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(12==t?0:t)},H:function(e,t){return e.setUTCHours(12==t?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(1==t?e.getUTCHours()+12:e.getUTCHours())}};if(y.M=y.MM=y.mm=y.m,y.dd=y.d,y.P=y.p,o=t(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()),h.length==a.parts.length){for(var p=0,b=a.parts.length;b>p;p++){if(f=parseInt(h[p],10),c=a.parts[p],isNaN(f))switch(c){case"MM":m=e(n[s].months).filter(function(){var e=this.slice(0,h[p].length),t=h[p].slice(0,e.length);return e==t}),f=e.inArray(m[0],n[s].months)+1;break;case"M":m=e(n[s].monthsShort).filter(function(){var e=this.slice(0,h[p].length),t=h[p].slice(0,e.length);return e==t}),f=e.inArray(m[0],n[s].monthsShort)+1;break;case"p":case"P":f=e.inArray(h[p].toLowerCase(),n[s].meridiem)}g[c]=f}for(var w,p=0;p<v.length;p++)w=v[p],w in g&&!isNaN(g[w])&&y[w](o,g[w])}return o},formatDate:function(t,i,a,s){if(null==t)return"";var r;if("standard"==s)r={yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:n[a].monthsShort[t.getUTCMonth()],MM:n[a].months[t.getUTCMonth()],d:t.getUTCDate(),D:n[a].daysShort[t.getUTCDay()],DD:n[a].days[t.getUTCDay()],p:2==n[a].meridiem.length?n[a].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},r.H=0==r.h%12?12:r.h%12,r.HH=(r.H<10?"0":"")+r.H,r.P=r.p.toUpperCase(),r.hh=(r.h<10?"0":"")+r.h,r.ii=(r.i<10?"0":"")+r.i,r.ss=(r.s<10?"0":"")+r.s,r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;else{if("php"!=s)throw new Error("Invalid format type.");r={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:n[a].months[t.getUTCMonth()],M:n[a].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:o.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:n[a].days[t.getUTCDay()],D:n[a].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:0==t.getUTCDay()?7:t.getUTCDay(),S:t.getUTCDate()%10<=n[a].suffix.length?n[a].suffix[t.getUTCDate()%10-1]:"",a:2==n[a].meridiem.length?n[a].meridiem[t.getUTCHours()<12?0:1]:"",g:0==t.getUTCHours()%12?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},r.m=(r.n<10?"0":"")+r.n,r.d=(r.j<10?"0":"")+r.j,r.A=r.a.toString().toUpperCase(),r.h=(r.g<10?"0":"")+r.g,r.H=(r.G<10?"0":"")+r.G,r.i=(r.i<10?"0":"")+r.i,r.s=(r.s<10?"0":"")+r.s}for(var t=[],l=e.extend([],i.separators),c=0,d=i.parts.length;d>c;c++)l.length&&t.push(l.shift()),t.push(r[i.parts[c]]);return t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0}return e},headTemplate:'<thead><tr><th class="prev"><i class="fa fa-angle-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="fa fa-angle-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};o.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+o.headTemplate+"<tbody></tbody>"+o.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table></div></div>",e.fn.datetimepicker.DPGlobal=o,e.fn.datetimepicker.noConflict=function(){return e.fn.datetimepicker=old,this},e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=e(this);i.data("datetimepicker")||(t.preventDefault(),i.datetimepicker("show"))}),e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),this.MediumInsert=this.MediumInsert||{},this.MediumInsert.Templates=this.MediumInsert.Templates||{},this.MediumInsert.Templates["src/js/templates/core-buttons.hbs"]=Handlebars.template({1:function(e,t,i,n,o){var a,s,r=null!=t?t:{},l=i.helperMissing,c="function";return'            <li><a data-addon="'+e.escapeExpression((s=null!=(s=i.key||o&&o.key)?s:l,typeof s===c?s.call(r,{name:"key",hash:{},data:o}):s))+'" data-action="add" class="medium-insert-action">'+(null!=(s=null!=(s=i.label||(null!=t?t.label:t))?s:l,a=typeof s===c?s.call(r,{name:"label",hash:{},data:o}):s)?a:"")+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){var a;return'<div class="medium-insert-buttons" contenteditable="false" style="display: none">\n    <a class="medium-insert-buttons-show">+</a>\n    <ul class="medium-insert-buttons-addons" style="display: none">\n'+(null!=(a=i.each.call(null!=t?t:{},null!=t?t.addons:t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+"    </ul>\n</div>\n"},useData:!0}),this.MediumInsert.Templates["src/js/templates/core-caption.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){var a;return'<figcaption contenteditable="true" class="medium-insert-caption-placeholder" data-placeholder="'+e.escapeExpression((a=null!=(a=i.placeholder||(null!=t?t.placeholder:t))?a:i.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"placeholder",hash:{},data:o}):a))+'"></figcaption>'},useData:!0}),this.MediumInsert.Templates["src/js/templates/core-empty-line.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){return"<p><br></p>\n"},useData:!0}),this.MediumInsert.Templates["src/js/templates/embeds-toolbar.hbs"]=Handlebars.template({1:function(e,t,i,n,o){var a;return'    <div class="medium-insert-embeds-toolbar medium-editor-toolbar medium-toolbar-arrow-under medium-editor-toolbar-active">\n        <ul class="medium-editor-toolbar-actions clearfix">\n'+(null!=(a=i.each.call(null!=t?t:{},null!=t?t.styles:t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o}))?a:"")+"        </ul>\n    </div>\n"},2:function(e,t,i,n,o){var a;return null!=(a=i["if"].call(null!=t?t:{},null!=t?t.label:t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o}))?a:""},3:function(e,t,i,n,o){var a,s,r=null!=t?t:{},l=i.helperMissing,c="function";return'                    <li>\n                        <button class="medium-editor-action" data-action="'+e.escapeExpression((s=null!=(s=i.key||o&&o.key)?s:l,typeof s===c?s.call(r,{name:"key",hash:{},data:o}):s))+'">'+(null!=(s=null!=(s=i.label||(null!=t?t.label:t))?s:l,a=typeof s===c?s.call(r,{name:"label",hash:{},data:o}):s)?a:"")+"</button>\n                    </li>\n"},5:function(e,t,i,n,o){var a;return'    <div class="medium-insert-embeds-toolbar2 medium-editor-toolbar medium-editor-toolbar-active">\n        <ul class="medium-editor-toolbar-actions clearfix">\n'+(null!=(a=i.each.call(null!=t?t:{},null!=t?t.actions:t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o}))?a:"")+"        </ul>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){var a,s=null!=t?t:{};return(null!=(a=i["if"].call(s,null!=t?t.styles:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+"\n"+(null!=(a=i["if"].call(s,null!=t?t.actions:t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o}))?a:"")},useData:!0}),this.MediumInsert.Templates["src/js/templates/embeds-wrapper.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){var a,s;return'<div class="medium-insert-embeds" contenteditable="false">\n\t<figure>\n\t\t<div class="medium-insert-embed">\n\t\t\t'+(null!=(s=null!=(s=i.html||(null!=t?t.html:t))?s:i.helperMissing,a="function"==typeof s?s.call(null!=t?t:{},{name:"html",hash:{},data:o}):s)?a:"")+'\n\t\t</div>\n\t</figure>\n\t<div class="medium-insert-embeds-overlay"></div>\n</div>'},useData:!0}),this.MediumInsert.Templates["src/js/templates/images-fileupload.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){return'<input type="file" multiple>'},useData:!0}),this.MediumInsert.Templates["src/js/templates/images-image.hbs"]=Handlebars.template({1:function(e,t,i,n,o){return'        <div class="medium-insert-images-progress"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){var a,s,r=null!=t?t:{};return'<figure contenteditable="false">\n    <img src="'+e.escapeExpression((s=null!=(s=i.img||(null!=t?t.img:t))?s:i.helperMissing,"function"==typeof s?s.call(r,{name:"img",hash:{},data:o}):s))+'" alt="">\n'+(null!=(a=i["if"].call(r,null!=t?t.progress:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+"</figure>"},useData:!0}),this.MediumInsert.Templates["src/js/templates/images-progressbar.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){return'<progress min="0" max="100" value="0">0</progress>'},useData:!0}),this.MediumInsert.Templates["src/js/templates/images-toolbar.hbs"]=Handlebars.template({1:function(e,t,i,n,o){var a;return null!=(a=i["if"].call(null!=t?t:{},null!=t?t.label:t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o}))?a:""},2:function(e,t,i,n,o){var a,s,r=null!=t?t:{},l=i.helperMissing,c="function";return'                <li>\n                    <button class="medium-editor-action" data-action="'+e.escapeExpression((s=null!=(s=i.key||o&&o.key)?s:l,typeof s===c?s.call(r,{name:"key",hash:{},data:o}):s))+'">'+(null!=(s=null!=(s=i.label||(null!=t?t.label:t))?s:l,a=typeof s===c?s.call(r,{name:"label",hash:{},data:o}):s)?a:"")+"</button>\n                </li>\n"},4:function(e,t,i,n,o){var a;return'\t<div class="medium-insert-images-toolbar2 medium-editor-toolbar medium-editor-toolbar-active">\n\t\t<ul class="medium-editor-toolbar-actions clearfix">\n'+(null!=(a=i.each.call(null!=t?t:{},null!=t?t.actions:t,{name:"each",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o}))?a:"")+"    \t</ul>\n    </div>\n"},5:function(e,t,i,n,o){var a;return null!=(a=i["if"].call(null!=t?t:{},null!=t?t.label:t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o}))?a:""},6:function(e,t,i,n,o){var a,s,r=null!=t?t:{},l=i.helperMissing,c="function";return'        \t        <li>\n        \t            <button class="medium-editor-action" data-action="'+e.escapeExpression((s=null!=(s=i.key||o&&o.key)?s:l,typeof s===c?s.call(r,{name:"key",hash:{},data:o}):s))+'">'+(null!=(s=null!=(s=i.label||(null!=t?t.label:t))?s:l,a=typeof s===c?s.call(r,{name:"label",hash:{},data:o}):s)?a:"")+"</button>\n        \t        </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,o){var a,s=null!=t?t:{};return'<div class="medium-insert-images-toolbar medium-editor-toolbar medium-toolbar-arrow-under medium-editor-toolbar-active">\n    <ul class="medium-editor-toolbar-actions clearfix">\n'+(null!=(a=i.each.call(s,null!=t?t.styles:t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+"    </ul>\n</div>\n\n"+(null!=(a=i["if"].call(s,null!=t?t.actions:t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o}))?a:"")},useData:!0}),function(e,t,i,n){"use strict";function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(i,n){var o;this.el=i,this.$el=e(i),this.templates=t.MediumInsert.Templates,n&&(o=n.editor,n.editor=null),this.options=e.extend(!0,{},r,n),this.options.editor=o,this._defaults=r,this._name=s,this.options&&this.options.editor&&(this.options.editor._serialize=this.options.editor.serialize,this.options.editor._destroy=this.options.editor.destroy,this.options.editor._setup=this.options.editor.setup,this.options.editor._hideInsertButtons=this.hideButtons,this.options.editor.serialize=this.editorSerialize,this.options.editor.destroy=this.editorDestroy,this.options.editor.setup=this.editorSetup,this.options.editor.getExtensionByName("placeholder").updatePlaceholder=this.editorUpdatePlaceholder)}var s="mediumInsert",r={editor:null,enabled:!0,addons:{images:!0,embeds:!0},insertBtnPositionFix:{left:0,top:0}};a.prototype.init=function(){this.$el.addClass("medium-editor-insert-plugin"),"object"==typeof this.options.addons&&0!==Object.keys(this.options.addons).length||this.disable(),this.initAddons(),this.clean(),this.events()},a.prototype.events=function(){var i=this;this.$el.on("dragover drop",function(e){e.preventDefault()}).on("keyup click",e.proxy(this,"toggleButtons")).on("selectstart mousedown",".medium-insert, .medium-insert-buttons",e.proxy(this,"disableSelection")).on("click",".medium-insert-buttons-show",e.proxy(this,"toggleAddons")).on("click",".medium-insert-action",e.proxy(this,"addonAction")).on("paste",".medium-insert-caption-placeholder",function(t){e.proxy(i,"removeCaptionPlaceholder")(e(t.target))}),e(t).on("resize",e.proxy(this,"positionButtons",null))},a.prototype.getEditor=function(){return this.options.editor},a.prototype.editorSerialize=function(){var t=this._serialize();return e.each(t,function(i){var n=e("<div />").html(t[i].value);n.find(".medium-insert-buttons").remove(),t[i].value=n.html()}),t},a.prototype.editorDestroy=function(){e.each(this.elements,function(t,i){e(i).data("plugin_"+s).disable()}),this._destroy()},a.prototype.editorSetup=function(){this._setup(),e.each(this.elements,function(t,i){e(i).data("plugin_"+s).enable()})},a.prototype.editorUpdatePlaceholder=function(t){var i,n=e(t).clone();n.find(".medium-insert-buttons").remove(),i=n.html().replace(/^\s+|\s+$/g,"").replace(/^<p( class="medium-insert-active")?><br><\/p>$/,""),t.querySelector("img, blockquote")||""!==i?this.hidePlaceholder(t):(this.showPlaceholder(t),this.base._hideInsertButtons(e(t)))},a.prototype.triggerInput=function(){this.getEditor()&&this.getEditor().trigger("editableInput",null,this.el)},a.prototype.deselect=function(){i.getSelection().removeAllRanges()},a.prototype.disable=function(){this.options.enabled=!1,this.$el.find(".medium-insert-buttons").addClass("hide")},a.prototype.enable=function(){this.options.enabled=!0,this.$el.find(".medium-insert-buttons").removeClass("hide")},a.prototype.disableSelection=function(t){var i=e(t.target);(i.is("img")===!1||i.hasClass("medium-insert-buttons-show"))&&t.preventDefault()},a.prototype.initAddons=function(){var t=this;this.options.addons&&0!==this.options.addons.length&&e.each(this.options.addons,function(e,i){var n=s+o(e);return i===!1?void delete t.options.addons[e]:(t.$el[n](i),void(t.options.addons[e]=t.$el.data("plugin_"+n).options))})},a.prototype.clean=function(){var t,i,n,o=this;this.options.enabled!==!1&&(""!==this.$el.html().trim()&&"<br>"!==this.$el.html().trim()||this.$el.html(this.templates["src/js/templates/core-empty-line.hbs"]().trim()),n=this.$el.contents().filter(function(){return"#text"===this.nodeName&&""!==e.trim(e(this).text())}),n.each(function(){e(this).wrap("<p />"),o.moveCaret(e(this).parent(),e(this).text().length)}),this.addButtons(),t=this.$el.find(".medium-insert-buttons"),i=t.prev(),i.attr("class")&&i.attr("class").match(/medium\-insert(?!\-active)/)&&t.before(this.templates["src/js/templates/core-empty-line.hbs"]().trim()));
},a.prototype.getButtons=function(){if(this.options.enabled!==!1)return this.templates["src/js/templates/core-buttons.hbs"]({addons:this.options.addons}).trim()},a.prototype.addButtons=function(){0===this.$el.find(".medium-insert-buttons").length&&this.$el.append(this.getButtons())},a.prototype.toggleButtons=function(i){var n,o,a,s,r=e(i.target),l=t.getSelection(),c=this;this.options.enabled!==!1&&(l&&0!==l.rangeCount?(n=l.getRangeAt(0),o=e(n.commonAncestorContainer)):o=r,o.hasClass("medium-editor-insert-plugin")&&(o=o.find("p:first")),a=o.is("p")?o:o.closest("p"),this.clean(),r.hasClass("medium-editor-placeholder")===!1&&0===r.closest(".medium-insert-buttons").length&&0===o.closest(".medium-insert-buttons").length&&(this.$el.find(".medium-insert-active").removeClass("medium-insert-active"),e.each(this.options.addons,function(e){if(r.closest(".medium-insert-"+e).length&&(o=r),o.closest(".medium-insert-"+e).length)return a=o.closest(".medium-insert-"+e),void(s=e)}),a.length&&(""===a.text().trim()&&!s||"images"===s)?(a.addClass("medium-insert-active"),setTimeout(function(){c.positionButtons(s),c.showButtons(s)},s?100:0)):this.hideButtons()))},a.prototype.showButtons=function(e){var t=this.$el.find(".medium-insert-buttons");t.show(),t.find("li").show(),e&&(t.find("li").hide(),t.find('a[data-addon="'+e+'"]').parent().show())},a.prototype.hideButtons=function(e){e=e||this.$el,e.find(".medium-insert-buttons").hide(),e.find(".medium-insert-buttons-addons").hide(),e.find(".medium-insert-buttons-show").removeClass("medium-insert-buttons-rotate")},a.prototype.positionButtons=function(e){var t,i,n=this.$el.find(".medium-insert-buttons"),o=this.$el.find(".medium-insert-active"),a=o.find("figure:first").length?o.find("figure:first"):o;o.length&&(t=o.position().left-parseInt(n.find(".medium-insert-buttons-addons").css("left"),10)-parseInt(n.find(".medium-insert-buttons-addons a:first").css("margin-left"),10),t=t<0?o.position().left:t,i=o.position().top+parseInt(o.css("margin-top"),10),e&&(o.position().left!==a.position().left&&(t=a.position().left),i+=o.height()+15),n.css({left:t+this.options.insertBtnPositionFix.left,top:i+this.options.insertBtnPositionFix.top}))},a.prototype.toggleAddons=function(){this.$el.find(".medium-insert-buttons-addons").fadeToggle(),this.$el.find(".medium-insert-buttons-show").toggleClass("medium-insert-buttons-rotate")},a.prototype.hideAddons=function(){this.$el.find(".medium-insert-buttons-addons").hide(),this.$el.find(".medium-insert-buttons-show").removeClass("medium-insert-buttons-rotate")},a.prototype.addonAction=function(t){var i=e(t.target).is("a")?e(t.target):e(t.target).closest("a"),n=i.data("addon"),a=i.data("action");this.$el.data("plugin_"+s+o(n))[a]()},a.prototype.moveCaret=function(e,n){var o,a,s;if(n=n||0,o=i.createRange(),a=t.getSelection(),s=e.get(0),!s.childNodes.length){var r=i.createTextNode(" ");s.appendChild(r)}o.setStart(s.childNodes[0],n),o.collapse(!0),a.removeAllRanges(),a.addRange(o)},a.prototype.addCaption=function(e,t){var i=e.find("figcaption");0===i.length&&e.append(this.templates["src/js/templates/core-caption.hbs"]({placeholder:t}))},a.prototype.removeCaptions=function(t){var i=this.$el.find("figcaption");t&&(i=i.not(t)),i.each(function(){(e(this).hasClass("medium-insert-caption-placeholder")||""===e(this).text().trim())&&e(this).remove()})},a.prototype.removeCaptionPlaceholder=function(e){var t=e.is("figcaption")?e:e.find("figcaption");t.length&&t.removeClass("medium-insert-caption-placeholder").removeAttr("data-placeholder")},e.fn[s]=function(t){return this.each(function(){var i,n=this;e(n).is("textarea")&&(i=e(n).attr("medium-editor-textarea-id"),n=e(n).siblings('[medium-editor-textarea-id="'+i+'"]').get(0)),e.data(n,"plugin_"+s)?"string"==typeof t&&e.data(n,"plugin_"+s)[t]&&e.data(n,"plugin_"+s)[t]():(e.data(n,"plugin_"+s,new a(n,t)),e.data(n,"plugin_"+s).init())})}}(jQuery,window,document),function(e,t,i,n){"use strict";function o(i,n){this.el=i,this.$el=e(i),this.templates=t.MediumInsert.Templates,this.core=this.$el.data("plugin_"+a),this.options=e.extend(!0,{},r,n),this._defaults=r,this._name=a,this.core.getEditor()&&(this.core.getEditor()._serializePreEmbeds=this.core.getEditor().serialize,this.core.getEditor().serialize=this.editorSerialize),this.init()}var a="mediumInsert",s="Embeds",r={label:'<span class="fa fa-youtube-play"></span>',placeholder:"插入一个优酷视频的链接地址,然后按回车键",oembedProxy:!1,captions:!0,captionPlaceholder:"添加描述 (可选)",styles:{wide:{label:'<span class="fa fa-align-justify"></span>'},left:{label:'<span class="fa fa-align-left"></span>'},right:{label:'<span class="fa fa-align-right"></span>'}},actions:{remove:{label:'<span class="fa fa-times"></span>',clicked:function(){var t=e.Event("keydown");t.which=8,e(i).trigger(t)}}}};o.prototype.init=function(){var t=this.$el.find(".medium-insert-embeds");t.attr("contenteditable",!1),t.each(function(){0===e(this).find(".medium-insert-embeds-overlay").length&&e(this).append(e("<div />").addClass("medium-insert-embeds-overlay"))}),this.events(),this.backwardsCompatibility()},o.prototype.events=function(){e(i).on("click",e.proxy(this,"unselectEmbed")).on("keydown",e.proxy(this,"removeEmbed")).on("click",".medium-insert-embeds-toolbar .medium-editor-action",e.proxy(this,"toolbarAction")).on("click",".medium-insert-embeds-toolbar2 .medium-editor-action",e.proxy(this,"toolbar2Action")),this.$el.on("keyup click paste",e.proxy(this,"togglePlaceholder")).on("keydown",e.proxy(this,"processLink")).on("click",".medium-insert-embeds-overlay",e.proxy(this,"selectEmbed")).on("contextmenu",".medium-insert-embeds-placeholder",e.proxy(this,"fixRightClickOnPlaceholder"))},o.prototype.backwardsCompatibility=function(){var t=this;this.$el.find(".mediumInsert-embeds").removeClass("mediumInsert-embeds").addClass("medium-insert-embeds"),this.$el.find(".medium-insert-embeds").each(function(){0===e(this).find(".medium-insert-embed").length&&(e(this).after(t.templates["src/js/templates/embeds-wrapper.hbs"]({html:e(this).html()})),e(this).remove())})},o.prototype.editorSerialize=function(){var t=this._serializePreEmbeds();return e.each(t,function(i){var n=e("<div />").html(t[i].value);n.find(".medium-insert-embeds").removeAttr("contenteditable"),n.find(".medium-insert-embeds-overlay").remove(),t[i].value=n.html()}),t},o.prototype.add=function(){var e=this.$el.find(".medium-insert-active");e.html(this.templates["src/js/templates/core-empty-line.hbs"]().trim()),e.is("p")&&(e.replaceWith('<div class="medium-insert-active">'+e.html()+"</div>"),e=this.$el.find(".medium-insert-active"),this.core.moveCaret(e)),e.addClass("medium-insert-embeds medium-insert-embeds-input medium-insert-embeds-active"),this.togglePlaceholder({target:e.get(0)}),e.click(),this.core.hideButtons()},o.prototype.togglePlaceholder=function(i){var n,o,a,s=e(i.target),r=t.getSelection();r&&0!==r.rangeCount&&(n=r.getRangeAt(0),o=e(n.commonAncestorContainer),o.hasClass("medium-insert-embeds-active")?s=o:o.closest(".medium-insert-embeds-active").length&&(s=o.closest(".medium-insert-embeds-active")),s.hasClass("medium-insert-embeds-active")?(a=s.text().trim(),""===a&&s.hasClass("medium-insert-embeds-placeholder")===!1?s.addClass("medium-insert-embeds-placeholder").attr("data-placeholder",this.options.placeholder):""!==a&&s.hasClass("medium-insert-embeds-placeholder")&&s.removeClass("medium-insert-embeds-placeholder").removeAttr("data-placeholder")):this.$el.find(".medium-insert-embeds-active").remove())},o.prototype.fixRightClickOnPlaceholder=function(t){this.core.moveCaret(e(t.target))},o.prototype.processLink=function(e){var t,i=this.$el.find(".medium-insert-embeds-active");if(i.length)return t=i.text().trim(),""===t&&[8,46,13].indexOf(e.which)!==-1?void i.remove():void(13===e.which&&(e.preventDefault(),e.stopPropagation(),this.options.oembedProxy?this.oembed(t):this.parseUrl(t)))},o.prototype.oembed=function(i){var n=this;e.support.cors=!0,e.ajax({crossDomain:!0,cache:!1,url:this.options.oembedProxy,dataType:"json",data:{url:i},success:function(t){console.log(t);var i=t&&t.html;t&&!t.html&&"photo"===t.type&&t.url&&(i='<img src="'+t.url+'" alt="">'),e.proxy(n,"embed",i)()},error:function(o,a,s){var r=function(){try{return JSON.parse(o.responseText)}catch(e){}}();"undefined"!=typeof t.console?t.console.log(r&&r.error||o.status||s.message):t.alert("Error requesting media from "+n.options.oembedProxy+" to insert: "+s+" (response status: "+o.status+")"),e.proxy(n,"convertBadEmbed",i)()}})},o.prototype.parseUrl=function(t){var i;return new RegExp(["youku","v.qq"].join("|")).test(t)?(i=t.replace(/\n?/g,"").replace(/^((http(s)?:\/\/)(v\.|\w\\.))(youku\.com\/v_show\/id_)(\w+==|\w+)(.*?$)/,'<div style="left: 0px; width: 100%; height: 0px; position: relative; padding-bottom: 62.5%;"> <iframe src="http://player.youku.com/embed/$6"  frameborder="0" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" style="top: 0px; left: 0px; width: 100%; height: 100%; position: absolute;"></iframe> </div>').replace(/^((http(s)?:\/\/)(v\.|\w\\.))(qq\.com\/cover\/(\w+\/|\/))(\w+)(\.html(\?vid=)(\w+).*?$)/,'<div style="left: 0px; width: 100%; height: 0px; position: relative; padding-bottom: 62.5%;"> <iframe src="http://v.qq.com/iframe/player.html?vid=$10&auto=1"  frameborder="0" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" style="top: 0px; left: 0px; width: 100%; height: 100%; position: absolute;"></iframe> </div>'),void this.embed(!!/<("[^"]*"|'[^']*'|[^'">])*>/.test(i)&&i)):(e.proxy(this,"convertBadEmbed",t)(),!1)},o.prototype.embed=function(e){var t=this.$el.find(".medium-insert-embeds-active");return e?(t.after(this.templates["src/js/templates/embeds-wrapper.hbs"]({html:e})),t.remove(),this.core.triggerInput(),e.indexOf("facebook")!==-1&&"undefined"!=typeof FB&&setTimeout(function(){FB.XFBML.parse()},2e3),void 0):(alert("Incorrect URL format specified"),!1)},o.prototype.convertBadEmbed=function(t){var i,n,o,a=this.templates["src/js/templates/core-empty-line.hbs"]().trim();i=this.$el.find(".medium-insert-embeds-active"),o=e(a),i.before(o),i.remove(),o.html(t),n=e(a),o.after(n),this.core.triggerInput(),this.core.moveCaret(i)},o.prototype.selectEmbed=function(t){if(this.core.options.enabled){var i=e(t.target).hasClass("medium-insert-embeds")?e(t.target):e(t.target).closest(".medium-insert-embeds"),n=this;i.addClass("medium-insert-embeds-selected"),setTimeout(function(){n.addToolbar(),n.options.captions&&n.core.addCaption(i.find("figure"),n.options.captionPlaceholder)},50)}},o.prototype.unselectEmbed=function(t){var i=e(t.target).hasClass("medium-insert-embeds")?e(t.target):e(t.target).closest(".medium-insert-embeds"),n=this.$el.find(".medium-insert-embeds-selected");return i.hasClass("medium-insert-embeds-selected")?(n.not(i).removeClass("medium-insert-embeds-selected"),e(".medium-insert-embeds-toolbar, .medium-insert-embeds-toolbar2").remove(),this.core.removeCaptions(i.find("figcaption")),void((e(t.target).is(".medium-insert-caption-placeholder")||e(t.target).is("figcaption"))&&(i.removeClass("medium-insert-embeds-selected"),this.core.removeCaptionPlaceholder(i.find("figure"))))):(n.removeClass("medium-insert-embeds-selected"),e(".medium-insert-embeds-toolbar, .medium-insert-embeds-toolbar2").remove(),void(e(t.target).is(".medium-insert-caption-placeholder")?this.core.removeCaptionPlaceholder(i.find("figure")):e(t.target).is("figcaption")===!1&&this.core.removeCaptions()))},o.prototype.removeEmbed=function(t){var i,n;8!==t.which&&46!==t.which||(i=this.$el.find(".medium-insert-embeds-selected"),i.length&&(t.preventDefault(),e(".medium-insert-embeds-toolbar, .medium-insert-embeds-toolbar2").remove(),n=e(this.templates["src/js/templates/core-empty-line.hbs"]().trim()),i.before(n),i.remove(),this.core.hideAddons(),this.core.moveCaret(n),this.core.triggerInput()))},o.prototype.addToolbar=function(){var t,i,n,o=this.$el.find(".medium-insert-embeds-selected"),a=!1;if(0!==o.length){var s=this.core.getEditor(),r=s.options.elementsContainer||"body";e(r).append(this.templates["src/js/templates/embeds-toolbar.hbs"]({styles:this.options.styles,actions:this.options.actions}).trim()),t=e(".medium-insert-embeds-toolbar"),i=e(".medium-insert-embeds-toolbar2"),n=o.offset().top-t.height()-8-2-5,n<0&&(n=0),t.css({top:n,left:o.offset().left+o.width()/2-t.width()/2}).show(),i.css({top:o.offset().top+2,left:o.offset().left+o.width()-i.width()-4}).show(),t.find("button").each(function(){o.hasClass("medium-insert-embeds-"+e(this).data("action"))&&(e(this).addClass("medium-editor-button-active"),a=!0)}),a===!1&&t.find("button").first().addClass("medium-editor-button-active")}},o.prototype.toolbarAction=function(t){var i=e(t.target).is("button")?e(t.target):e(t.target).closest("button"),n=i.closest("li"),o=n.closest("ul"),a=o.find("li"),s=this.$el.find(".medium-insert-embeds-selected"),r=this;i.addClass("medium-editor-button-active"),n.siblings().find(".medium-editor-button-active").removeClass("medium-editor-button-active"),a.find("button").each(function(){var t="medium-insert-embeds-"+e(this).data("action");e(this).hasClass("medium-editor-button-active")?(s.addClass(t),r.options.styles[e(this).data("action")].added&&r.options.styles[e(this).data("action")].added(s)):(s.removeClass(t),r.options.styles[e(this).data("action")].removed&&r.options.styles[e(this).data("action")].removed(s))}),this.core.triggerInput()},o.prototype.toolbar2Action=function(t){var i=e(t.target).is("button")?e(t.target):e(t.target).closest("button"),n=this.options.actions[i.data("action")].clicked;n&&n(this.$el.find(".medium-insert-embeds-selected")),this.core.triggerInput()},e.fn[a+s]=function(t){return this.each(function(){e.data(this,"plugin_"+a+s)||e.data(this,"plugin_"+a+s,new o(this,t))})}}(jQuery,window,document),function(e,t,i,n,o){"use strict";function a(i,n){this.el=i,this.$el=e(i),this.templates=t.MediumInsert.Templates,this.core=this.$el.data("plugin_"+s),this.options=e.extend(!0,{},l,n),this._defaults=l,this._name=s,this.options.preview&&!t.FileReader&&(this.options.preview=!1),this.core.getEditor()&&(this.core.getEditor()._serializePreImages=this.core.getEditor().serialize,this.core.getEditor().serialize=this.editorSerialize),this.init()}var s="mediumInsert",r="Images",l={label:'<span class="fa fa-camera"></span>',preview:!0,captions:!0,captionPlaceholder:"添加图片描述 (可选)",autoGrid:3,fileUploadOptions:{url:"upload.php",acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i},fileDeleteOptions:{},styles:{wide:{label:'<span class="fa fa-align-justify"></span>'},left:{label:'<span class="fa fa-align-left"></span>'},right:{label:'<span class="fa fa-align-right"></span>'},grid:{label:'<span class="fa fa-th"></span>'}},actions:{remove:{label:'<span class="fa fa-times"></span>',clicked:function(){var t=e.Event("keydown");t.which=8,e(i).trigger(t)}}},sorting:function(){var t=this;e(".medium-insert-images").sortable({group:"medium-insert-images",containerSelector:".medium-insert-images",itemSelector:"figure",placeholder:'<figure class="placeholder">',handle:"img",nested:!1,vertical:!1,afterMove:function(){t.core.triggerInput()}})},messages:{acceptFileTypesError:"This file is not in a supported format: ",maxFileSizeError:"This file is too big: "}},c=0;a.prototype.init=function(){var e=this.$el.find(".medium-insert-images");e.find("figcaption").attr("contenteditable",!0),e.find("figure").attr("contenteditable",!1),this.events(),this.backwardsCompatibility(),this.sorting()},a.prototype.events=function(){e(i).on("click",e.proxy(this,"unselectImage")).on("keydown",e.proxy(this,"removeImage")).on("click",".medium-insert-images-toolbar .medium-editor-action",e.proxy(this,"toolbarAction")).on("click",".medium-insert-images-toolbar2 .medium-editor-action",e.proxy(this,"toolbar2Action")),this.$el.on("click",".medium-insert-images img",e.proxy(this,"selectImage"))},a.prototype.backwardsCompatibility=function(){this.$el.find(".mediumInsert").removeClass("mediumInsert").addClass("medium-insert-images"),this.$el.find(".medium-insert-images.small").removeClass("small").addClass("medium-insert-images-left")},a.prototype.editorSerialize=function(){var t=this._serializePreImages();return e.each(t,function(i){var n=e("<div />").html(t[i].value);n.find(".medium-insert-images").find("figcaption, figure").removeAttr("contenteditable"),t[i].value=n.html()}),t},a.prototype.add=function(){var t=this,i=e(this.templates["src/js/templates/images-fileupload.hbs"]()),n=simple.uploader({}),o=function(e,t){return"http://qiniu.cdn-chuang.com/"+e+(c>850?"?imageView2/2/w/850":"")},a={};i.prop("accept","image/*").removeAttr("multiple"),n.on("beforeupload",function(e,t,i){}),n.on("uploadprogress",function(i,n,o,s){a.loaded=o,a.total=s,e.proxy(t,"uploadProgress",i,a)()}),n.on("uploadsuccess",function(i,n,s){a.url=o(s.key,s),e.proxy(t,"uploadDone",i,a)()}),(new XMLHttpRequest).upload,1,i.change(function(i){var o=(e(this).val(),this),s={files:this,submit:function(e){a=e,n.upload(o.files)}};e.proxy(t,"uploadAdd",i,s)()}),i.click()},a.prototype.uploadAdd=function(t,i){var n,o=this.$el.find(".medium-insert-active"),a=this,s=[],r=i.files.files[0],l=this.options.fileUploadOptions.acceptFileTypes,d=this.options.fileUploadOptions.maxFileSize;return l&&!l.test(r.type)?s.push(this.options.messages.acceptFileTypesError+r.name):d&&r.size>d&&s.push(this.options.messages.maxFileSizeError+r.name),s.length>0?void alert(s.join("\n")):(this.core.hideButtons(),o.is("p")&&(o.replaceWith('<div class="medium-insert-active">'+o.html()+"</div>"),o=this.$el.find(".medium-insert-active"),this.core.moveCaret(o)),o.addClass("medium-insert-images"),this.options.preview===!1&&0===o.find("progress").length&&(new XMLHttpRequest).upload&&o.append(this.templates["src/js/templates/images-progressbar.hbs"]()),n=new FileReader,n.onload=function(t){var n=new Image;n.src=t.target.result,n.onload=function(){c=n.width},e.proxy(a,"showImage",t.target.result,i)()},void n.readAsDataURL(r))},a.prototype.uploadProgressall=function(e,t){var i,n;this.options.preview===!1&&(i=parseInt(t.loaded/t.total*100,10),n=this.$el.find(".medium-insert-active").find("progress"),n.attr("value",i).text(i),100===i&&n.remove())},a.prototype.uploadProgress=function(e,t){var i,n;this.options.preview&&(i=100-parseInt(t.loaded/t.total*100,10),n=t.context.find(".medium-insert-images-progress"),n.css("width",i+"%"),0===i&&n.remove())},a.prototype.uploadDone=function(t,i){var n=e.proxy(this,"showImage",i.url,i)();this.core.clean(),this.sorting(),this.options.uploadCompleted&&this.options.uploadCompleted(n,i)},a.prototype.showImage=function(t,i){var n,o,a=this.$el.find(".medium-insert-active");return a.click(),o=this,this.options.preview&&i.context?(n=this.getDOMImage(),n.onload=function(){i.context.find("img").attr("src",n.src),o.core.triggerInput()},n.src=t):(i.context=e(this.templates["src/js/templates/images-image.hbs"]({img:t,progress:this.options.preview})).appendTo(a),a.find("br").remove(),this.options.autoGrid&&a.find("figure").length>=this.options.autoGrid&&(e.each(this.options.styles,function(e,t){var i="medium-insert-images-"+e;a.removeClass(i),t.removed&&t.removed(a)}),a.addClass("medium-insert-images-grid"),this.options.styles.grid.added&&this.options.styles.grid.added(a)),this.options.preview&&i.submit(i)),this.core.triggerInput(),i.context},a.prototype.getDOMImage=function(){return new t.Image},a.prototype.selectImage=function(t){if(this.core.options.enabled){var i=e(t.target),n=this;this.$el.blur(),i.addClass("medium-insert-image-active"),i.closest(".medium-insert-images").addClass("medium-insert-active"),setTimeout(function(){n.addToolbar(),n.options.captions&&n.core.addCaption(i.closest("figure"),n.options.captionPlaceholder)},50)}},a.prototype.unselectImage=function(t){var i=e(t.target),n=this.$el.find(".medium-insert-image-active");return i.is("img")&&i.hasClass("medium-insert-image-active")?(n.not(i).removeClass("medium-insert-image-active"),e(".medium-insert-images-toolbar, .medium-insert-images-toolbar2").remove(),void this.core.removeCaptions(i)):(n.removeClass("medium-insert-image-active"),e(".medium-insert-images-toolbar, .medium-insert-images-toolbar2").remove(),void(i.is(".medium-insert-caption-placeholder")?this.core.removeCaptionPlaceholder(n.closest("figure")):i.is("figcaption")===!1&&this.core.removeCaptions()))},a.prototype.removeImage=function(t){var i,n,o;8!==t.which&&46!==t.which||(i=this.$el.find(".medium-insert-image-active"),i.length&&(t.preventDefault(),n=i.closest(".medium-insert-images"),i.closest("figure").remove(),e(".medium-insert-images-toolbar, .medium-insert-images-toolbar2").remove(),0===n.find("figure").length&&(o=n.next(),o.is("p")!==!1&&""===o.text()||(o=e(this.templates["src/js/templates/core-empty-line.hbs"]().trim()),n.before(o)),n.remove(),this.core.hideAddons(),this.core.moveCaret(o)),this.core.triggerInput()))},a.prototype.addToolbar=function(){var t,i,n,o=this.$el.find(".medium-insert-image-active"),a=o.closest(".medium-insert-images"),s=!1,r=this.core.getEditor(),l=r.options.elementsContainer||"body";e(l).append(this.templates["src/js/templates/images-toolbar.hbs"]({styles:this.options.styles,actions:this.options.actions}).trim()),t=e(".medium-insert-images-toolbar"),i=e(".medium-insert-images-toolbar2"),n=o.offset().top-t.height()-8-2-5,n<0&&(n=0),t.css({top:n,left:o.offset().left+o.width()/2-t.width()/2}).show(),i.css({top:o.offset().top+2,left:o.offset().left+o.width()-i.width()-4}).show(),t.find("button").each(function(){a.hasClass("medium-insert-images-"+e(this).data("action"))&&(e(this).addClass("medium-editor-button-active"),s=!0)}),s===!1&&t.find("button").first().addClass("medium-editor-button-active")},a.prototype.toolbarAction=function(t){var i=e(t.target).is("button")?e(t.target):e(t.target).closest("button"),n=i.closest("li"),o=n.closest("ul"),a=o.find("li"),s=this.$el.find(".medium-insert-active"),r=this;i.addClass("medium-editor-button-active"),n.siblings().find(".medium-editor-button-active").removeClass("medium-editor-button-active"),a.find("button").each(function(){var t="medium-insert-images-"+e(this).data("action");e(this).hasClass("medium-editor-button-active")?(s.addClass(t),r.options.styles[e(this).data("action")].added&&r.options.styles[e(this).data("action")].added(s)):(s.removeClass(t),r.options.styles[e(this).data("action")].removed&&r.options.styles[e(this).data("action")].removed(s))}),this.core.hideButtons(),this.core.triggerInput()},a.prototype.toolbar2Action=function(t){var i=e(t.target).is("button")?e(t.target):e(t.target).closest("button"),n=this.options.actions[i.data("action")].clicked;n&&n(this.$el.find(".medium-insert-image-active")),this.core.hideButtons(),this.core.triggerInput()},a.prototype.sorting=function(){e.proxy(this.options.sorting,this)()},e.fn[s+r]=function(t){return this.each(function(){e.data(this,"plugin_"+s+r)||e.data(this,"plugin_"+s+r,new a(this,t))})}}(jQuery,window,document,MediumEditor.util),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("Cropper requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e){return st.call(e).slice(8,-1).toLowerCase()}function n(e){return"number"==typeof e&&!isNaN(e)}function o(e){return"undefined"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){var t,i;if(!a(e))return!1;try{return t=e.constructor,i=t.prototype,t&&i&&rt.call(i,"isPrototypeOf")}catch(n){return!1}}function r(e){return"function"===i(e)}function l(e){return Z.isArray?Z.isArray(e):"array"===i(e)}function c(e,t){return t=t>=0?t:0,Z.from?Z.from(e).slice(t):lt.call(e,t)}function d(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(Se,"$1")),e}function u(e,t){var i,o;if(e&&r(t))if(l(e)||n(e.length))for(o=0,i=e.length;o<i&&t.call(e,e[o],o,e)!==!1;o++);else if(a(e))for(o in e)if(e.hasOwnProperty(o)&&t.call(e,e[o],o,e)===!1)break;return e}function h(e){var t;if(arguments.length>1){if(t=c(arguments),X.assign)return X.assign.apply(X,t);t.shift(),u(t,function(t){u(t,function(t,i){e[i]=t})})}return e}function p(e,t){var i=c(arguments,2);return function(){return e.apply(t,i.concat(c(arguments)))}}function f(e,t){var i=e.style;u(t,function(e,t){_e.test(t)&&n(e)&&(e+="px"),i[t]=e})}function m(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function g(e,t){var i;return n(e.length)?u(e,function(e){g(e,t)}):e.classList?e.classList.add(t):(i=d(e.className),void(i?i.indexOf(t)<0&&(e.className=i+" "+t):e.className=t))}function v(e,t){return n(e.length)?u(e,function(e){v(e,t)}):e.classList?e.classList.remove(t):void(e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function y(e,t,i){return n(e.length)?u(e,function(e){y(e,t,i)}):void(i?g(e,t):v(e,t))}function b(e,t){return a(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+t)}function w(e,t,i){a(i)&&o(e[t])?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-"+t,i)}function C(e,t){a(e[t])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+t)}function x(e,t,i,n){var o=d(t).split(Me),a=i;return o.length>1?u(o,function(t){x(e,t,i)}):(n&&(i=function(){return D(e,t,i),a.apply(e,arguments)}),void(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)))}function D(e,t,i){var n=d(t).split(Me);return n.length>1?u(n,function(t){D(e,t,i)}):void(e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i))}function T(e,t,i){var n;return e.dispatchEvent?(r(Event)&&r(CustomEvent)?n=o(i)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):o(i)?(n=$.createEvent("Event"),n.initEvent(t,!0,!0)):(n=$.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(n)):e.fireEvent?e.fireEvent("on"+t):void 0}function k(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function _(t){var i,o=t||e.event;return o.target||(o.target=o.srcElement||$),n(o.pageX)||(i=$.documentElement,o.pageX=o.clientX+(e.scrollX||i&&i.scrollLeft||0)-(i&&i.clientLeft||0),o.pageY=o.clientY+(e.scrollY||i&&i.scrollTop||0)-(i&&i.clientTop||0)),o}function E(t){var i=$.documentElement,n=t.getBoundingClientRect();return{left:n.left+(e.scrollX||i&&i.scrollLeft||0)-(i&&i.clientLeft||0),top:n.top+(e.scrollY||i&&i.scrollTop||0)-(i&&i.clientTop||0)}}function S(e){var t=e.length,i=0,n=0;return t&&(u(e,function(e){i+=e.pageX,n+=e.pageY}),i/=t,n/=t),{pageX:i,pageY:n}}function M(e,t){return e.getElementsByTagName(t)}function A(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function P(e){return $.createElement(e)}function I(e,t){e.appendChild(t)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function L(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function O(e){var t=e.match(Ee);return t&&(t[1]!==q.protocol||t[2]!==q.hostname||t[3]!==q.port)}function F(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function U(e,t){var i;return e.naturalWidth&&!Ge?t(e.naturalWidth,e.naturalHeight):(i=P("img"),i.onload=function(){t(this.width,this.height)},void(i.src=e.src))}function H(e){var t=[],i=e.rotate,o=e.scaleX,a=e.scaleY;return n(i)&&t.push("rotate("+i+"deg)"),n(o)&&n(a)&&t.push("scale("+o+","+a+")"),t.length?t.join(" "):"none"}function B(e,t){var i,n,o=Qe(e.degree)%180,a=(o>90?180-o:o)*ot/180,s=Je(a),r=et(a),l=e.width,c=e.height,d=e.aspectRatio;return t?(i=l/(r+s/d),n=i/d):(i=l*r+c*s,n=l*s+c*r),{width:i,height:n}}function Y(e,t){var i,o,a,s=P("canvas"),r=s.getContext("2d"),l=0,c=0,d=t.naturalWidth,u=t.naturalHeight,h=t.rotate,p=t.scaleX,f=t.scaleY,m=n(p)&&n(f)&&(1!==p||1!==f),g=n(h)&&0!==h,v=g||m,y=d*Qe(p||1),b=u*Qe(f||1);return m&&(i=y/2,o=b/2),g&&(a=B({width:y,height:b,degree:h}),y=a.width,b=a.height,i=y/2,o=b/2),s.width=y,s.height=b,v&&(l=-d/2,c=-u/2,r.save(),r.translate(i,o)),g&&r.rotate(h*ot/180),m&&r.scale(p,f),r.drawImage(e,nt(l),nt(c),nt(d),nt(u)),v&&r.restore(),s}function R(e,t,i){var n="",o=t;for(i+=t;o<i;o++)n+=ct(e.getUint8(o));return n}function z(e){var t,i,n,o,a,s,r,l,c,d,u=new DataView(e),h=u.byteLength;if(255===u.getUint8(0)&&216===u.getUint8(1))for(c=2;c<h;){if(255===u.getUint8(c)&&225===u.getUint8(c+1)){r=c;break}c++}if(r&&(i=r+4,n=r+10,"Exif"===R(u,i,4)&&(s=u.getUint16(n),a=18761===s,(a||19789===s)&&42===u.getUint16(n+2,a)&&(o=u.getUint32(n+4,a),o>=8&&(l=n+o)))),l)for(h=u.getUint16(l,a),d=0;d<h;d++)if(c=l+12*d+2,274===u.getUint16(c,a)){c+=8,t=u.getUint16(c,a),Ge&&u.setUint16(c,1,a);break}return t}function W(e){var t,i=e.replace(Pe,""),n=atob(i),o=n.length,a=new G(o),s=new Uint8Array(a);for(t=0;t<o;t++)s[t]=n.charCodeAt(t);return a}function j(e){var t,i=new Uint8Array(e),n=i.length,o="";for(t=0;t<n;t++)o+=ct(i[t]);return"data:image/jpeg;base64,"+btoa(o)}function V(e,t){var i=this;i.element=e,i.options=h({},V.DEFAULTS,s(t)&&t),i.ready=!1,i.built=!1,i.complete=!1,i.rotated=!1,i.cropped=!1,i.disabled=!1,i.replaced=!1,i.limited=!1,i.wheeling=!1,i.isImg=!1,i.originalUrl="",i.canvasData=null,i.cropBoxData=null,i.previews=null,i.init()}var $=e.document,q=e.location,K=e.navigator,G=e.ArrayBuffer,X=e.Object,Z=e.Array,Q=e.String,J=e.Number,ee=e.Math,te="cropper",ie=te+"-modal",ne=te+"-hide",oe=te+"-hidden",ae=te+"-invisible",se=te+"-move",re=te+"-crop",le=te+"-disabled",ce=te+"-bg",de="mousedown touchstart pointerdown MSPointerDown",ue="mousemove touchmove pointermove MSPointerMove",he="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",pe="wheel mousewheel DOMMouseScroll",fe="dblclick",me="resize",ge="error",ve="load",ye="build",be="built",we="cropstart",Ce="cropmove",xe="cropend",De="crop",Te="zoom",ke=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,_e=/width|height|left|top|marginLeft|marginTop/,Ee=/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i,Se=/^\s+(.*)\s+$/,Me=/\s+/,Ae=/^data\:/,Pe=/^data\:([^\;]+)\;base64,/,Ie=/^data\:image\/jpeg.*;base64,/,Ne="preview",Le="action",Oe="e",Fe="w",Ue="s",He="n",Be="se",Ye="sw",Re="ne",ze="nw",We="all",je="crop",Ve="move",$e="zoom",qe="none",Ke=!!$.createElement("canvas").getContext,Ge=K&&/safari/i.test(K.userAgent)&&/apple computer/i.test(K.vendor),Xe=ee.min,Ze=ee.max,Qe=ee.abs,Je=ee.sin,et=ee.cos,tt=ee.sqrt,it=ee.round,nt=ee.floor,ot=ee.PI,at=X.prototype,st=at.toString,rt=at.hasOwnProperty,lt=Z.prototype.slice,ct=Q.fromCharCode;V.prototype={constructor:V,init:function(){var e,t=this,i=t.element,n=i.tagName.toLowerCase();if(!b(i,te)){if(w(i,te,t),"img"===n){if(t.isImg=!0,t.originalUrl=e=i.getAttribute("src"),!e)return;e=i.src}else"canvas"===n&&Ke&&(e=i.toDataURL());t.load(e)}},load:function(e){var t,i=this,n=i.options,o=i.element;if(e&&(r(n.build)&&x(o,ye,n.build,!0),T(o,ye)!==!1)){if(i.url=e,i.imageData={},!n.checkOrientation||!G)return i.clone();if(Ae.test(e))return Ie.test(e)?i.read(W(e)):i.clone();t=new XMLHttpRequest,t.onerror=t.onabort=function(){i.clone()},t.onload=function(){i.read(this.response)},t.open("get",e),t.responseType="arraybuffer",t.send()}},read:function(e){var t,i,n,o=this,a=o.options,s=z(e),r=o.imageData;if(s>1)switch(o.url=j(e),s){case 2:i=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}a.rotatable&&(r.rotate=t),a.scalable&&(r.scaleX=i,r.scaleY=n),o.clone()},clone:function(){var e,t,i,n,o,a=this,s=a.element,r=a.url;a.options.checkCrossOrigin&&O(r)&&(e=s.crossOrigin,e?t=r:(e="anonymous",t=F(r))),a.crossOrigin=e,a.crossOriginUrl=t,i=P("img"),e&&(i.crossOrigin=e),i.src=t||r,a.image=i,a._start=n=p(a.start,a),a._stop=o=p(a.stop,a),a.isImg?s.complete?a.start():x(s,ve,n):(x(i,ve,n),x(i,ge,o),g(i,ne),s.parentNode.insertBefore(i,s.nextSibling))},start:function(e){var t=this,i=t.isImg?t.element:t.image;e&&(D(i,ve,t._start),D(i,ge,t._stop)),U(i,function(e,i){h(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.ready=!0,t.build()})},stop:function(){var e=this,t=e.image;D(t,ve,e._start),
D(t,ge,e._stop),N(t),e.image=null},build:function(){var e,t,i,n,o,a,s,l=this,c=l.options,d=l.element,u=l.image;l.ready&&(l.built&&l.unbuild(),t=P("div"),t.innerHTML=V.TEMPLATE,l.container=e=d.parentNode,l.cropper=i=A(t,"cropper-container")[0],l.canvas=n=A(i,"cropper-canvas")[0],l.dragBox=o=A(i,"cropper-drag-box")[0],l.cropBox=a=A(i,"cropper-crop-box")[0],l.viewBox=A(i,"cropper-view-box")[0],l.face=s=A(a,"cropper-face")[0],I(n,u),g(d,oe),e.insertBefore(i,d.nextSibling),l.isImg||v(u,ne),l.initPreview(),l.bind(),c.aspectRatio=Ze(0,c.aspectRatio)||NaN,c.viewMode=Ze(0,Xe(3,it(c.viewMode)))||0,c.autoCrop?(l.cropped=!0,c.modal&&g(o,ie)):g(a,oe),c.guides||g(A(a,"cropper-dashed"),oe),c.center||g(A(a,"cropper-center"),oe),c.background&&g(i,ce),c.highlight||g(s,ae),c.cropBoxMovable&&(g(s,se),w(s,Le,We)),c.cropBoxResizable||(g(A(a,"cropper-line"),oe),g(A(a,"cropper-point"),oe)),l.setDragMode(c.dragMode),l.render(),l.built=!0,l.setData(c.data),setTimeout(function(){r(c.built)&&x(d,be,c.built,!0),T(d,be),T(d,De,l.getData()),l.complete=!0},0))},unbuild:function(){var e=this;e.built&&(e.built=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,N(e.cropper),e.cropper=null)},render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e,t=this,i=t.options,n=t.element,o=t.container,a=t.cropper;g(a,oe),v(n,oe),t.containerData=e={width:Ze(o.offsetWidth,J(i.minContainerWidth)||200),height:Ze(o.offsetHeight,J(i.minContainerHeight)||100)},f(a,{width:e.width,height:e.height}),g(n,oe),v(a,oe)},initCanvas:function(){var e,t=this,i=t.options.viewMode,n=t.containerData,o=t.imageData,a=90===Qe(o.rotate),s=a?o.naturalHeight:o.naturalWidth,r=a?o.naturalWidth:o.naturalHeight,l=s/r,c=n.width,d=n.height;n.height*l>n.width?3===i?c=n.height*l:d=n.width/l:3===i?d=n.width/l:c=n.height*l,e={naturalWidth:s,naturalHeight:r,aspectRatio:l,width:c,height:d},e.oldLeft=e.left=(n.width-c)/2,e.oldTop=e.top=(n.height-d)/2,t.canvasData=e,t.limited=1===i||2===i,t.limitCanvas(!0,!0),t.initialImageData=h({},o),t.initialCanvasData=h({},e)},limitCanvas:function(e,t){var i,n,o,a,s=this,r=s.options,l=r.viewMode,c=s.containerData,d=s.canvasData,u=d.aspectRatio,h=s.cropBoxData,p=s.cropped&&h;e&&(i=J(r.minCanvasWidth)||0,n=J(r.minCanvasHeight)||0,l>1?(i=Ze(i,c.width),n=Ze(n,c.height),3===l&&(n*u>i?i=n*u:n=i/u)):l>0&&(i?i=Ze(i,p?h.width:0):n?n=Ze(n,p?h.height:0):p&&(i=h.width,n=h.height,n*u>i?i=n*u:n=i/u)),i&&n?n*u>i?n=i/u:i=n*u:i?n=i/u:n&&(i=n*u),d.minWidth=i,d.minHeight=n,d.maxWidth=1/0,d.maxHeight=1/0),t&&(l?(o=c.width-d.width,a=c.height-d.height,d.minLeft=Xe(0,o),d.minTop=Xe(0,a),d.maxLeft=Ze(0,o),d.maxTop=Ze(0,a),p&&s.limited&&(d.minLeft=Xe(h.left,h.left+h.width-d.width),d.minTop=Xe(h.top,h.top+h.height-d.height),d.maxLeft=h.left,d.maxTop=h.top,2===l&&(d.width>=c.width&&(d.minLeft=Xe(0,o),d.maxLeft=Ze(0,o)),d.height>=c.height&&(d.minTop=Xe(0,a),d.maxTop=Ze(0,a))))):(d.minLeft=-d.width,d.minTop=-d.height,d.maxLeft=c.width,d.maxTop=c.height))},renderCanvas:function(e){var t,i,n=this,o=n.canvasData,a=n.imageData,s=a.rotate;n.rotated&&(n.rotated=!1,i=B({width:a.width,height:a.height,degree:s}),t=i.width/i.height,t!==o.aspectRatio&&(o.left-=(i.width-o.width)/2,o.top-=(i.height-o.height)/2,o.width=i.width,o.height=i.height,o.aspectRatio=t,o.naturalWidth=a.naturalWidth,o.naturalHeight=a.naturalHeight,s%180&&(i=B({width:a.naturalWidth,height:a.naturalHeight,degree:s}),o.naturalWidth=i.width,o.naturalHeight=i.height),n.limitCanvas(!0,!1))),(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=Xe(Ze(o.width,o.minWidth),o.maxWidth),o.height=Xe(Ze(o.height,o.minHeight),o.maxHeight),n.limitCanvas(!1,!0),o.oldLeft=o.left=Xe(Ze(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=Xe(Ze(o.top,o.minTop),o.maxTop),f(n.canvas,{width:o.width,height:o.height,left:o.left,top:o.top}),n.renderImage(),n.cropped&&n.limited&&n.limitCropBox(!0,!0),e&&n.output()},renderImage:function(e){var t,i,n,o,a,s=this,r=s.canvasData,l=s.imageData;l.rotate&&(i=B({width:r.width,height:r.height,degree:l.rotate,aspectRatio:l.aspectRatio},!0),n=i.width,o=i.height,t={width:n,height:o,left:(r.width-n)/2,top:(r.height-o)/2}),h(l,t||{width:r.width,height:r.height,left:0,top:0}),a=H(l),f(s.image,{width:l.width,height:l.height,marginLeft:l.left,marginTop:l.top,WebkitTransform:a,msTransform:a,transform:a}),e&&s.output()},initCropBox:function(){var e=this,t=e.options,i=t.aspectRatio,n=J(t.autoCropArea)||.8,o=e.canvasData,a={width:o.width,height:o.height};i&&(o.height*i>o.width?a.height=a.width/i:a.width=a.height*i),e.cropBoxData=a,e.limitCropBox(!0,!0),a.width=Xe(Ze(a.width,a.minWidth),a.maxWidth),a.height=Xe(Ze(a.height,a.minHeight),a.maxHeight),a.width=Ze(a.minWidth,a.width*n),a.height=Ze(a.minHeight,a.height*n),a.oldLeft=a.left=o.left+(o.width-a.width)/2,a.oldTop=a.top=o.top+(o.height-a.height)/2,e.initialCropBoxData=h({},a)},limitCropBox:function(e,t){var i,n,o,a,s=this,r=s.options,l=r.aspectRatio,c=s.containerData,d=s.canvasData,u=s.cropBoxData,h=s.limited;e&&(i=J(r.minCropBoxWidth)||0,n=J(r.minCropBoxHeight)||0,i=Xe(i,c.width),n=Xe(n,c.height),o=Xe(c.width,h?d.width:c.width),a=Xe(c.height,h?d.height:c.height),l&&(i&&n?n*l>i?n=i/l:i=n*l:i?n=i/l:n&&(i=n*l),a*l>o?a=o/l:o=a*l),u.minWidth=Xe(i,o),u.minHeight=Xe(n,a),u.maxWidth=o,u.maxHeight=a),t&&(h?(u.minLeft=Ze(0,d.left),u.minTop=Ze(0,d.top),u.maxLeft=Xe(c.width,d.left+d.width)-u.width,u.maxTop=Xe(c.height,d.top+d.height)-u.height):(u.minLeft=0,u.minTop=0,u.maxLeft=c.width-u.width,u.maxTop=c.height-u.height))},renderCropBox:function(){var e=this,t=e.options,i=e.containerData,n=e.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Xe(Ze(n.width,n.minWidth),n.maxWidth),n.height=Xe(Ze(n.height,n.minHeight),n.maxHeight),e.limitCropBox(!1,!0),n.oldLeft=n.left=Xe(Ze(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=Xe(Ze(n.top,n.minTop),n.maxTop),t.movable&&t.cropBoxMovable&&w(e.face,Le,n.width===i.width&&n.height===i.height?Ve:We),f(e.cropBox,{width:n.width,height:n.height,left:n.left,top:n.top}),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this;e.preview(),e.complete&&T(e.element,De,e.getData())},initPreview:function(){var e,t=this,i=t.options.preview,n=P("img"),o=t.crossOrigin,a=o?t.crossOriginUrl:t.url;o&&(n.crossOrigin=o),n.src=a,I(t.viewBox,n),t.image2=n,i&&(t.previews=e=$.querySelectorAll(i),u(e,function(e){var t=P("img");w(e,Ne,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),o&&(t.crossOrigin=o),t.src=a,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',L(e),I(e,t)}))},resetPreview:function(){u(this.previews,function(e){var t=b(e,Ne);f(e,{width:t.width,height:t.height}),e.innerHTML=t.html,C(e,Ne)})},preview:function(){var e=this,t=e.imageData,i=e.canvasData,n=e.cropBoxData,o=n.width,a=n.height,s=t.width,r=t.height,l=n.left-i.left-t.left,c=n.top-i.top-t.top,d=H(t),p={WebkitTransform:d,msTransform:d,transform:d};e.cropped&&!e.disabled&&(f(e.image2,h({width:s,height:r,marginLeft:-l,marginTop:-c},p)),u(e.previews,function(e){var t=b(e,Ne),i=t.width,n=t.height,d=i,u=n,m=1;o&&(m=i/o,u=a*m),a&&u>n&&(m=n/a,d=o*m,u=n),f(e,{width:d,height:u}),f(M(e,"img")[0],h({width:s*m,height:r*m,marginLeft:-l*m,marginTop:-c*m},p))}))},bind:function(){var t=this,i=t.options,n=t.element,o=t.cropper;r(i.cropstart)&&x(n,we,i.cropstart),r(i.cropmove)&&x(n,Ce,i.cropmove),r(i.cropend)&&x(n,xe,i.cropend),r(i.crop)&&x(n,De,i.crop),r(i.zoom)&&x(n,Te,i.zoom),x(o,de,t._cropStart=p(t.cropStart,t)),i.zoomable&&i.zoomOnWheel&&x(o,pe,t._wheel=p(t.wheel,t)),i.toggleDragModeOnDblclick&&x(o,fe,t._dblclick=p(t.dblclick,t)),x($,ue,t._cropMove=p(t.cropMove,t)),x($,he,t._cropEnd=p(t.cropEnd,t)),i.responsive&&x(e,me,t._resize=p(t.resize,t))},unbind:function(){var t=this,i=t.options,n=t.element,o=t.cropper;r(i.cropstart)&&D(n,we,i.cropstart),r(i.cropmove)&&D(n,Ce,i.cropmove),r(i.cropend)&&D(n,xe,i.cropend),r(i.crop)&&D(n,De,i.crop),r(i.zoom)&&D(n,Te,i.zoom),D(o,de,t._cropStart),i.zoomable&&i.zoomOnWheel&&D(o,pe,t._wheel),i.toggleDragModeOnDblclick&&D(o,fe,t._dblclick),D($,ue,t._cropMove),D($,he,t._cropEnd),i.responsive&&D(e,me,t._resize)},resize:function(){var e,t,i,n=this,o=n.options.restore,a=n.container,s=n.containerData;!n.disabled&&s&&(i=a.offsetWidth/s.width,1===i&&a.offsetHeight===s.height||(o&&(e=n.getCanvasData(),t=n.getCropBoxData()),n.render(),o&&(n.setCanvasData(u(e,function(t,n){e[n]=t*i})),n.setCropBoxData(u(t,function(e,n){t[n]=e*i})))))},dblclick:function(){var e=this;e.disabled||e.setDragMode(m(e.dragBox,re)?Ve:je)},wheel:function(e){var t=this,i=_(e),n=J(t.options.wheelZoomRatio)||.1,o=1;t.disabled||(k(i),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),i.deltaY?o=i.deltaY>0?1:-1:i.wheelDelta?o=-i.wheelDelta/120:i.detail&&(o=i.detail>0?1:-1),t.zoom(-o*n,i)))},cropStart:function(e){var t,i,n,o=this,a=o.options,s=_(e),r=s.touches;if(!o.disabled){if(r){if(t=r.length,t>1){if(!a.zoomable||!a.zoomOnTouch||2!==t)return;i=r[1],o.startX2=i.pageX,o.startY2=i.pageY,n=$e}i=r[0]}if(n=n||b(s.target,Le),ke.test(n)){if(T(o.element,we,{originalEvent:s,action:n})===!1)return;k(s),o.action=n,o.cropping=!1,o.startX=i?i.pageX:s.pageX,o.startY=i?i.pageY:s.pageY,n===je&&(o.cropping=!0,g(o.dragBox,ie))}}},cropMove:function(e){var t,i,n=this,o=n.options,a=_(e),s=a.touches,r=n.action;if(!n.disabled){if(s){if(t=s.length,t>1){if(!o.zoomable||!o.zoomOnTouch||2!==t)return;i=s[1],n.endX2=i.pageX,n.endY2=i.pageY}i=s[0]}if(r){if(T(n.element,Ce,{originalEvent:a,action:r})===!1)return;k(a),n.endX=i?i.pageX:a.pageX,n.endY=i?i.pageY:a.pageY,n.change(a.shiftKey,r===$e?a:null)}}},cropEnd:function(e){var t=this,i=t.options,n=_(e),o=t.action;t.disabled||o&&(k(n),t.cropping&&(t.cropping=!1,y(t.dragBox,ie,t.cropped&&i.modal)),t.action="",T(t.element,xe,{originalEvent:n,action:o}))},change:function(e,t){var i,n,o=this,a=o.options,s=a.aspectRatio,r=o.action,l=o.containerData,c=o.canvasData,d=o.cropBoxData,u=d.width,h=d.height,p=d.left,f=d.top,m=p+u,g=f+h,y=0,b=0,w=l.width,C=l.height,x=!0;switch(!s&&e&&(s=u&&h?u/h:1),o.limited&&(y=d.minLeft,b=d.minTop,w=y+Xe(l.width,c.left+c.width),C=b+Xe(l.height,c.top+c.height)),n={x:o.endX-o.startX,y:o.endY-o.startY},s&&(n.X=n.y*s,n.Y=n.x/s),r){case We:p+=n.x,f+=n.y;break;case Oe:if(n.x>=0&&(m>=w||s&&(f<=b||g>=C))){x=!1;break}u+=n.x,s&&(h=u/s,f-=n.Y/2),u<0&&(r=Fe,u=0);break;case He:if(n.y<=0&&(f<=b||s&&(p<=y||m>=w))){x=!1;break}h-=n.y,f+=n.y,s&&(u=h*s,p+=n.X/2),h<0&&(r=Ue,h=0);break;case Fe:if(n.x<=0&&(p<=y||s&&(f<=b||g>=C))){x=!1;break}u-=n.x,p+=n.x,s&&(h=u/s,f+=n.Y/2),u<0&&(r=Oe,u=0);break;case Ue:if(n.y>=0&&(g>=C||s&&(p<=y||m>=w))){x=!1;break}h+=n.y,s&&(u=h*s,p-=n.X/2),h<0&&(r=He,h=0);break;case Re:if(s){if(n.y<=0&&(f<=b||m>=w)){x=!1;break}h-=n.y,f+=n.y,u=h*s}else n.x>=0?m<w?u+=n.x:n.y<=0&&f<=b&&(x=!1):u+=n.x,n.y<=0?f>b&&(h-=n.y,f+=n.y):(h-=n.y,f+=n.y);u<0&&h<0?(r=Ye,h=0,u=0):u<0?(r=ze,u=0):h<0&&(r=Be,h=0);break;case ze:if(s){if(n.y<=0&&(f<=b||p<=y)){x=!1;break}h-=n.y,f+=n.y,u=h*s,p+=n.X}else n.x<=0?p>y?(u-=n.x,p+=n.x):n.y<=0&&f<=b&&(x=!1):(u-=n.x,p+=n.x),n.y<=0?f>b&&(h-=n.y,f+=n.y):(h-=n.y,f+=n.y);u<0&&h<0?(r=Be,h=0,u=0):u<0?(r=Re,u=0):h<0&&(r=Ye,h=0);break;case Ye:if(s){if(n.x<=0&&(p<=y||g>=C)){x=!1;break}u-=n.x,p+=n.x,h=u/s}else n.x<=0?p>y?(u-=n.x,p+=n.x):n.y>=0&&g>=C&&(x=!1):(u-=n.x,p+=n.x),n.y>=0?g<C&&(h+=n.y):h+=n.y;u<0&&h<0?(r=Re,h=0,u=0):u<0?(r=Be,u=0):h<0&&(r=ze,h=0);break;case Be:if(s){if(n.x>=0&&(m>=w||g>=C)){x=!1;break}u+=n.x,h=u/s}else n.x>=0?m<w?u+=n.x:n.y>=0&&g>=C&&(x=!1):u+=n.x,n.y>=0?g<C&&(h+=n.y):h+=n.y;u<0&&h<0?(r=ze,h=0,u=0):u<0?(r=Ye,u=0):h<0&&(r=Re,h=0);break;case Ve:o.move(n.x,n.y),x=!1;break;case $e:o.zoom(function(e,t,i,n){var o=tt(e*e+t*t),a=tt(i*i+n*n);return(a-o)/o}(Qe(o.startX-o.startX2),Qe(o.startY-o.startY2),Qe(o.endX-o.endX2),Qe(o.endY-o.endY2)),t),o.startX2=o.endX2,o.startY2=o.endY2,x=!1;break;case je:if(!n.x||!n.y){x=!1;break}i=E(o.cropper),p=o.startX-i.left,f=o.startY-i.top,u=d.minWidth,h=d.minHeight,n.x>0?r=n.y>0?Be:Re:n.x<0&&(p-=u,r=n.y>0?Ye:ze),n.y<0&&(f-=h),o.cropped||(v(o.cropBox,oe),o.cropped=!0,o.limited&&o.limitCropBox(!0,!0))}x&&(d.width=u,d.height=h,d.left=p,d.top=f,o.action=r,o.renderCropBox()),o.startX=o.endX,o.startY=o.endY},crop:function(){var e=this;return e.built&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&g(e.dragBox,ie),v(e.cropBox,oe)),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.built&&!e.disabled&&(e.imageData=h({},e.initialImageData),e.canvasData=h({},e.initialCanvasData),e.cropBoxData=h({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(h(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),v(e.dragBox,ie),g(e.cropBox,oe)),e},replace:function(e,t){var i=this;return!i.disabled&&e&&(i.isImg&&(i.element.src=e),t?(i.url=e,i.image.src=e,i.built&&(i.image2.src=e,u(i.previews,function(t){M(t,"img")[0].src=e}))):(i.isImg&&(i.replaced=!0),i.options.data=null,i.load(e))),i},enable:function(){var e=this;return e.built&&(e.disabled=!1,v(e.cropper,le)),e},disable:function(){var e=this;return e.built&&(e.disabled=!0,g(e.cropper,le)),e},destroy:function(){var e=this,t=e.element,i=e.image;return e.ready?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),v(t,oe)):e.isImg?D(t,ve,e.start):i&&N(i),C(t,te),e},move:function(e,t){var i=this,n=i.canvasData;return i.moveTo(o(e)?e:n.left+J(e),o(t)?t:n.top+J(t))},moveTo:function(e,t){var i=this,a=i.canvasData,s=!1;return o(t)&&(t=e),e=J(e),t=J(t),i.built&&!i.disabled&&i.options.movable&&(n(e)&&(a.left=e,s=!0),n(t)&&(a.top=t,s=!0),s&&i.renderCanvas(!0)),i},zoom:function(e,t){var i=this,n=i.canvasData;return e=J(e),e=e<0?1/(1-e):1+e,i.zoomTo(n.width*e/n.naturalWidth,t)},zoomTo:function(e,t){var i,n,o,a,s=this,r=s.options,l=s.canvasData,c=l.width,d=l.height,u=l.naturalWidth,h=l.naturalHeight;if(e=J(e),e>=0&&s.built&&!s.disabled&&r.zoomable){if(i=u*e,n=h*e,T(s.element,Te,{originalEvent:t,oldRatio:c/u,ratio:i/u})===!1)return s;t?(o=E(s.cropper),a=t.touches?S(t.touches):{pageX:t.pageX,pageY:t.pageY},l.left-=(i-c)*((a.pageX-o.left-l.left)/c),l.top-=(n-d)*((a.pageY-o.top-l.top)/d)):(l.left-=(i-c)/2,l.top-=(n-d)/2),l.width=i,l.height=n,s.renderCanvas(!0)}return s},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+J(e))},rotateTo:function(e){var t=this;return e=J(e),n(e)&&t.built&&!t.disabled&&t.options.rotatable&&(t.imageData.rotate=e%360,t.rotated=!0,t.renderCanvas(!0)),t},scale:function(e,t){var i=this,a=i.imageData,s=!1;return o(t)&&(t=e),e=J(e),t=J(t),i.built&&!i.disabled&&i.options.scalable&&(n(e)&&(a.scaleX=e,s=!0),n(t)&&(a.scaleY=t,s=!0),s&&i.renderImage(!0)),i},scaleX:function(e){var t=this,i=t.imageData.scaleY;return t.scale(e,n(i)?i:1)},scaleY:function(e){var t=this,i=t.imageData.scaleX;return t.scale(n(i)?i:1,e)},getData:function(e){var t,i,n=this,o=n.options,a=n.imageData,s=n.canvasData,r=n.cropBoxData;return n.built&&n.cropped?(i={x:r.left-s.left,y:r.top-s.top,width:r.width,height:r.height},t=a.width/a.naturalWidth,u(i,function(n,o){n/=t,i[o]=e?it(n):n})):i={x:0,y:0,width:0,height:0},o.rotatable&&(i.rotate=a.rotate||0),o.scalable&&(i.scaleX=a.scaleX||1,i.scaleY=a.scaleY||1),i},setData:function(e){var t,i,o,a=this,l=a.options,c=a.imageData,d=a.canvasData,u={};return r(e)&&(e=e.call(a.element)),a.built&&!a.disabled&&s(e)&&(l.rotatable&&n(e.rotate)&&e.rotate!==c.rotate&&(c.rotate=e.rotate,a.rotated=t=!0),l.scalable&&(n(e.scaleX)&&e.scaleX!==c.scaleX&&(c.scaleX=e.scaleX,i=!0),n(e.scaleY)&&e.scaleY!==c.scaleY&&(c.scaleY=e.scaleY,i=!0)),t?a.renderCanvas():i&&a.renderImage(),o=c.width/c.naturalWidth,n(e.x)&&(u.left=e.x*o+d.left),n(e.y)&&(u.top=e.y*o+d.top),n(e.width)&&(u.width=e.width*o),n(e.height)&&(u.height=e.height*o),a.setCropBoxData(u)),a},getContainerData:function(){var e=this;return e.built?e.containerData:{}},getImageData:function(){var e=this;return e.ready?e.imageData:{}},getCanvasData:function(){var e=this,t=e.canvasData,i={};return e.built&&u(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(e){var t=this,i=t.canvasData,o=i.aspectRatio;return r(e)&&(e=e.call(t.element)),t.built&&!t.disabled&&s(e)&&(n(e.left)&&(i.left=e.left),n(e.top)&&(i.top=e.top),n(e.width)?(i.width=e.width,i.height=e.width/o):n(e.height)&&(i.height=e.height,i.width=e.height*o),t.renderCanvas(!0)),t},getCropBoxData:function(){var e,t=this,i=t.cropBoxData;return t.built&&t.cropped&&(e={left:i.left,top:i.top,width:i.width,height:i.height}),e||{}},setCropBoxData:function(e){var t,i,o=this,a=o.cropBoxData,l=o.options.aspectRatio;return r(e)&&(e=e.call(o.element)),o.built&&o.cropped&&!o.disabled&&s(e)&&(n(e.left)&&(a.left=e.left),n(e.top)&&(a.top=e.top),n(e.width)&&(t=!0,a.width=e.width),n(e.height)&&(i=!0,a.height=e.height),l&&(t?a.height=a.width/l:i&&(a.width=a.height*l)),o.renderCropBox()),o},getCroppedCanvas:function(e){var t,i,n,o,a,r,l,c,d,u,h,p=this;if(p.built&&p.cropped&&Ke)return s(e)||(e={}),h=p.getData(),t=h.width,i=h.height,c=t/i,s(e)&&(a=e.width,r=e.height,a?(r=a/c,l=a/t):r&&(a=r*c,l=r/i)),n=nt(a||t),o=nt(r||i),d=P("canvas"),d.width=n,d.height=o,u=d.getContext("2d"),e.fillColor&&(u.fillStyle=e.fillColor,u.fillRect(0,0,n,o)),u.drawImage.apply(u,function(){var e,n,o,a,s,r,c=Y(p.image,p.imageData),d=c.width,u=c.height,f=p.canvasData,m=[c],g=h.x+f.naturalWidth*(Qe(h.scaleX||1)-1)/2,v=h.y+f.naturalHeight*(Qe(h.scaleY||1)-1)/2;return g<=-t||g>d?g=e=o=s=0:g<=0?(o=-g,g=0,e=s=Xe(d,t+g)):g<=d&&(o=0,e=s=Xe(t,d-g)),e<=0||v<=-i||v>u?v=n=a=r=0:v<=0?(a=-v,v=0,n=r=Xe(u,i+v)):v<=u&&(a=0,n=r=Xe(i,u-v)),m.push(nt(g),nt(v),nt(e),nt(n)),l&&(o*=l,a*=l,s*=l,r*=l),s>0&&r>0&&m.push(nt(o),nt(a),nt(s),nt(r)),m}.call(p)),d},setAspectRatio:function(e){var t=this,i=t.options;return t.disabled||o(e)||(i.aspectRatio=Ze(0,e)||NaN,t.built&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t,i,n=this,o=n.options,a=n.dragBox,s=n.face;return n.ready&&!n.disabled&&(t=e===je,i=o.movable&&e===Ve,e=t||i?e:qe,w(a,Le,e),y(a,re,t),y(a,se,i),o.cropBoxMovable||(w(s,Le,e),y(s,re,t),y(s,se,i))),n}},V.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},V.TEMPLATE=function(e,t){return t=t.split(","),e.replace(/\d+/g,function(e){return t[e]})}('<0 6="5-container"><0 6="5-wrap-9"><0 6="5-canvas"></0></0><0 6="5-drag-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,action,data,point,cropper,class,line,dashed,box");var dt=e.Cropper;return V.noConflict=function(){return e.Cropper=dt,V},V.setDefaults=function(e){h(V.DEFAULTS,e)},"function"==typeof define&&define.amd&&define("cropper",[],function(){return V}),t||(e.Cropper=V),V}),function(){var e=this;!function(){var t,i,n,o,a,s=this,r=!1,l="http://qiniu.cdn-chuang.com/",c="",d={aspectRatio:1,croppedable:!0,finish:function(){},error:function(){}};e.imageCrop=function(e,n){return!!e.length&&(t=e[0],c=t.name,s.domInit(),s.setOpts(n),void s.getImageData(e[0],function(e){s.imageLoad(e,function(){i.src=e,s.cropperInit()})}))},this.domInit=function(){var e=$("#uploadContainer");e.length?e.addClass("active"):($("body").append(s.template()),i=document.getElementById("croppedImage"),o=$("#uploadContainer"),a=$("#uploadConfirm").click(s.confirm),$("#uploadCancel").click(s.cancel))},this.imageLoad=function(e,t){var i=new Image;i.src=e,i.onload=t},this.template=function(){return'<div id="uploadContainer" class="upload-container active"> <div class="image-container"> <div class="preview"> <img id="croppedImage"> </div> <div class="footer"> <a id="uploadConfirm" class="confirm pub-background-transition"><span>确定</span><em></em></a> <a id="uploadCancel" class="cancel pub-background-transition"><span>取消</span></a> </div> </div> </div>'},this.setOpts=function(e){d=$.extend(d,e)},this.cancel=function(){return i.src="",o.removeClass("active")},this.getImageData=function(e,t){var i;if($.isFunction(t))return window.FileReader&&FileReader.prototype.readAsDataURL&&/^image/.test(e.type)?(i=new FileReader,i.onload=function(e){return t(e.target.result)},i.readAsDataURL(e),n=e.type,r=/gif/.test(e.type)):t("")},this.cropper=null,this.cropperInit=function(){return s.cropper&&s.cropper.destroy(),d.croppedable&&!r&&(s.cropper=new Cropper(i,{built:function(){var e=this.cropper,t=e.getContainerData();e.setCropBoxData({left:t.width/4,width:t.width/2})},viewMode:"1",zoomable:!1,movable:!1,rotatable:!1,scalable:!1,aspectRatio:d.aspectRatio,cropBoxResizable:!0}))},this.confirm=function(){a.addClass("loading"),!d.croppedable||r?s.uploadNormal():s.uploadBase64(s.croppedImage())},this.croppedImage=function(){return s.cropper.getCroppedCanvas().toDataURL(n)},this.put64=function(e,t){var i=e,n="http://up.qiniu.com/putb64/-1",o=new XMLHttpRequest;o.onreadystatechange=function(){var e={};if(4==o.readyState){try{e=JSON.parse(o.responseText)}catch(t){d.error("上传失败")}e.key&&s.finish(l+e.key),a.removeClass("loading")}},n=n+"/key/"+s.serverFilename(),o.open("POST",n,!0),o.setRequestHeader("Content-Type","application/octet-stream"),o.setRequestHeader("Authorization","UpToken "+t),o.send(i)},this.uploadNormal=function(){imageUploader(function(){},function(){},function(e,t){s.finish(l+t),a.removeClass("loading")},function(e){d.error(e),a.removeClass("loading")}).maxSize(5).upload(t)},this.serverFilename=function(){var e=c.split("."),t=e.length,i=e[t-1];(new Date).getTime();return s.strBase64(s.strBase64(c).substr(0,16)+"."+i)},this.strBase64=function(e){if(window.hasOwnProperty("btoa"))return btoa(e);e=escape(e);var t,i,n,o,a,s="",r="",l="",c=0,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";do t=e.charCodeAt(c++),i=e.charCodeAt(c++),r=e.charCodeAt(c++),n=t>>2,o=(3&t)<<4|i>>4,a=(15&i)<<2|r>>6,l=63&r,isNaN(i)?a=l=64:isNaN(r)&&(l=64),s=s+d.charAt(n)+d.charAt(o)+d.charAt(a)+d.charAt(l),t=i=r="",n=o=a=l="";while(c<e.length);return s},this.uploadBase64=function(e){var t=e.split(","),i=t[1];request.get("/qiniu/upload/token",function(e){e.token&&s.put64(i,e.token)})},this.finish=function(e){s.imageLoad(e,function(){s.cancel(),d.finish(e),o.removeClass("active")})}}()}.call(this),function(){var e=this;this.content=new MediumEditor("#content-editor",{placeholder:{text:"输入文章内容"},toolbar:{buttons:["bold","italic","underline","h2","h3",{name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:'<i class="fa fa-link"></i>',contentFA:'<i class="fa fa-link"></i>'},"orderedlist","unorderedlist","quote"]},anchor:{customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"粘贴或输入链接",targetCheckbox:!1,targetCheckboxText:"Open in new window"}}),this.insert_plugin=$("#content-editor").mediumInsert({editor:e.content})}.call(define("plugin_editor")),function(){var e=this;this.model={el:"#admin-content",data:{background:!1,search:{keyword:""},orderby:preload.orderby,order:"desc",pagination:{total:preload.total,size:10,index:1,btns:[],all:0},list:preload.list},methods:{_search:function(){e.page_search()},_size:function(t){e.page_size(t)},_turn:function(t){"number"==typeof t&&e.page_turn(t)},_next:function(){this.pagination.index+1<=this.pagination.all&&e.page_turn(this.pagination.index+1)},_prev:function(){this.pagination.index-1>=1&&e.page_turn(this.pagination.index-1)},_order:function(t){this.orderby=t,this.order="desc"==this.order?"asc":"desc",e.page_order()},_post:function(e){controller_pop.display.post(e)},_edit:function(e){!!e&&controller_pop.display.article.show(e)},_del:function(t){pop.confirm("确认删除 ?","确定",function(){e.delete_article(t)})},_recovery:function(t){pop.confirm("还原文章 ?","确定",function(){e.recovery_article(t)})}}},this.page_search=function(){e.get_data()},this.page_order=function(){e.get_data()},this.page_turn=function(t){e.model.data.pagination.index=t,e.get_data()},this.page_size=function(t){var i=e.model.data.pagination;i.size=t,i.all=Math.ceil(i.total/i.size),i.index>i.all&&(i.index=i.all),e.get_data()},this.update_pagination_btn=function(){var t=e.model.data.pagination;return t.all=Math.ceil(t.total/t.size),t.btns=e.create_pagination_btn(t.index,t.size,t.total)},this.create_pagination_btn=function(e,t,i){var n,o,a=Math.ceil(i/t),s=[],r=function(e,t){return s.push({active:e,index:t})},l=function(){return s.push({active:!1,index:"..."})};if(a<=7)for(var c=1;c<=a;c++)r(c==e,c);else{n=e-3<1?1:e-3,o=e+3>a?a:e+3,n>1&&r(!1,1),n>2&&l();for(var c=n;c<=o;c++)r(c==e,c);o<a-1&&l(),o<a&&r(!1,a)}return s},this.get_data=function(){var t=e.model.data;request.get(preload.api.get_list,function(t){t.hasOwnProperty("code")&&0==t.code&&(e.model.data.pagination.total=t.data.total,e.model.data.list=t.data.list,e.update_pagination_btn())},{index:t.pagination.index,size:t.pagination.size,order:t.order,orderby:t.orderby,keyword:t.search.keyword})},this.delete_article=function(t){request.get(preload.api.del_article,function(t){t.hasOwnProperty("code")&&0==t.code?e.get_data():pop.error("操作失败","确定")},{id:t})},this.recovery_article=function(t){request.get(preload.api.recovery_article,function(t){t.hasOwnProperty("code")&&0==t.code?e.get_data():pop.error("操作失败","确定")},{id:t})},this.vue=new Vue(e.model),e.update_pagination_btn()}.call(define("controller_admin")),function(){var e=this;this.model={el:"#pop-container",data:{display:"",post:{id:"",category:{active:!1,text:"",val:"",list:preload.categories},type:{val:"now",time:""}},article:{id:"",title:"",summary:"",image:{val:"",progress:{active:!1,percent:"0 %"}},tag:{items:[],input:""}}},methods:{_close:function(){var t=this;e.save_confirm(function(){t.display="",t.post.category.active=0,controller_admin.model.data.background&&(controller_admin.model.data.background=!1)})},_category_display:function(){this.post.category.active=!this.post.category.active},_category_select:function(e,t){this.post.category.val=e,this.post.category.text=t},_type_select:function(e){this.post.type.val=e,e=this.post.type.time=moment().format("YYYY-MM-DD HH:mm")},_confirm_post:function(){var t=this;e.confirm_post(function(){t.display="",t.post.category.active=0})},_confirm_article:function(){e.save_article()},_tag_del:function(){var e=this.article.tag;e.items.splice($.inArray($(event.target).prev().html(),e.items),1)},_tag_keydown:function(e){var t,i,n=this.article.tag;if(8==e.keyCode&&""==n.input&&n.items.pop(),13==e.keyCode){if(t=n.input.replace(/ {2,20}/g," "),i=$.inArray(t,n.items),n.items.length>=5)return pop.error("最多5个标签","确认").one();n.items.length<5&&t.length>1&&(i>-1&&n.items.splice(i,1),n.items.push(t),n.input="")}},_del_image:function(){this.article.image.val=""},_upload_image:function(){var t=this.$els.image,i=e.model.data.article;return t.files?(imageCrop(t.files,{aspectRatio:16/9,croppedable:!0,finish:function(e){i.image.val=e},error:function(e){pop.error(e||"上传失败","确定").one()}}),void(t.value="")):pop.error("浏览器兼容性错误","确定").one()}}},this.display={post:function(t){e.model.data.display="post",e.get_post_info(t)},article:{show:function(t){controller_admin.model.data.background=!0,e.model.data.display="article",e.get_article_info(t)},hide:function(){controller_admin.model.data.background=!1,e.model.data.display=""}}},this.save_confirm=function(e){controller_save.check()?e():pop.confirm("当前文章未保存","放弃修改",function(){e(),controller_save.end()},"返回")},this.get_article_info=function(t){request.get(preload.api.get_article_info,function(i){var n;i.hasOwnProperty("code")&&0==i.code?(n=i.data,e.set_article({title:n.title,summary:n.summary,image:n.image,tags:n.tags,id:t,content:n.content}),controller_save.start()):pop.error("请求数据出错","确定").one()},{id:t})},this.get_editing_article=function(){var t=e.model.data.article;return{id:t.id,title:t.title,summary:t.summary,image:t.image.val,tags:JSON.stringify(t.tag.items),content:plugin_editor.content.serialize()["content-editor"].value}},this.save_article=function(){e.check_article()&&request.post(preload.api.save_article,function(t){t.hasOwnProperty("code")&&0==t.code?(e.display.article.hide(),e.update_list(),controller_save.end()):pop.error("保存失败","确定").one()},e.get_editing_article())},this.set_article=function(t){var i=e.model.data.article;t.hasOwnProperty("title")&&(i.title=t.title),t.hasOwnProperty("summary")&&(i.summary=t.summary),t.hasOwnProperty("image")&&(i.image.val=t.image),t.hasOwnProperty("tags")&&(i.tag.items=t.tags),t.hasOwnProperty("content")&&plugin_editor.content.setContent(t.content),t.hasOwnProperty("id")&&(i.id=t.id)},this.check_article=function(){var t=e.get_editing_article();return t.title&&""!=t.title?!(!t.summary||""==t.summary)||(pop.error("请填写摘要","确认").one(),!1):(pop.error("请填写标题","确认").one(),!1)},this.get_post_info=function(t){request.get(preload.api.get_post_info,function(i){i.hasOwnProperty("code")&&0==i.code?e.set_post(t,i.data.category,i.data.type,i.data.time):pop.error("获取数据失败","确定").one()},{id:t})},this.get_category_name=function(t){var i="",n=e.model.data.post.category.list;for(var o in n)n[o].id==t&&(i=n[o].name);return i},this.set_post=function(t,i,n,o){var a=e.model.data.post;a.id=t,a.category.val=i,a.category.text=e.get_category_name(i),a.type.val=n,!!o&&(a.type.time=o)},this.confirm_post=function(t){var i=e.model.data.post,n={id:i.id,category:i.category.val,type:i.type.val,time:i.type.time};return"now"!=n.type&&"time"!=n.type||"0"==i.category.list[0].id||"0"!=n.category&&""!=n.category?void request.get(preload.api.save_post,function(i){i.hasOwnProperty("code")&&0==i.code?(e.update_list(),t()):pop.error("设置失败","确定").one()},n):pop.error("请选择分类","确定").one()},this.update_list=function(){controller_admin.get_data()},this.vue=new Vue(e.model)}.call(define("controller_pop")),function(){$("#datetimepicker").datetimepicker({inline:!0,sideBySide:!0}).on("changeDate",function(){controller_pop.model.data.post.type.time=$(this).data("date")})}.call(define("controller_timerpicker")),function(){var e=this,t=!0,i={};this.get_cur=function(){var e=controller_pop.get_editing_article();return e.title+e.summary+e.image+e.tags+e.content},this.start=function(){t=!1,i=e.get_cur()},this.end=function(){t=!0},this.check=function(){return t||i==e.get_cur()},dom.w.bind("beforeunload",function(){if(!e.check())return"当前文章未保存,确定关闭?"})}.call(define("controller_save"));