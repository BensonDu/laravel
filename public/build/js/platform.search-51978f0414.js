(function(){window.view_nav_left.fold=function(){return jQuery("#content-container").css("padding-left",60),jQuery("#nav-container").css("padding-left",60)},window.view_nav_left.unfold=function(){return jQuery("#content-container").css("padding-left",140),jQuery("#nav-container").css("padding-left",140)}}).call(define("view_page_response")),function(){var e=this,t=data.search.keyword,s=data.search.total,i=0,n=10;this.vue=new Vue({el:"#content-container",data:{total:s,keyword:t,load:"More",list:data.search.list,sites:data.sites,filter:{selected:[],fold:!0}},methods:{_fold:function(){this.filter.fold=!this.filter.fold},_clear:function(){this.filter.selected=[],e.selected_syn(),e.sites_syn(),e.getlist()},_selected:function(t){var s=e.get_site_info(t);s&&this.filter.selected.length<6&&(this.filter.selected.push(s),e.selected_syn(),e.sites_syn(),e.getlist())},_unselected:function(t){this.filter.selected=e.arrayRemove(this.filter.selected,"id",t),e.selected_syn(),e.sites_syn(),e.getlist()},_more:function(){e.getlist(!0)},_search:function(){location.href="/search?keyword="+encodeURIComponent(e.vue.keyword)}}}),this.selected_site=[],this.selected_syn=function(){for(var t=e.vue.filter.selected.length,s=[],i=0;i<t;i++)s.push(e.vue.filter.selected[i].id);e.selected_site=s},this.sites_syn=function(){for(var t=data.sites.length,s=[],i=0;i<t;i++)$.inArray(data.sites[i].id,e.selected_site)<0&&s.push(data.sites[i]);e.vue.sites=s},this.get_site_info=function(e){for(var t=data.sites.length,s=0;s<t;s++)if(data.sites[s].id==e)return data.sites[s];return!1},this.arrayRemove=function(e,t,s){for(var i=e.length,n=[],a=0;a<i;a++)e[a][t]!=s&&n.push(e[a]);return n},this.list=data.search.list,this.insert_list=function(t){e.list=e.list.concat(t),e.vue.list=$.extend([],e.list)},this.has_more=function(){return(i+1)*n<s},this.btn_sta=function(){return 0==s?e.vue.load="End":e.has_more()?e.vue.load="More":e.vue.load="End"},this.getlist=function(t){t&&!e.has_more()||(e.vue.load="loading",t||(i=-1,e.list=[]),request.get("/search/results",function(t){t.hasOwnProperty("code")&&0==t.code&&(e.vue.total=s=t.data.total,i++,setTimeout(function(){e.btn_sta(),e.insert_list(t.data.list)},0))},{index:i+1,keyword:encodeURIComponent(e.vue.keyword),sites:e.selected_site}))},e.btn_sta(),function(){var t=input.get("site");t&&e.vue._selected(t)}()}.call(define("c_search"));