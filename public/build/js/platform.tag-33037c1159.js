(function(){window.view_nav_left.fold=function(){return jQuery("#content-container").css("padding-left",60),jQuery("#nav-container").css("padding-left",60)},window.view_nav_left.unfold=function(){return jQuery("#content-container").css("padding-left",140),jQuery("#nav-container").css("padding-left",140)}}).call(define("view_page_response")),function(){var t=this,e=data.tag,s=data.total,i=0,n=10;this.vue=new Vue({el:"#content-container",data:{visible:"visible",total:s,tag:e,load:"More",list:data.list,sites:data.sites,filter:{selected:[],fold:!0}},methods:{_fold:function(){this.filter.fold=!this.filter.fold},_clear:function(){this.filter.selected=[],t.selected_syn(),t.sites_syn(),t.getlist()},_selected:function(e){var s=t.get_site_info(e);s&&this.filter.selected.length<6&&(this.filter.selected.push(s),t.selected_syn(),t.sites_syn(),t.getlist())},_unselected:function(e){this.filter.selected=t.arrayRemove(this.filter.selected,"id",e),t.selected_syn(),t.sites_syn(),t.getlist()},_more:function(){t.getlist(!0)},_tag:function(){location.href="/tag/"+t.vue.keyword}}}),this.selected_site=[],this.selected_syn=function(){for(var e=t.vue.filter.selected.length,s=[],i=0;i<e;i++)s.push(t.vue.filter.selected[i].id);t.selected_site=s},this.sites_syn=function(){for(var e=data.sites.length,s=[],i=0;i<e;i++)$.inArray(data.sites[i].id,t.selected_site)<0&&s.push(data.sites[i]);t.vue.sites=s},this.get_site_info=function(t){for(var e=data.sites.length,s=0;s<e;s++)if(data.sites[s].id==t)return data.sites[s];return!1},this.arrayRemove=function(t,e,s){for(var i=t.length,n=[],l=0;l<i;l++)t[l][e]!=s&&n.push(t[l]);return n},this.list=data.list,this.insert_list=function(e){t.list=t.list.concat(e),t.vue.list=$.extend([],t.list)},this.has_more=function(){return(i+1)*n<s},this.btn_sta=function(){return 0==s?t.vue.load="End":t.has_more()?t.vue.load="More":t.vue.load="End"},this.getlist=function(e){e&&!t.has_more()||(t.vue.load="loading",e||(i=-1,t.list=[]),request.get("/tag/"+encodeURIComponent(t.vue.tag)+"/list",function(e){e.hasOwnProperty("code")&&0==e.code&&(t.vue.total=s=e.data.total,i++,setTimeout(function(){t.btn_sta(),t.insert_list(e.data.list)},0))},{index:i+1,sites:t.selected_site}))},t.btn_sta()}.call(define("controller_search"));