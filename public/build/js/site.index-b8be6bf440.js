(function(){var t=this;this.w=$(window),this.d=$(document),this.content=$("#site-content"),this.mid=$("#mid"),this.backgound=$("#background"),this.filter=$("#filter"),this.star=$("#star-album"),this.star_contaner=t.star.children(".item-container")}).call(define("dom")),function(){window.view_nav_left.fold=function(){return dom.mid.css("left",60),dom.content.css("padding-left",310),dom.backgound.css("padding-left",310),dom.filter.addClass("trans").removeClass("unfold")},window.view_nav_left.unfold=function(){return dom.mid.css("left",140),dom.content.css("padding-left",390),dom.backgound.css("padding-left",390),dom.filter.addClass("trans").addClass("unfold")}}.call(define("view_page_response")),function(){var t=this;this.filter_fixed=function(){var t=!!dom.filter.length&&dom.filter.offset().top;return function(){return dom.d.scrollTop()>t?dom.filter.addClass("fixed").removeClass("trans"):dom.filter.removeClass("fixed")}},this.scroll_event=function(){dom.w.scroll(t.filter_fixed())},!!dom.star&&t.scroll_event()}.call(define("view_home_page")),function(){global&&global.hasOwnProperty("uid")&&""==global.uid&&request.jsonp(global.platform.home+"/account/status",function(t){t.data&&t.data.login&&(location.href=global.platform.home+"/account/login?redirect="+encodeURIComponent(location.href))})}.call(define("controller_login_syn")),function(){var t=this,e=dom.star.children(".next"),n=dom.star.children(".prev"),i=dom.star_contaner.children("a"),o=i.length,l=dom.star.width(),r=441,a=0,s=!1,d={lock:!1,timer:0,start_width:0,start_margin:0,delay:1e3};this.btn_display_syn=function(){},this.win_contain_count=function(){return Math.floor(l/r)},this.is_to_be_the_last=function(){return Math.ceil(l/r)+a==o},this.get_last_width=function(){return r-l%r},this.move=function(t){return dom.star_contaner.css("margin-left",t)},this.next=function(){var e=0;a<o-2&&(t.is_to_be_the_last()?(e=-(a*r+t.get_last_width()-5),s=1):(a++,e=-a*r),t.move(e),t.btn_display_syn())},this.prev=function(){var e=0;a>0&&(s?(e=-(a*r),s=0):(a--,e=-a*r)),t.move(e),t.btn_display_syn()},this.keep_right_full=function(){s&&(d.lock?(d.timer&&clearTimeout(d.timer),t.move(d.start_margin+(dom.star.width()-d.start_width)),d.timer=setTimeout(function(){d.lock=!1},d.delay)):(d.start_width=dom.star.width(),d.start_margin=parseInt(dom.star_contaner.css("margin-left")),d.lock=!0))},this.resize_event=dom.w.resize(function(){l=dom.star.width(),t.btn_display_syn(),t.keep_right_full()}),this.next_event=e.click(t.next),this.prev_event=n.click(t.prev)}.call(define("view_star")),function(){var t=this;this.model={el:"#filter",data:{category:{active:0},keyword:""},methods:{filter:function(e){t.model.data.category.active=e,controller_list.get_category_list(e)},search:function(){window.open(global.platform.home+"/search?keyword="+encodeURIComponent(t.model.data.keyword)+"&site="+global.site_id,"_blank")}}},this.vue=new Vue(t.model)}.call(define("controller_filter")),function(){var t=this,e=data.article.total,n=0,i=15;this.model={el:"#list-container",data:{visible:"visible",none:1,load:"More",list:[]},methods:{get_list:function(){t.get_list()}}},this.category=0,this.list=[],this.filter_mode=function(){var t=$(".default-list");return!!t.length&&t.remove()},this.insert_list=function(e){t.list=t.list.concat(e),t.model.data.list=$.extend([],t.list)},this.swith_list=function(e){t.filter_mode(),t.list=t.model.data.list=e},this.has_more=function(){return(n+1)*i<e},this.btn_sta=function(){return t.list_is_empty(!e),0==e?t.vue.load="":t.has_more()?t.vue.load="More":t.vue.load="End"},this.list_is_empty=function(e){return t.model.data.none=e},this.btn_loading=function(){return t.vue.load="loading"},this.get_data=function(i,o,l){(t.has_more()||l)&&(t.btn_loading(),request.get("/index/list",function(i){i.hasOwnProperty("code")&&0==i.code&&(e=i.data.total,n++,setTimeout(function(){t.btn_sta(),o(i.data.list)},0))},{category:t.category,index:i+1}))},this.get_list=function(){t.get_data(n,function(e){t.insert_list(e)})},this.get_category_list=function(e){n=-1,t.category=e,t.get_data(n,function(e){t.swith_list(e)},1)},this.vue=new Vue(t.model),t.btn_sta()}.call(define("controller_list")),function(){function t(t,e){var n=new Image,o=t.getAttribute(i);n.onload=function(){t.src=o,!!t.removeAttribute&&t.removeAttribute(i),e?e():null},n.onerror=function(){!!t.removeAttribute&&t.removeAttribute(i),e?e():null},n.src=o}function e(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.top-200<=(window.innerHeight||document.documentElement.clientHeight)}function n(){for(var n=document.querySelectorAll("img["+i+"]"),o=0;o<n.length;o++)e(n[o])&&t(n[o])}var i="data-lazy-src";setInterval(n,300)}.call(this);