(function(){var e,r=this;this.vue=new Vue({el:"#login-container",data:{username:{val:"",error:{active:!1,text:""}},password:{val:""}},methods:{_check:function(){r.check()},_login:function(){r.login()}}}),this.error=function(t){e&&clearTimeout(e),r.vue.username.error.active=!0,r.vue.username.error.text=t,e=setTimeout(function(){r.vue.username.error.active=!1},2e3)},this.check=function(e){var t=r.vue.username.val;return""==t?r.error("用户名为空"):void request.post("/account/exist",function(t){t.hasOwnProperty("code")&&"10001"==t.code?r.error(t.msg||"请检查用户名"):!!e&&e()},{username:t})},this.login=function(){var e={username:r.vue.username.val,password:r.vue.password.val,redirect:input.get("redirect")};r.check(function(){request.post("/account/login",function(e){e.hasOwnProperty("code")&&"0"==e.code?e.data.hasOwnProperty("site")&&e.data.hasOwnProperty("session")&&r.redirect(e.data.session,e.data.site):r.error("用户名或密码错误")},e)})},this.redirect=function(e,r){var t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/,n=input.get("redirect"),o=n?decodeURIComponent(n):"/",a=t.exec(o);return r&&a&&a[0]?location.href="http://"+a[0]+"/sso/"+input.create_param({session:e,redirect:o}):location.href=o}}).call(define("c_login"));