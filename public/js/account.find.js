(function(){this.w=$(window),this.d=$(document),this.content=$("#content"),this.mid=$("#mid"),this.backgound=$("#background")}).call(define("dom")),function(){window.view_nav_left.fold=function(){return dom.content.css("padding-left",60),dom.backgound.css("left",60)},window.view_nav_left.unfold=function(){return dom.content.css("padding-left",140),dom.backgound.css("left",140)},this.resize_event=dom.w.resize(function(){}),this.scroll_event=dom.w.scroll(function(){})}.call(define("view_page_response")),function(e,t){if(!e.initGeetest){var r=t.getElementsByTagName("head")[0],n=location.protocol+"//",o=[],a="init",c=function(){return parseInt(1e4*Math.random())+(new Date).valueOf()},i=function(){for(var e=0,t=o.length;e<t;e+=1)o[e]();o=[]},s=function(){return e.Geetest||t.getElementById("gt_lib")},u=function(e){var o=t.createElement("script");o.charset="UTF-8",o.type="text/javascript",o.onload=o.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState){if(s())a="loaded",i();else{if(a="fail","function"!=typeof e.onError)throw new Error("网络错误");e.onError()}o.onload=o.onreadystatechange=null}},o.onerror=function(){if(a="fail",o.onerror=null,"function"!=typeof e.onError)throw new Error("网络错误");e.onError()};var c=e.staticservers&&e.staticservers[0]||"static.geetest.com/";o.src=n+c+"static/js/geetest.0.0.0.js",r.appendChild(o)},d=function(o){a="loading";var d="geetest_"+c();e[d]=function(){a="loaded",i(),e[d]=void 0;try{delete e[d]}catch(t){}};var l=t.createElement("script");l.charset="UTF-8",l.type="text/javascript",l.onload=l.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||s()||u(o)},l.onerror=function(){u(o)};var f=o.apiserver||"api.geetest.com/";l.src=n+f+"getfrontlib.php?gt="+o.gt+"&callback="+d,r.appendChild(l)};s()&&(a="loaded"),e.initGeetest=function(t,r){if("string"!=typeof t.gt)throw new Error("");var n=function(){r(new e.Geetest(t))};if("loaded"===a)n();else if("fail"===a){if("function"!=typeof t.onError)throw new Error("网络错误");t.onError()}else"loading"===a?o.push(function(){n()}):"init"===a&&(o.push(function(){n()}),d(t))}}}(window,document),function(){var e,t=this,r=!1;this.start=function(t){e=t,jQuery("#gt-btn").click()},this.load=function(){return!r&&(jQuery(document.body).append('<div id="geetest" class="geetest"></div><div id="gt-btn"></div>'),void request.get("/geetest/start",function(t){initGeetest({gt:t.gt,challenge:t.challenge,product:"popup",offline:!t.success},function(t){jQuery("#gt-btn").click(function(){var r=t.getValidate();return r?void request.post("/geetest/verify",function(t){t.hasOwnProperty("code")&&"0"==t.code&&e()},{geetest_challenge:r.geetest_challenge,geetest_validate:r.geetest_validate,geetest_seccode:r.geetest_seccode}):void pop.error("请完成图片验证","确定").one()}),t.bindOn("#gt-btn"),t.appendTo("#geetest"),r=!0})}))},this.timer=setTimeout(t.load,2e3)}.call(define("libGeetest")),function(){var e=this;this.vue=new Vue({el:"#find-form",data:{username:{val:"",lock:!1,error:!1,error_tip:""},captcha:{val:"",error:!1,error_tip:"",lock:!0,text:"验证",disable:0},password:{val:"",error:!1,error_tip:"",lock:!0},password_re:{val:"",error:!1,error_tip:"",lock:!0}},methods:{_get_captcha:function(){e.vue.captcha.disable||e.verify_username(function(){libGeetest.start(function(){e.captcha_send()})})},_submit:function(){e.verify_all(function(){e.find()})}}}),this.verify_username=function(t){var r=e.vue.username;return""==r.val?e.error_show(r,"用户名/手机号码为空"):request.post("/account/exist",function(n){n.hasOwnProperty("code")&&"0"!=n.code?e.error_show(r,"用户不存在"):(e.step_two_open(0),"function"==typeof t&&t())},{username:r.val})},this.verify_all=function(t){var r=e.vue;return""==r.captcha.val?e.error_show(r.captcha,"验证码为空"):6!=r.captcha.val.length?e.error_show(r.captcha,"验证码输入有误"):r.password.val.length<6?e.error_show(r.password,"密码需大于6位"):r.password.val!=r.password_re.val?e.error_show(r.password_re,"两次输入密码不一致"):"function"==typeof t?t():void 0},this.captcha_send=function(){var t=e.vue.username;return request.post("/account/captcha",function(r){r.hasOwnProperty("code")&&"0"==r.code?e.captcha_count((new Date).getTime()):e.error_show(t,r.msg||"发送失败,请重试")},{username:t.val})},this.captcha_count=function(t){var r,n;return e.vue.captcha.disable=!0,n=setInterval(function(){r=60-((new Date).getTime()-t)/1e3,r>=0?e.vue.captcha.text=Math.floor(r)+" 秒后重发":(clearInterval(n),e.vue.captcha.disable=!1,e.vue.captcha.text="重新发送")},500)},this.find=function(){var t=e.vue,r={username:t.username.val,captcha:t.captcha.val,password:t.password.val};return request.post("/account/find",function(r){if(r.hasOwnProperty("code")){if("0"==r.code)return pop.success("找回密码成功","重新登录",function(){location.href="/account/login"});if("20001"==r.code)return e.error_show(t.username,r.msg);if("20002"==r.code)return e.error_show(t.captcha,r.msg);if("20003"==r.code)return e.error_show(t.password,r.msg)}},r)},this.step_two_open=function(t){return e.vue.username.lock=!t,e.vue.captcha.lock=e.vue.password.lock=e.vue.password_re.lock=t},this.error_show=function(e,t){e.error_tip=t,e.error=1,setTimeout(function(){e.error=0},2e3)}}.call(define("c_find"));